"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[4633],{13194:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(65043),i=a(95926);const o=e=>{const{title:t,setTitle:a}=(0,n.useContext)(i.C);return(0,n.useEffect)(()=>a(e),[e,a]),t}},15238:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(56629);const i={getUsers:async e=>n.A.get("auth/users/",{params:e}).then(e=>e.data),getAvailableFarmers:async e=>n.A.get("vouchers/deposits/available_farmers",{params:e}).then(e=>e.data),createUser:async e=>n.A.post("auth/users/",e).then(e=>e.data),getUserDetails:async e=>n.A.get("auth/users/".concat(e,"/")).then(e=>e.data),updateUser:async(e,t)=>n.A.patch("auth/users/".concat(t,"/"),e).then(e=>e.data),deactivateUser:async e=>n.A.delete("auth/users/".concat(e,"/")).then(e=>e.data)}},23722:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(89379),i=(a(65043),a(67024)),o=a(81637),s=a(70579);const r=e=>{let{size:t,color:a="primary",sx:r}=e;return(0,s.jsx)(i.A,{sx:(0,n.A)({color:"grey.500"},r),spacing:2,direction:"row",children:(0,s.jsx)(o.A,{size:t,color:a})})}},23817:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(65043),i=a(17392),o=a(688),s=a(32143),r=a(42438),l=a(98082),d=a(70579);const c=e=>{let{actions:t,metaData:a,btnColor:c}=e;const[u,h]=(0,n.useState)(null),p=()=>{h(null)},x=t.filter(e=>!e.condition||e.condition(a));return 0===x.length?null:(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{size:"small",onClick:e=>{h(e.currentTarget)},children:(0,d.jsx)(l.A,{fontSize:"small"})}),(0,d.jsx)(o.A,{anchorEl:u,open:Boolean(u),onClose:p,children:x.map((e,t)=>(0,d.jsxs)(s.A,{onClick:()=>(e=>{e.onClick(a),p()})(e),children:[e.icon,(0,d.jsx)(r.L9,{sx:{marginLeft:"0.5rem"},children:e.label})]},t))})]})}},44633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(89379),i=a(96446),o=a(8302),s=a(65043),r=a(61408),l=a(64093),d=a(42438),c=a(23817),u=a(70579);const h=e=>[{Header:"Name",accessor:"name",minWidth:150,Cell:e=>{let{row:t}=e;const{name:a}=t.original;return(0,u.jsx)(d.L9,{sx:{fontSize:12,fontWeight:"bold"},children:a})}},{Header:"Admin",accessor:"hub_admin",minWidth:100,Cell:e=>{let{row:t}=e;const{hub_admin:a}=t.original;return(0,u.jsxs)(d.L9,{sx:{fontSize:12},children:[(null===a||void 0===a?void 0:a.first_name)||"Unknown"," ",(null===a||void 0===a?void 0:a.last_name)||"Unknown"]})}},{Header:"Slug",accessor:"slug",minWidth:150,Cell:e=>{let{row:t}=e;const{slug:a}=t.original;return(0,u.jsx)(d.L9,{sx:{fontSize:12},children:a})}},{Header:"Location",accessor:"location",minWidth:100},{Header:"Created At",accessor:"created_at",minWidth:150,Cell:e=>{let{row:t}=e;const{created_at:a}=t.original;return(0,u.jsx)(d.L9,{sx:{fontSize:12},children:new Date(a).toLocaleDateString()})}},{Header:"Updated At",accessor:"updated_at",minWidth:150,Cell:e=>{let{row:t}=e;const{updated_at:a}=t.original;return(0,u.jsx)(d.L9,{sx:{fontSize:12},children:new Date(a).toLocaleDateString()})}},{Header:"Status",accessor:"is_active",minWidth:80,Cell:e=>{let{row:t}=e;const{is_active:a}=t.original;return(0,u.jsx)(d.L9,{sx:{fontSize:12},children:a?"Yes":"No"})}},{Header:"Action",accessor:"action",minWidth:50,maxWidth:50,Cell:t=>{let{row:a}=t;const n=a.original;return(0,u.jsx)(c.A,{actions:e,metaData:n},a.id)}}];var p=a(8433),x=a(13194),m=a(63516),g=a(74523),A=a(23722),b=a(80644),f=a(73033);const j=f.Ik().shape({hub_admin:f.Yj(),name:f.Yj().min(1,"Too short").max(255,"Too long").required("Hub name is required"),location:f.Yj().min(1,"Too short").max(50,"Too long").required("Hub location is required"),is_active:f.zM().required()});var v=a(23768),y=a(25933),C=a(75992),S=a(76415),k=a(15238);const w=e=>{let{handleClose:t,formType:a="Save",initialValues:r,callBack:l}=e;const c=(0,s.useRef)(null),[h,p]=s.useState(!1),[x,f]=s.useState([]),w=async e=>{try{const t=(await k.D.getUsers({search:e})).results.map(e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," : ").concat(e.phone_number)}));f(t)}catch(t){console.error("Error fetching users:",t)}},H=((e,t)=>[{name:"hub_admin",initailValue:"",label:"Hub Admin",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"select",selector:{value:e=>e.hub_admin.id,label:e=>"".concat(e.hub_admin.first_name," ").concat(e.hub_admin.last_name," (").concat(e.hub_admin.phone_number,")")},options:e,handleSearch:t,isClearable:!0},{name:"name",initailValue:"",label:"Hub Name",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"text"},{name:"location",initailValue:"",label:"Hub Location",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"text"},{name:"is_active",initailValue:!0,label:"Active",type:"checkbox",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},uiType:"checkbox"}])(x,e=>{w(e)});(0,s.useEffect)(()=>{w("")},[]);const z=(0,m.Wx)({initialValues:(0,y.f6)(H),enableReinitialize:!0,validationSchema:j,validateOnChange:!0,validateOnMount:!0,onSubmit:e=>M(e)});(0,s.useEffect)(()=>{if("Update"===a&&r){const e=(0,y.RA)(H)(r||{});e.hub_admin=r.hub_admin||"",z.setValues(e)}},[r,a]);const M=async e=>{p(!0);try{(0,n.A)((0,n.A)({},e),{},{hub_admin:e.hub_admin||null});"Update"===a?await S.b.updateHubs(e,r.id):await S.b.createHubs(e),v.oR.success("Save"===a?"Hub created successfully":"Hub updated successfully"),W(),l&&l(),p(!1)}catch(t){t.response.data&&z.setErrors(t.response.data),p(!1)}},W=()=>{z.resetForm(),t()};return(0,u.jsx)(g.A,{title:"Save"===a?"New Hub":"Edit Hub",onClose:W,id:(0,C.A)(),ActionButtons:()=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.A,{onClick:W,children:"Close"}),(0,u.jsx)(o.A,{disabled:!z.isValid,type:"submit",variant:"contained",form:"hub",children:h?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(A.A,{color:"inherit",size:20})," ",(0,u.jsx)(d.L9,{style:{marginLeft:"0.5rem"},color:"primary",children:"Loading..."})]}):a})]}),children:(0,u.jsx)("form",{ref:c,onSubmit:z.handleSubmit,encType:"multipart/form-data",id:"hub",children:(0,u.jsx)(i.A,{sx:{width:"100%"},children:(0,u.jsx)(b.A,{others:{sx:{marginBottom:"0rem"}},formikInstance:z,formFields:H,validationSchema:j})})})})};var H=a(95540),z=a(63471),M=a(36644);const W={tablePreHeader:{display:"flex",alignItems:"center",gap:2,marginBottom:2},createButton:{marginLeft:"auto",height:"fit-content"},pageSize:{maxWidth:60,marginLeft:2}},_=()=>{(0,x.A)("Grain Hubs");const{setShowModal:e}=(0,p.k3)(),[t,a]=(0,s.useState)(),[d,c]=(0,s.useState)({}),[m,g]=(0,s.useState)(!1),[A,b]=(0,s.useState)(null),[f,j]=(0,s.useState)("Save");(0,s.useEffect)(()=>{y(d)},[d]);const y=async e=>{try{g(!0);const t=await S.b.getHubs(e);a(t),g(!1)}catch(t){g(!1)}},C=async()=>{y(d)},k=[{label:"Edit",icon:(0,u.jsx)(H.A,{color:"primary"}),onClick:t=>(t=>{j("Update"),b(t),setTimeout(()=>{e(!0)})})(t)},{label:"Delete",icon:(0,u.jsx)(z.A,{color:"error"}),onClick:e=>(async e=>{try{await S.b.deleteHubs(e.id),v.oR.success("Hub deleted successfully"),C()}catch(t){v.oR.error("Something went wrong")}})(e)}];return(0,u.jsxs)(i.A,{pt:2,pb:4,children:[(0,u.jsxs)(i.A,{sx:W.tablePreHeader,children:[(0,u.jsx)(l.A,{onBlur:e=>c((0,n.A)((0,n.A)({},d),{},{name:e.target.value})),onKeyUp:e=>{if("Enter"===e.key){const t=e.target;c((0,n.A)((0,n.A)({},d),{},{name:null===t||void 0===t?void 0:t.value}))}},type:"text",placeholder:"Search Hub..."}),(0,u.jsx)(o.A,{sx:W.createButton,variant:"contained",onClick:()=>{j("Save"),e(!0)},children:"Create"}),(0,u.jsx)(w,{callBack:C,formType:f,handleClose:()=>{e(!1)},initialValues:A})]}),(0,u.jsx)(r.A,{columnShape:h(k),data:(null===t||void 0===t?void 0:t.results)||[],dataCount:(null===t||void 0===t?void 0:t.count)||0,pageInitialState:{pageSize:M.hk,pageIndex:0},setPageIndex:e=>c((0,n.A)((0,n.A)({},d),{},{page:e})),pageIndex:(null===d||void 0===d?void 0:d.page)||1,setPageSize:e=>c((0,n.A)((0,n.A)({},d),{},{page_size:e})),loading:m})]})}},49250:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(89379),i=a(8122),o=a(70579);const s=e=>(0,o.jsxs)(i.A,(0,n.A)((0,n.A)({viewBox:"0 0 20 20"},e),{},{children:[(0,o.jsx)("path",{d:"M8.80758 0C3.95121 0 0 3.95121 0 8.80758C0 13.6642 3.95121 17.6152 8.80758 17.6152C13.6642 17.6152 17.6152 13.6642 17.6152 8.80758C17.6152 3.95121 13.6642 0 8.80758 0ZM8.80758 15.9892C4.84769 15.9892 1.62602 12.7675 1.62602 8.80762C1.62602 4.84773 4.84769 1.62602 8.80758 1.62602C12.7675 1.62602 15.9891 4.84769 15.9891 8.80758C15.9891 12.7675 12.7675 15.9892 8.80758 15.9892Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M19.7617 18.6124L15.1005 13.9511C14.7829 13.6335 14.2685 13.6335 13.9509 13.9511C13.6332 14.2684 13.6332 14.7834 13.9509 15.1007L18.6121 19.762C18.7709 19.9208 18.9788 20.0002 19.1869 20.0002C19.3948 20.0002 19.6029 19.9208 19.7617 19.762C20.0794 19.4446 20.0794 18.9297 19.7617 18.6124Z",fill:"currentColor"})]}))},61408:(e,t,a)=>{a.d(t,{A:()=>k});var n=a(89379),i=a(14126),o=a(34535),s=a(59135),r=a(26240),l=a(96446),d=a(71806),c=a(84882),u=a(28076),h=a(10039),p=a(73460),x=a(67024),m=a(72949),g=a(65043),A=a(71094),b=a(6905),f=a(42438),j=a(70579);const v=e=>{let{message:t}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.A,{sx:{width:"100%",color:"text.disabled"},children:(0,j.jsx)("p",{className:"font13",style:{fontWeight:500,color:"text.disabled"},children:t})})})};var y=a(32513),C=a(55935);const S=(0,o.Ay)(s.A)(e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{fontSize:12,fontWeight:500,color:t.palette.text.disabled},"& .MuiPaginationItem-page:hover":{borderRadius:20,backgroundColor:"transparent",color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main)},"& .MuiPaginationItem-page.Mui-selected":{borderRadius:20,backgroundColor:"transparent",color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main)},"& .MuiPaginationItem-previousNext":{margin:10,borderRadius:20,color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main),"&:hover":{backgroundColor:"transparent"}}}}),k=e=>{const{data:t,rowClick:a,showFooter:o,columnShape:s,hidePagination:k=!1,dataCount:w,pageInitialState:H,setPageIndex:z,pageIndex:M,loading:W}=e,_=(0,r.A)(),B=(0,g.useMemo)(()=>t,[t]),L=(0,g.useMemo)(()=>s,[s]),T=(0,g.useMemo)(()=>H,[H]),{getTableProps:I,getTableBodyProps:P,headerGroups:R,prepareRow:D,page:E,state:{pageSize:U},setPageSize:V}=(0,A.useTable)({columns:L,data:B,initialState:T},A.useSortBy,A.useExpanded,A.usePagination,A.useRowSelect);return(0,g.useEffect)(()=>{V(H.pageSize)},[H,V]),(0,j.jsxs)(l.A,{children:[(0,j.jsx)("div",{className:"table-responsive whiteBg",style:{borderRadius:10,border:"1px solid #eee"},children:(0,j.jsxs)(d.A,(0,n.A)((0,n.A)({},I()),{},{sx:{borderSpacing:"0 0.2rem",borderCollapse:"separate"},children:[(0,j.jsx)(c.A,{children:R.map(e=>(0,j.jsxs)(u.A,(0,n.A)((0,n.A)({},e.getHeaderGroupProps()),{},{children:[(0,j.jsx)(h.A,{sx:{paddingY:1,fontSize:13,width:10},children:"#"}),e.headers.map(e=>(0,j.jsx)(h.A,(0,n.A)((0,n.A)({},e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{paddingY:0,fontSize:13,fontWeight:600,color:"text.black",width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,"&:last-child":{textAlign:"center"}},children:e.render("Header")})))]})))}),(0,j.jsx)(p.A,(0,n.A)((0,n.A)({},P()),{},{children:W?(0,j.jsx)(u.A,{children:(0,j.jsx)(h.A,{colSpan:L.length+1,sx:{textAlign:"left"},children:(0,j.jsx)(y.a,{})})}):E.length>0?E.map((e,t)=>{var i;return D(e),(0,j.jsxs)(u.A,(0,n.A)((0,n.A)({},e.getRowProps()),{},{onClick:a&&a(e.original),sx:{backgroundColor:null!==(i=e.original)&&void 0!==i&&i.has_error?"pink":1&t?"background.paper":C.j3,borderTop:"1.5px solid ".concat(C.j3),cursor:a?"pointer":"unset","& td:first-of-type":{},"& td:last-of-type":{textAlign:"center"},"&:last-of-type .MuiTableCell-root":{borderBottom:"dark"===_.palette.mode?"1px solid ".concat(_.palette.divider," !important"):"1px solid ".concat(_.palette.text.secondary," !important")},borderSpacing:5},children:[(0,j.jsx)(h.A,{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:100*((M||1)-1)+t+1}),e.cells.map(e=>(0,j.jsx)(h.A,(0,n.A)((0,n.A)({},e.getCellProps()),{},{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:null===e||void 0===e?void 0:e.render("Cell")})))]}))}):(0,j.jsx)(u.A,{sx:{borderBottomWidth:0,borderColor:"white"},children:(0,j.jsx)(h.A,{colSpan:L.length+1,sx:{textAlign:"center"},children:(0,j.jsx)(v,{message:"No Data Available"})})})}))]}))}),!k&&(0,j.jsx)(x.A,{alignItems:"flex-end",marginY:1,children:(0,j.jsx)(S,{count:Math.ceil(w/U),shape:"rounded",page:M,onChange:(e,t)=>{z(t)}})}),o&&(0,j.jsxs)(b.A,{alignItems:"center",justifyContent:"space-between",children:[(0,j.jsx)(f.H5,{color:"text.disabled",children:"Showing 1-12 of 24 result"}),(0,j.jsxs)(m.A,{disableRipple:!0,sx:{fontSize:14,fontWeight:600},children:["See All",(0,j.jsx)(i.A,{sx:{marginLeft:.5}})]})]})]})}},63471:(e,t,a)=>{var n=a(24994);t.A=void 0;var i=n(a(40039)),o=a(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},64093:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(89379),i=a(62559),o=a(34535),s=a(49250),r=a(70579);const l=(0,o.Ay)(i.Ay)(e=>{let{theme:t}=e;return{height:35,fontSize:13,width:"100%",maxWidth:270,fontWeight:500,padding:"0 1rem",borderRadius:"8px",border:"1px solid ",borderColor:"light"===t.palette.mode?t.palette.secondary[300]:t.palette.divider,color:t.palette.text.primary,backgroundColor:t.palette.background.paper,[t.breakpoints.down(500)]:{maxWidth:"100%"}}}),d=e=>(0,r.jsx)(l,(0,n.A)((0,n.A)({},e),{},{sx:(0,n.A)({justifyContent:"initial"},e.sx),startAdornment:(0,r.jsx)(s.A,{sx:{fontSize:13,marginRight:1,color:"#bbb"}})}))},74523:(e,t,a)=>{a.d(t,{A:()=>f});a(65043);var n=a(8302),i=a(34535),o=a(90035),s=a(4219),r=a(35316),l=a(29347),d=a(17392),c=a(74802),u=a(8433),h=a(42438),p=a(96446),x=a(10611),m=a(70579);const g=(0,i.Ay)(o.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}),A=e=>{const{title:t,onClose:a,id:n}=e;return(0,m.jsxs)(s.A,{sx:{m:0,p:2},id:n,children:[(0,m.jsx)(h.L9,{sx:{fontSize:"1.2rem",fontWeight:"bold",padding:10,paddingLeft:0},children:t}),a?(0,m.jsx)(d.A,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,m.jsx)(c.A,{})}):null]})},b={loadingModalContentBackground:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#fff",opacity:.6,zIndex:1e3,pointerEvents:"none"}},f=e=>{let{children:t,onClose:a,title:i,maxWidth:o,minWidth:s,ActionButtons:d,selectedModalId:c,open:h}=e;const{showModal:f,loadingModalContent:j,modalId:v}=(0,u.k3)();if(!f&&!h)return null;if(void 0!==v&&v!==c)return null;return(0,m.jsx)(p.A,{children:(0,m.jsxs)(g,{onClose:e=>{a()},"aria-labelledby":"customized-dialog-title",open:void 0!==h?h:f,maxWidth:o,sx:{"& .MuiPaper-root":{minWidth:s||0}},style:{borderRadius:"10px"},children:[j&&(0,m.jsx)(p.A,{sx:{width:"100%",zIndex:1200},children:(0,m.jsx)(x.A,{})}),(0,m.jsx)(p.A,{sx:j?b.loadingModalContentBackground:{}}),(0,m.jsx)(A,{id:"customized-dialog-title",title:i,onClose:a}),(0,m.jsx)(r.A,{dividers:!0,children:t}),(0,m.jsx)(l.A,{children:d?(0,m.jsx)(d,{}):(0,m.jsx)(n.A,{autoFocus:!0,onClick:a,children:"Cancel"})})]})})}},74802:(e,t,a)=>{var n=a(24994);t.A=void 0;var i=n(a(40039)),o=a(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},76415:(e,t,a)=>{a.d(t,{b:()=>i});var n=a(56629);const i={getHubs:async e=>n.A.get("hubs/",{params:e}).then(e=>e.data),getHubDetails:async e=>n.A.get("hubs/".concat(e,"/")).then(e=>e.data),assignHubAdmin:async(e,t)=>n.A.post("hubs/".concat(e,"/assign-admin/"),t).then(e=>e.data),unassignHubAdmin:async(e,t)=>n.A.post("hubs/".concat(e,"/unassign-admin/"),t).then(e=>e.data),async createHubs(e){const t=new FormData;for(const a in e)t.append(a,e[a]);return n.A.post("hubs/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},updateHubs:async(e,t)=>(console.log(e),n.A.patch("hubs/".concat(t,"/"),e).then(e=>e.data)),deleteHubs:async e=>(console.log(e),n.A.delete("hubs/".concat(e,"/")).then(e=>e.data)),searchHubs:async e=>n.A.get("supported-Hubs/",{params:{query:e}}).then(e=>e.data)}},95540:(e,t,a)=>{var n=a(24994);t.A=void 0;var i=n(a(40039)),o=a(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},98082:(e,t,a)=>{var n=a(24994);t.A=void 0;var i=n(a(40039)),o=a(70579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")}}]);
//# sourceMappingURL=4633.5510b350.chunk.js.map