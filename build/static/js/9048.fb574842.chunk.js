"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[9048],{13194:(e,a,t)=>{t.d(a,{A:()=>i});var r=t(65043),n=t(95926);const i=e=>{const{title:a,setTitle:t}=(0,r.useContext)(n.C);return(0,r.useEffect)((()=>t(e)),[e,t]),a}},23722:(e,a,t)=>{t.d(a,{A:()=>l});var r=t(89379),n=(t(65043),t(67024)),i=t(81637),s=t(70579);const l=e=>{let{size:a,color:t="primary",sx:l}=e;return(0,s.jsx)(n.A,{sx:(0,r.A)({color:"grey.500"},l),spacing:2,direction:"row",children:(0,s.jsx)(i.A,{size:a,color:t})})}},23817:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(65043),n=t(17392),i=t(688),s=t(32143),l=t(42438),o=t(98082),d=t(70579);const c=e=>{let{actions:a,metaData:t,btnColor:c}=e;const[u,p]=(0,r.useState)(null),h=()=>{p(null)},m=a.filter((e=>!e.condition||e.condition(t)));return 0===m.length?null:(0,d.jsxs)("div",{children:[(0,d.jsx)(n.A,{size:"small",onClick:e=>{p(e.currentTarget)},children:(0,d.jsx)(o.A,{fontSize:"small"})}),(0,d.jsx)(i.A,{anchorEl:u,open:Boolean(u),onClose:h,children:m.map(((e,a)=>(0,d.jsxs)(s.A,{onClick:()=>(e=>{e.onClick(t),h()})(e),children:[e.icon,(0,d.jsx)(l.L9,{sx:{marginLeft:"0.5rem"},children:e.label})]},a)))})]})}},46055:(e,a,t)=>{t.d(a,{pU:()=>r});const r=e=>{if(!e)return"N/A";const a=new Date(e);if(isNaN(a.getTime()))return"Invalid Date";const t=a.getDate().toString().padStart(2,"0"),r=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getFullYear();return"".concat(t,"/").concat(r,"/").concat(n)}},49250:(e,a,t)=>{t.d(a,{A:()=>s});var r=t(89379),n=t(8122),i=t(70579);const s=e=>(0,i.jsxs)(n.A,(0,r.A)((0,r.A)({viewBox:"0 0 20 20"},e),{},{children:[(0,i.jsx)("path",{d:"M8.80758 0C3.95121 0 0 3.95121 0 8.80758C0 13.6642 3.95121 17.6152 8.80758 17.6152C13.6642 17.6152 17.6152 13.6642 17.6152 8.80758C17.6152 3.95121 13.6642 0 8.80758 0ZM8.80758 15.9892C4.84769 15.9892 1.62602 12.7675 1.62602 8.80762C1.62602 4.84773 4.84769 1.62602 8.80758 1.62602C12.7675 1.62602 15.9891 4.84769 15.9891 8.80758C15.9891 12.7675 12.7675 15.9892 8.80758 15.9892Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M19.7617 18.6124L15.1005 13.9511C14.7829 13.6335 14.2685 13.6335 13.9509 13.9511C13.6332 14.2684 13.6332 14.7834 13.9509 15.1007L18.6121 19.762C18.7709 19.9208 18.9788 20.0002 19.1869 20.0002C19.3948 20.0002 19.6029 19.9208 19.7617 19.762C20.0794 19.4446 20.0794 18.9297 19.7617 18.6124Z",fill:"currentColor"})]}))},61408:(e,a,t)=>{t.d(a,{A:()=>w});var r=t(89379),n=t(14126),i=t(34535),s=t(59135),l=t(26240),o=t(96446),d=t(71806),c=t(84882),u=t(28076),p=t(10039),h=t(73460),m=t(67024),g=t(72949),x=t(65043),b=t(71094),y=t(6905),A=t(42438),v=t(70579);const f=e=>{let{message:a}=e;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(o.A,{sx:{width:"100%",color:"text.disabled"},children:(0,v.jsx)("p",{className:"font13",style:{fontWeight:500,color:"text.disabled"},children:a})})})};var j=t(32513),C=t(55935);const S=(0,i.Ay)(s.A)((e=>{let{theme:a}=e;return{"& .MuiPaginationItem-root":{fontSize:12,fontWeight:500,color:a.palette.text.disabled},"& .MuiPaginationItem-page:hover":{borderRadius:20,backgroundColor:"transparent",color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main)},"& .MuiPaginationItem-page.Mui-selected":{borderRadius:20,backgroundColor:"transparent",color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main)},"& .MuiPaginationItem-previousNext":{margin:10,borderRadius:20,color:a.palette.primary.main,border:"1px solid ".concat(a.palette.primary.main),"&:hover":{backgroundColor:"transparent"}}}})),w=e=>{const{data:a,rowClick:t,showFooter:i,columnShape:s,hidePagination:w=!1,dataCount:_,pageInitialState:k,setPageIndex:z,pageIndex:D,loading:M}=e,T=(0,l.A)(),W=(0,x.useMemo)((()=>a),[a]),q=(0,x.useMemo)((()=>s),[s]),B=(0,x.useMemo)((()=>k),[k]),{getTableProps:H,getTableBodyProps:G,headerGroups:N,prepareRow:V,page:I,state:{pageSize:P},setPageSize:R}=(0,b.useTable)({columns:q,data:W,initialState:B},b.useSortBy,b.useExpanded,b.usePagination,b.useRowSelect);return(0,x.useEffect)((()=>{R(k.pageSize)}),[k,R]),(0,v.jsxs)(o.A,{children:[(0,v.jsx)("div",{className:"table-responsive whiteBg",style:{borderRadius:10,border:"1px solid #eee"},children:(0,v.jsxs)(d.A,(0,r.A)((0,r.A)({},H()),{},{sx:{borderSpacing:"0 0.2rem",borderCollapse:"separate"},children:[(0,v.jsx)(c.A,{children:N.map((e=>(0,v.jsxs)(u.A,(0,r.A)((0,r.A)({},e.getHeaderGroupProps()),{},{children:[(0,v.jsx)(p.A,{sx:{paddingY:1,fontSize:13,width:10},children:"#"}),e.headers.map((e=>(0,v.jsx)(p.A,(0,r.A)((0,r.A)({},e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{paddingY:0,fontSize:13,fontWeight:600,color:"text.black",width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,"&:last-child":{textAlign:"center"}},children:e.render("Header")}))))]}))))}),(0,v.jsx)(h.A,(0,r.A)((0,r.A)({},G()),{},{children:M?(0,v.jsx)(u.A,{children:(0,v.jsx)(p.A,{colSpan:q.length+1,sx:{textAlign:"left"},children:(0,v.jsx)(j.a,{})})}):I.length>0?I.map(((e,a)=>{var n;return V(e),(0,v.jsxs)(u.A,(0,r.A)((0,r.A)({},e.getRowProps()),{},{onClick:t&&t(e.original),sx:{backgroundColor:null!==(n=e.original)&&void 0!==n&&n.has_error?"pink":1&a?"background.paper":C.j3,borderTop:"1.5px solid ".concat(C.j3),cursor:t?"pointer":"unset","& td:first-of-type":{},"& td:last-of-type":{textAlign:"center"},"&:last-of-type .MuiTableCell-root":{borderBottom:"dark"===T.palette.mode?"1px solid ".concat(T.palette.divider," !important"):"1px solid ".concat(T.palette.text.secondary," !important")},borderSpacing:5},children:[(0,v.jsx)(p.A,{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:100*((D||1)-1)+a+1}),e.cells.map((e=>(0,v.jsx)(p.A,(0,r.A)((0,r.A)({},e.getCellProps()),{},{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:null===e||void 0===e?void 0:e.render("Cell")}))))]}))})):(0,v.jsx)(u.A,{sx:{borderBottomWidth:0,borderColor:"white"},children:(0,v.jsx)(p.A,{colSpan:q.length+1,sx:{textAlign:"center"},children:(0,v.jsx)(f,{message:"No Data Available"})})})}))]}))}),!w&&(0,v.jsx)(m.A,{alignItems:"flex-end",marginY:1,children:(0,v.jsx)(S,{count:Math.ceil(_/P),shape:"rounded",page:D,onChange:(e,a)=>{z(a)}})}),i&&(0,v.jsxs)(y.A,{alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(A.H5,{color:"text.disabled",children:"Showing 1-12 of 24 result"}),(0,v.jsxs)(g.A,{disableRipple:!0,sx:{fontSize:14,fontWeight:600},children:["See All",(0,v.jsx)(n.A,{sx:{marginLeft:.5}})]})]})]})}},63471:(e,a,t)=>{var r=t(24994);a.A=void 0;var n=r(t(40039)),i=t(70579);a.A=(0,n.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},64093:(e,a,t)=>{t.d(a,{A:()=>d});var r=t(89379),n=t(34535),i=t(62559),s=t(49250),l=t(70579);const o=(0,n.Ay)(i.Ay)((e=>{let{theme:a}=e;return{height:35,fontSize:13,width:"100%",maxWidth:270,fontWeight:500,padding:"0 1rem",borderRadius:"8px",border:"1px solid ",borderColor:"light"===a.palette.mode?a.palette.secondary[300]:a.palette.divider,color:a.palette.text.primary,backgroundColor:a.palette.background.paper,[a.breakpoints.down(500)]:{maxWidth:"100%"}}})),d=e=>(0,l.jsx)(o,(0,r.A)((0,r.A)({},e),{},{sx:(0,r.A)({justifyContent:"initial"},e.sx),startAdornment:(0,l.jsx)(s.A,{sx:{fontSize:13,marginRight:1,color:"#bbb"}})}))},69048:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var r=t(89379),n=t(53536),i=t(96446),s=t(8302),l=t(65043),o=t(61408),d=t(64093),c=t(85865),u=t(43845),p=t(73216),h=t(46055),m=t(23817),g=t(70579);const x={cursor:"pointer","&:hover":{textDecoration:"underline",fontWeight:"bold"}},b=e=>{let{id:a,grnNumber:t}=e;const r=(0,p.Zp)(),n=t||"DEP-".concat(a.slice(-8));return(0,g.jsx)(c.A,{sx:x,color:"primary",variant:"h6",onClick:()=>r("/admin/deposits/details/".concat(a)),children:n})},y=(e,a)=>[{Header:"Farmer",accessor:"farmer",minWidth:180,Cell:e=>{let{row:a}=e;const{farmer:t}=a.original;if(!t)return(0,g.jsx)(c.A,{color:"text.primary",children:"Unknown"});const r="".concat(t.first_name||""," ").concat(t.last_name||"").trim();return(0,g.jsxs)(c.A,{variant:"body1",children:[r||"N/A"," ",(0,g.jsx)("br",{}),(0,g.jsx)(c.A,{variant:"body2",color:"text.primary",children:t.phone_number})]})}},{Header:"Hub",accessor:"hub",minWidth:160,Cell:e=>{let{row:a}=e;const{hub:t}=a.original;return t?(0,g.jsxs)(c.A,{variant:"body1",children:[t.name," ",(0,g.jsx)("br",{}),(0,g.jsx)(c.A,{variant:"body2",color:"text.primary",children:t.location||"\u2014"})]}):"N/A"}},{Header:"Grain Type",accessor:"grain_type_details",minWidth:100,Cell:e=>{let{row:a}=e;const{grain_type_details:t}=a.original;return(0,g.jsx)(c.A,{variant:"body1",children:(null===t||void 0===t?void 0:t.name)||"N/A"})}},{Header:"Quality Grade",accessor:"quality_grade_details",minWidth:100,Cell:e=>{let{row:a}=e;const{quality_grade_details:t}=a.original;return(0,g.jsx)(c.A,{variant:"body1",children:(null===t||void 0===t?void 0:t.name)||"N/A"})}},{Header:"Quantity (KG)",accessor:"quantity_kg",minWidth:130,Cell:e=>{let{row:a}=e;const{quantity_kg:t}=a.original;return(0,g.jsx)(c.A,{variant:"body1",children:t?"".concat(Number(t).toLocaleString()," kg"):"N/A"})}},{Header:"Value (UGX)",accessor:"value",minWidth:140,Cell:e=>{let{row:a}=e;const{value:t}=a.original;return(0,g.jsx)(c.A,{variant:"body1",fontWeight:"medium",children:t?"".concat(Number(t).toLocaleString("en-UG",{minimumFractionDigits:0})):"N/A"})}},{Header:"Moisture Level",accessor:"moisture_level",minWidth:100,Cell:e=>{let{row:a}=e;const{moisture_level:t}=a.original;return(0,g.jsx)(c.A,{variant:"body1",children:t?"".concat(t,"%"):"N/A"})}},{Header:"Deposit Date",accessor:"deposit_date",minWidth:120,Cell:e=>{let{row:a}=e;return(0,h.pU)(a.original.deposit_date)}},{Header:"Validation Status",accessor:"validated",minWidth:120,Cell:e=>{let{row:a}=e;const{validated:t}=a.original;return(0,g.jsx)(u.A,{label:t?"Validated":"Pending",size:"small",color:t?"success":"warning",variant:t?"filled":"outlined"})}},{Header:"Notes",accessor:"notes",minWidth:200,Cell:e=>{let{row:a}=e;const{notes:t}=a.original;if(!t)return(0,g.jsx)(c.A,{variant:"body2",color:"text.primary",children:"No notes"});const r=t.length>50?"".concat(t.slice(0,47),"..."):t;return(0,g.jsx)(c.A,{variant:"body2",title:t,sx:{cursor:t.length>50?"help":"default"},children:r})}},{Header:"GRN Number",accessor:"grn_number",minWidth:250,Cell:e=>{let{row:a}=e;const{grn_number:t,id:r}=a.original;return(0,g.jsx)(b,{id:r,grnNumber:t})}},{Header:"Action",accessor:"action",minWidth:60,maxWidth:60,Cell:a=>{let{row:t}=a;const r=t.original;return(0,g.jsx)(m.A,{actions:e,metaData:r},t.id)}}];var A=t(8433),v=t(13194),f=t(63516),j=t(74523),C=t(23722),S=t(42438),w=t(80644),_=t(73033);const k=_.Ik().shape({hub_admin:_.Yj().nullable(),farmer_id:_.Yj().required("Farmer is required"),hub_id:_.Yj().required("Hub is required"),agent:_.Yj().nullable(),deposit_date:_.p6().required("Deposit date is required").max(new Date,"Deposit date cannot be in the future"),is_active:_.zM().required("Must specify active status"),grain_type:_.Yj().required("Grain type is required"),quantity_kg:_.ai().min(1,"Quantity must be at least 1 KG").required("Quantity is required"),moisture_level:_.ai().min(0,"Moisture level cannot be negative").max(100,"Moisture level must be between 0 and 100").required("Moisture level is required"),quality_grade:_.Yj().required("Quality grade is required"),grn_number:_.Yj().nullable(),validated:_.zM(),notes:_.Yj().max(500,"Notes must not exceed 500 characters").nullable()});var z=t(23768),D=t(75992),M=t(25933),T=t(56629);const W=new class{async getUsers(e){const a=await T.A.get("auth/users/",{params:e});return a.data.results||a.data}async getFarmers(e){const a=await T.A.get("auth/users/",{params:e});return a.data.results||a.data}async getHubs(e){const a=await T.A.get("/hubs/",{params:e});return a.data.results||a.data}async getAgents(e){const a=await T.A.get("auth/users/",{params:e});return a.data.results||a.data}async getGrainTypes(e){const a=await T.A.get("vouchers/grain-types/",{params:e});return a.data.results||a.data}async getQualityGrades(e){const a=await T.A.get("vouchers/quality-grades/",{params:e});return a.data.results||a.data}async searchUsers(e){const a=await T.A.get("/users/",{params:{search:e,page_size:20}});return a.data.results||a.data}async searchFarmers(e){const a=await T.A.get("auth/users/",{params:{search:e,page_size:20}});return a.data.results||a.data}async searchHubs(e){const a=await T.A.get("/hubs/",{params:{search:e,page_size:20}});return a.data.results||a.data}async searchAgents(e){const a=await T.A.get("auth/users",{params:{search:e,page_size:20}});return a.data.results||a.data}async searchGrainTypes(e){const a=await T.A.get("vouchers/grain-types/",{params:{search:e,page_size:20}});return a.data.results||a.data}async searchQualityGrades(e){const a=await T.A.get("vouchers/quality-grades/",{params:{search:e,page_size:20}});return a.data.results||a.data}async getDeposits(e){return(await T.A.get("vouchers/deposits/",{params:e})).data}async createDeposit(e){return(await T.A.post("vouchers/deposits/",e)).data}async updateDeposit(e,a){return(await T.A.put("vouchers/deposits/".concat(e,"/"),a)).data}async deleteDeposits(e){return(await T.A.delete("vouchers/deposits/".concat(e,"/"))).data}},q=e=>{let{callBack:a,formType:t="Save",handleClose:r,initialValues:n,formData:o,formDataLoading:d,searchHandlers:c}=e;const u=(0,l.useRef)(null),[p,h]=l.useState(!1),m=(x=o.users,b=o.farmers,y=o.hubs,A=o.agents,v=o.grainTypes,_=o.qualityGrades,T=c.handleGrainTypeSearch,q=c.handleQualityGradeSearch,B=c.handleUserSearch,H=c.handleFarmerSearch,G=c.handleHubSearch,N=c.handleAgentSearch,[{name:"hub_admin",initailValue:"",label:"Hub Admin",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"select",selector:{value:e=>e.hub_admin.id,label:e=>"".concat(e.hub_admin.first_name," ").concat(e.hub_admin.last_name," (").concat(e.hub_admin.phone_number,")")},options:x,handleSearch:B,isClearable:!0},{name:"farmer_id",initailValue:"",label:"Farmer",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"select",options:b,handleSearch:H},{name:"hub_id",initailValue:"",label:"Hub",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"select",options:y,handleSearch:G},{name:"agent",initailValue:"",label:"Agent (Optional)",type:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},uiType:"select",options:A,handleSearch:N,required:!1},{name:"deposit_date",initailValue:(new Date).toISOString().split("T")[0],label:"Deposit Date",type:"date",uiType:"date",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6}},{name:"is_active",initailValue:!0,label:"Active",type:"checkbox",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},uiType:"checkbox"},{name:"grain_type",initailValue:"",label:"Grain Type",type:"text",uiType:"select",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},options:v,handleSearch:T},{name:"quantity_kg",initailValue:0,label:"Quantity (KG)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6}},{name:"moisture_level",initailValue:0,label:"Moisture Level (%)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6}},{name:"quality_grade",initailValue:"",label:"Quality Grade",type:"text",uiType:"select",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},options:_,handleSearch:q},{name:"grn_number",initailValue:"",label:"GRN Number (Optional)",type:"text",uiType:"text",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!1},{name:"validated",initailValue:!1,label:"Validated",type:"boolean",uiType:"switch",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6}},{name:"notes",initailValue:"",label:"Notes",type:"text",uiType:"textarea",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!1}]);var x,b,y,A,v,_,T,q,B,H,G,N;const V=(0,f.Wx)({initialValues:(0,M.f6)(m),enableReinitialize:!0,validationSchema:k,validateOnChange:!0,validateOnMount:!0,onSubmit:e=>I(e)});(0,l.useEffect)((()=>{if("Update"===t&&n){const e=(0,M.RA)(m)(n||{});V.setValues(e)}}),[n,t]);const I=async e=>{h(!0);try{"Save"===t?(await W.createDeposit(e),z.oR.success("Deposit created successfully")):(await W.updateDeposit(n.id,e),z.oR.success("Deposit updated successfully")),P(),a&&a(),h(!1)}catch(i){var r;null!==(r=i.response)&&void 0!==r&&r.data?V.setErrors(i.response.data):z.oR.error("Something went wrong"),h(!1)}},P=()=>{V.resetForm(),r()};return d?(0,g.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:"Loading form data..."}):(0,g.jsx)(j.A,{title:"Save"===t?"New Deposit":"Edit Deposit",onClose:P,id:(0,D.A)(),ActionButtons:()=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.A,{onClick:P,children:"Close"}),(0,g.jsx)(s.A,{disabled:!V.isValid,type:"submit",variant:"contained",form:"deposit",children:p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(C.A,{color:"inherit",size:20})," ",(0,g.jsx)(S.L9,{style:{marginLeft:"0.5rem"},color:"primary",children:"Loading..."})]}):t})]}),children:(0,g.jsx)("form",{ref:u,onSubmit:V.handleSubmit,encType:"multipart/form-data",id:"deposit",children:(0,g.jsx)(i.A,{sx:{width:"100%"},children:(0,g.jsx)(w.A,{others:{sx:{marginBottom:"0rem"}},formikInstance:V,formFields:m,validationSchema:k})})})})};var B=t(95540),H=t(63471),G=t(36644);const N={tablePreHeader:{display:"flex",alignItems:"center",gap:2,marginBottom:2},createButton:{marginLeft:"auto",height:"fit-content"},pageSize:{maxWidth:60,marginLeft:2}},V=()=>{(0,v.A)("Deposits");const{setShowModal:e}=(0,A.k3)(),[a,t]=(0,l.useState)(),[c,u]=(0,l.useState)({}),[p,h]=(0,l.useState)(!1),[m,x]=(0,l.useState)(null),[b,f]=(0,l.useState)("Save"),[j,C]=(0,l.useState)({users:[],farmers:[],hubs:[],agents:[],grainTypes:[],qualityGrades:[]}),[S,w]=(0,l.useState)(!1);(0,l.useEffect)((()=>{_(c)}),[c]),(0,l.useEffect)((()=>{k()}),[]);const _=async e=>{try{h(!0);const a=await W.getDeposits(e);t(a),h(!1)}catch(a){h(!1)}},k=async()=>{try{w(!0);const[e,a,t,r,n,i]=await Promise.all([W.getUsers(),W.getFarmers(),W.getHubs(),W.getAgents(),W.getGrainTypes(),W.getQualityGrades()]);C({users:e.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")}))),farmers:a.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")}))),hubs:t.map((e=>({value:e.id,label:e.name}))),agents:r.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")}))),grainTypes:n.map((e=>({value:e.id,label:e.name}))),qualityGrades:i.map((e=>({value:e.id,label:e.name})))}),w(!1)}catch(e){console.error("Error fetching form data:",e),z.oR.error("Failed to load form data"),w(!1)}},D=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchGrainTypes(e);C((e=>(0,r.A)((0,r.A)({},e),{},{grainTypes:a.map((e=>({value:e.id,label:e.name})))})))}catch(a){console.error("Error searching grain types:",a)}}),300),[]),M=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchQualityGrades(e);C((e=>(0,r.A)((0,r.A)({},e),{},{qualityGrades:a.map((e=>({value:e.id,label:e.name})))})))}catch(a){console.error("Error searching quality grades:",a)}}),300),[]),T=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchUsers(e);C((e=>(0,r.A)((0,r.A)({},e),{},{users:a.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")})))})))}catch(a){console.error("Error searching users:",a)}}),300),[]),V=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchFarmers(e);C((e=>(0,r.A)((0,r.A)({},e),{},{farmers:a.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")})))})))}catch(a){console.error("Error searching farmers:",a)}}),300),[]),I=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchHubs(e);C((e=>(0,r.A)((0,r.A)({},e),{},{hubs:a.map((e=>({value:e.id,label:e.name})))})))}catch(a){console.error("Error searching hubs:",a)}}),300),[]),P=(0,l.useCallback)((0,n.debounce)((async e=>{try{const a=await W.searchAgents(e);C((e=>(0,r.A)((0,r.A)({},e),{},{agents:a.map((e=>({value:e.id,label:"".concat(e.first_name," ").concat(e.last_name," (").concat(e.phone_number,")")})))})))}catch(a){console.error("Error searching agents:",a)}}),300),[]),R=async()=>{_(c)},E=[{label:"Edit",icon:(0,g.jsx)(B.A,{color:"primary"}),onClick:a=>(a=>{f("Update"),x(a),setTimeout((()=>{e(!0)}))})(a)},{label:"Delete",icon:(0,g.jsx)(H.A,{color:"error"}),onClick:e=>(async e=>{try{await W.deleteDeposits(e.id),z.oR.success("Deposit deleted successfully"),R()}catch(a){z.oR.error("Something went wrong")}})(e)}];return(0,g.jsxs)(i.A,{pt:2,pb:4,children:[(0,g.jsxs)(i.A,{sx:N.tablePreHeader,children:[(0,g.jsx)(d.A,{onBlur:e=>u((0,r.A)((0,r.A)({},c),{},{name:e.target.value})),onKeyUp:e=>{if("Enter"===e.key){const a=e.target;u((0,r.A)((0,r.A)({},c),{},{name:null===a||void 0===a?void 0:a.value}))}},type:"text",placeholder:"Search Deposit..."}),(0,g.jsx)(s.A,{sx:N.createButton,variant:"contained",onClick:()=>{f("Save"),e(!0)},children:"Create"}),(0,g.jsx)(q,{callBack:R,formType:b,handleClose:()=>{e(!1)},initialValues:m,formData:j,formDataLoading:S,searchHandlers:{handleGrainTypeSearch:D,handleQualityGradeSearch:M,handleUserSearch:T,handleFarmerSearch:V,handleHubSearch:I,handleAgentSearch:P}})]}),(0,g.jsx)(o.A,{columnShape:y(E,"id"),data:(null===a||void 0===a?void 0:a.results)||[],dataCount:(null===a||void 0===a?void 0:a.count)||0,pageInitialState:{pageSize:G.hk,pageIndex:0},setPageIndex:e=>u((0,r.A)((0,r.A)({},c),{},{page:e})),pageIndex:(null===c||void 0===c?void 0:c.page)||1,setPageSize:e=>u((0,r.A)((0,r.A)({},c),{},{page_size:e})),loading:p})]})}},74523:(e,a,t)=>{t.d(a,{A:()=>A});t(65043);var r=t(8302),n=t(34535),i=t(90035),s=t(4219),l=t(35316),o=t(29347),d=t(17392),c=t(74802),u=t(8433),p=t(42438),h=t(96446),m=t(10611),g=t(70579);const x=(0,n.Ay)(i.A)((e=>{let{theme:a}=e;return{"& .MuiDialogContent-root":{padding:a.spacing(2)},"& .MuiDialogActions-root":{padding:a.spacing(1)}}})),b=e=>{const{title:a,onClose:t,id:r}=e;return(0,g.jsxs)(s.A,{sx:{m:0,p:2},id:r,children:[(0,g.jsx)(p.L9,{sx:{fontSize:"1.2rem",fontWeight:"bold",padding:10,paddingLeft:0},children:a}),t?(0,g.jsx)(d.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,g.jsx)(c.A,{})}):null]})},y={loadingModalContentBackground:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#fff",opacity:.6,zIndex:1e3,pointerEvents:"none"}},A=e=>{let{children:a,onClose:t,title:n,maxWidth:i,minWidth:s,ActionButtons:d,selectedModalId:c,open:p}=e;const{showModal:A,loadingModalContent:v,modalId:f}=(0,u.k3)();if(!A&&!p)return null;if(void 0!==f&&f!==c)return null;return(0,g.jsx)(h.A,{children:(0,g.jsxs)(x,{onClose:e=>{t()},"aria-labelledby":"customized-dialog-title",open:void 0!==p?p:A,maxWidth:i,sx:{"& .MuiPaper-root":{minWidth:s||0}},style:{borderRadius:"10px"},children:[v&&(0,g.jsx)(h.A,{sx:{width:"100%",zIndex:1200},children:(0,g.jsx)(m.A,{})}),(0,g.jsx)(h.A,{sx:v?y.loadingModalContentBackground:{}}),(0,g.jsx)(b,{id:"customized-dialog-title",title:n,onClose:t}),(0,g.jsx)(l.A,{dividers:!0,children:a}),(0,g.jsx)(o.A,{children:d?(0,g.jsx)(d,{}):(0,g.jsx)(r.A,{autoFocus:!0,onClick:t,children:"Cancel"})})]})})}},74802:(e,a,t)=>{var r=t(24994);a.A=void 0;var n=r(t(40039)),i=t(70579);a.A=(0,n.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},95540:(e,a,t)=>{var r=t(24994);a.A=void 0;var n=r(t(40039)),i=t(70579);a.A=(0,n.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},98082:(e,a,t)=>{var r=t(24994);a.A=void 0;var n=r(t(40039)),i=t(70579);a.A=(0,n.default)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")}}]);
//# sourceMappingURL=9048.fb574842.chunk.js.map