"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[2575],{13194:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(65043),r=a(95926);const i=e=>{const{title:t,setTitle:a}=(0,n.useContext)(r.C);return(0,n.useEffect)(()=>a(e),[e,a]),t}},23722:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(89379),r=(a(65043),a(67024)),i=a(81637),o=a(70579);const s=e=>{let{size:t,color:a="primary",sx:s}=e;return(0,o.jsx)(r.A,{sx:(0,n.A)({color:"grey.500"},s),spacing:2,direction:"row",children:(0,o.jsx)(i.A,{size:t,color:a})})}},23817:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(65043),r=a(17392),i=a(688),o=a(32143),s=a(42438),l=a(98082),d=a(70579);const c=e=>{let{actions:t,metaData:a,btnColor:c}=e;const[u,p]=(0,n.useState)(null),g=()=>{p(null)},h=t.filter(e=>!e.condition||e.condition(a));return 0===h.length?null:(0,d.jsxs)("div",{children:[(0,d.jsx)(r.A,{size:"small",onClick:e=>{p(e.currentTarget)},children:(0,d.jsx)(l.A,{fontSize:"small"})}),(0,d.jsx)(i.A,{anchorEl:u,open:Boolean(u),onClose:g,children:h.map((e,t)=>(0,d.jsxs)(o.A,{onClick:()=>(e=>{e.onClick(a),g()})(e),children:[e.icon,(0,d.jsx)(s.L9,{sx:{marginLeft:"0.5rem"},children:e.label})]},t))})]})}},42575:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var n=a(89379),r=a(96446),i=a(8302),o=a(65043),s=a(23768),l=a(63471),d=a(95540),c=a(13194),u=a(8433),p=a(96581),g=a(64093),h=a(61408),x=a(85865),m=a(73216),A=a(46055),b=a(23817),y=a(42438),v=a(70579);const f={cursor:"pointer","&:hover":{textDecoration:"underline",fontWeight:"bold"}},j=e=>{let{id:t,period:a}=e;const n=(0,m.Zp)();return(0,v.jsx)(x.A,{sx:f,color:"primary",variant:"h6",onClick:()=>n("/admin/accounting/budgets/details/".concat(t)),children:(0,A.pU)(a)})},C=e=>[{Header:"Period",accessor:"period",minWidth:120,Cell:e=>{let{row:t}=e;return(0,v.jsx)(j,{id:t.original.id,period:t.original.period})}},{Header:"Hub",accessor:"hub.name",minWidth:150},{Header:"Grain Type",accessor:"grain_type.name",minWidth:150},{Header:"Budgeted Amount",accessor:"budgeted_amount",minWidth:120},{Header:"Actual Amount",accessor:"actual_amount",minWidth:120},{Header:"Variance",accessor:"variance",minWidth:120},{Header:"Variance %",accessor:"variance_percentage",minWidth:100},{Header:"Over Budget",accessor:"is_over_budget",minWidth:120,Cell:e=>{let{value:t}=e;return(0,v.jsx)(y.L9,{children:t?"Yes":"No"})}},{Header:"Action",accessor:"action",minWidth:100,maxWidth:100,Cell:t=>{let{row:a}=t;return(0,v.jsx)(b.A,{actions:e,metaData:a.original},a.id)}}];var S=a(63516),k=a(74523),B=a(23722),w=a(80644),M=a(25933),W=a(75992);var z=a(73033);const H=()=>z.Ik().shape({period:z.p6().required("Period is required"),budgeted_amount:z.ai().min(0,"Budgeted amount must be >= 0").required()});var T=a(76415),P=a(60975);const I=e=>{let{handleClose:t,formType:a="Save",initialValues:n,callBack:l}=e;const d=(0,o.useRef)(null),[c,u]=(0,o.useState)(!1),[g,h]=(0,o.useState)([]),[x,m]=(0,o.useState)([]);(0,o.useEffect)(()=>{T.b.getHubs({}).then(e=>h(e.results.map(e=>({value:e.id,label:e.name})))),P.X.getGrainTypes({}).then(e=>m(e.results.map(e=>({value:e.id,label:e.name}))))},[]);const A=(e=>{const{hubs:t,grainTypes:a}=e;return[{name:"period",initailValue:"",label:"Period",uiType:"date",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!0},{name:"hub_id",initailValue:"",label:"Hub",type:"select",uiType:"select",options:t,uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!1},{name:"grain_type_id",initailValue:"",label:"Grain Type",type:"select",uiType:"select",options:a,uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!1},{name:"budgeted_amount",initailValue:0,label:"Budgeted Amount",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!0}]})({hubs:g,grainTypes:x}),b=(0,S.Wx)({initialValues:(0,M.f6)(A),validationSchema:H(),validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,enableReinitialize:!0,onSubmit:e=>f(e)});(0,o.useEffect)(()=>{"Update"===a&&n&&b.setValues((0,M.RA)(A)(n||{}))},[n,a]);const f=async e=>{u(!0);try{"Update"===a?(await p.N.updateBudget(e,n.id),s.oR.success("Budget updated successfully")):(await p.N.createBudget(e),s.oR.success("Budget created successfully")),b.resetForm(),l&&l(),t()}catch(i){var r;null!==(r=i.response)&&void 0!==r&&r.data&&b.setErrors(i.response.data),s.oR.error(i.message||"An error occurred")}finally{u(!1)}},j=()=>{b.resetForm(),t()},C=()=>{b.handleSubmit()};return(0,v.jsx)(k.A,{title:"Save"===a?"New Budget":"Edit Budget",onClose:j,id:(0,W.A)(),ActionButtons:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.A,{onClick:j,disabled:c,children:"Close"}),(0,v.jsx)(i.A,{onClick:C,type:"button",variant:"contained",disabled:c,children:c?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(B.A,{color:"inherit",size:20})," ",(0,v.jsx)(y.L9,{style:{marginLeft:"0.5rem"},color:"primary",children:"Loading..."})]}):"Update"===a?"Update Budget":"Create Budget"})]}),children:(0,v.jsx)("form",{ref:d,onSubmit:e=>{e.preventDefault(),f(b.values)},encType:"multipart/form-data",children:(0,v.jsx)(r.A,{sx:{width:"100%"},children:(0,v.jsx)(w.A,{others:{sx:{marginBottom:"0rem"}},formikInstance:b,formFields:A,validationSchema:H()})})})})};var R=a(36644);const D={tablePreHeader:{display:"flex",alignItems:"center",gap:2,marginBottom:2}},N=()=>{(0,c.A)("Budgets");const{setShowModal:e}=(0,u.k3)(),[t,a]=(0,o.useState)(null),[x,m]=(0,o.useState)("Save"),[A,b]=(0,o.useState)(""),[y,f]=(0,o.useState)(),[j,S]=(0,o.useState)(null),[k,B]=(0,o.useState)(!1);(0,o.useEffect)(()=>{w(j)},[j]);const w=async e=>{try{B(!0);const t=await p.N.getBudgets(e);f(t),B(!1)}catch(t){B(!1),console.error("Error fetching Budgets:",t)}},M=()=>{w(j)},W=[{label:"Edit",icon:(0,v.jsx)(d.A,{color:"primary"}),onClick:t=>{m("Update"),a(t),setTimeout(()=>e(!0),0)}},{label:"Delete",icon:(0,v.jsx)(l.A,{color:"error"}),onClick:async e=>{try{await p.N.deleteBudget(e.id),s.oR.success("Budget deleted successfully"),M()}catch(t){s.oR.error("Something went wrong")}}}];return(0,v.jsxs)(r.A,{pt:2,pb:4,children:[(0,v.jsxs)(r.A,{sx:D.tablePreHeader,children:[(0,v.jsx)(g.A,{value:A,onChange:e=>{const t=e.target.value;b(t),S((0,n.A)((0,n.A)({},j),{},{search:t}))},type:"text",placeholder:"Search budget..."}),(0,v.jsx)(i.A,{sx:{marginLeft:"auto"},variant:"contained",onClick:()=>{m("Save"),a(null),e(!0)},children:"Create Budget"})]}),(0,v.jsx)(h.A,{columnShape:C(W),data:(null===y||void 0===y?void 0:y.results)||[],dataCount:(null===y||void 0===y?void 0:y.count)||0,pageInitialState:{pageSize:R.hk,pageIndex:0},setPageIndex:e=>S((0,n.A)((0,n.A)({},j),{},{page:e})),pageIndex:(null===j||void 0===j?void 0:j.page)||1,setPageSize:e=>S((0,n.A)((0,n.A)({},j),{},{page_size:e})),loading:k}),(0,v.jsx)(I,{callBack:M,formType:x,handleClose:()=>{e(!1)},initialValues:t||{}})]})}},46055:(e,t,a)=>{a.d(t,{pU:()=>n});const n=e=>{if(!e)return"N/A";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)}},49250:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(89379),r=a(8122),i=a(70579);const o=e=>(0,i.jsxs)(r.A,(0,n.A)((0,n.A)({viewBox:"0 0 20 20"},e),{},{children:[(0,i.jsx)("path",{d:"M8.80758 0C3.95121 0 0 3.95121 0 8.80758C0 13.6642 3.95121 17.6152 8.80758 17.6152C13.6642 17.6152 17.6152 13.6642 17.6152 8.80758C17.6152 3.95121 13.6642 0 8.80758 0ZM8.80758 15.9892C4.84769 15.9892 1.62602 12.7675 1.62602 8.80762C1.62602 4.84773 4.84769 1.62602 8.80758 1.62602C12.7675 1.62602 15.9891 4.84769 15.9891 8.80758C15.9891 12.7675 12.7675 15.9892 8.80758 15.9892Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M19.7617 18.6124L15.1005 13.9511C14.7829 13.6335 14.2685 13.6335 13.9509 13.9511C13.6332 14.2684 13.6332 14.7834 13.9509 15.1007L18.6121 19.762C18.7709 19.9208 18.9788 20.0002 19.1869 20.0002C19.3948 20.0002 19.6029 19.9208 19.7617 19.762C20.0794 19.4446 20.0794 18.9297 19.7617 18.6124Z",fill:"currentColor"})]}))},60975:(e,t,a)=>{a.d(t,{X:()=>r});var n=a(56629);const r={getGrainTypes:async e=>n.A.get("vouchers/grain-types/",{params:e}).then(e=>e.data),getGrainTypeDetails:async e=>n.A.get("vouchers/grain-types/".concat(e,"/")).then(e=>e.data),createGrainTypes:async e=>(console.log(e),n.A.post("vouchers/grain-types/",e).then(e=>e.data)),updateGrainTypes:async(e,t)=>(console.log(e),n.A.patch("vouchers/grain-types/".concat(t,"/"),e).then(e=>e.data)),deleteGrainTypes:async e=>(console.log(e),n.A.delete("vouchers/grain-types/".concat(e,"/")).then(e=>e.data))}},61408:(e,t,a)=>{a.d(t,{A:()=>k});var n=a(89379),r=a(14126),i=a(34535),o=a(59135),s=a(26240),l=a(96446),d=a(71806),c=a(84882),u=a(28076),p=a(10039),g=a(73460),h=a(67024),x=a(72949),m=a(65043),A=a(71094),b=a(6905),y=a(42438),v=a(70579);const f=e=>{let{message:t}=e;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(l.A,{sx:{width:"100%",color:"text.disabled"},children:(0,v.jsx)("p",{className:"font13",style:{fontWeight:500,color:"text.disabled"},children:t})})})};var j=a(32513),C=a(55935);const S=(0,i.Ay)(o.A)(e=>{let{theme:t}=e;return{"& .MuiPaginationItem-root":{fontSize:12,fontWeight:500,color:t.palette.text.disabled},"& .MuiPaginationItem-page:hover":{borderRadius:20,backgroundColor:"transparent",color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main)},"& .MuiPaginationItem-page.Mui-selected":{borderRadius:20,backgroundColor:"transparent",color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main)},"& .MuiPaginationItem-previousNext":{margin:10,borderRadius:20,color:t.palette.primary.main,border:"1px solid ".concat(t.palette.primary.main),"&:hover":{backgroundColor:"transparent"}}}}),k=e=>{const{data:t,rowClick:a,showFooter:i,columnShape:o,hidePagination:k=!1,dataCount:B,pageInitialState:w,setPageIndex:M,pageIndex:W,loading:z}=e,H=(0,s.A)(),T=(0,m.useMemo)(()=>t,[t]),P=(0,m.useMemo)(()=>o,[o]),I=(0,m.useMemo)(()=>w,[w]),{getTableProps:R,getTableBodyProps:D,headerGroups:N,prepareRow:E,page:L,state:{pageSize:V},setPageSize:_}=(0,A.useTable)({columns:P,data:T,initialState:I},A.useSortBy,A.useExpanded,A.usePagination,A.useRowSelect);return(0,m.useEffect)(()=>{_(w.pageSize)},[w,_]),(0,v.jsxs)(l.A,{children:[(0,v.jsx)("div",{className:"table-responsive whiteBg",style:{borderRadius:10,border:"1px solid #eee"},children:(0,v.jsxs)(d.A,(0,n.A)((0,n.A)({},R()),{},{sx:{borderSpacing:"0 0.2rem",borderCollapse:"separate"},children:[(0,v.jsx)(c.A,{children:N.map(e=>(0,v.jsxs)(u.A,(0,n.A)((0,n.A)({},e.getHeaderGroupProps()),{},{children:[(0,v.jsx)(p.A,{sx:{paddingY:1,fontSize:13,width:10},children:"#"}),e.headers.map(e=>(0,v.jsx)(p.A,(0,n.A)((0,n.A)({},e.getHeaderProps(e.getSortByToggleProps())),{},{sx:{paddingY:0,fontSize:13,fontWeight:600,color:"text.black",width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,"&:last-child":{textAlign:"center"}},children:e.render("Header")})))]})))}),(0,v.jsx)(g.A,(0,n.A)((0,n.A)({},D()),{},{children:z?(0,v.jsx)(u.A,{children:(0,v.jsx)(p.A,{colSpan:P.length+1,sx:{textAlign:"left"},children:(0,v.jsx)(j.a,{})})}):L.length>0?L.map((e,t)=>{var r;return E(e),(0,v.jsxs)(u.A,(0,n.A)((0,n.A)({},e.getRowProps()),{},{onClick:a&&a(e.original),sx:{backgroundColor:null!==(r=e.original)&&void 0!==r&&r.has_error?"pink":1&t?"background.paper":C.j3,borderTop:"1.5px solid ".concat(C.j3),cursor:a?"pointer":"unset","& td:first-of-type":{},"& td:last-of-type":{textAlign:"center"},"&:last-of-type .MuiTableCell-root":{borderBottom:"dark"===H.palette.mode?"1px solid ".concat(H.palette.divider," !important"):"1px solid ".concat(H.palette.text.secondary," !important")},borderSpacing:5},children:[(0,v.jsx)(p.A,{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:100*((W||1)-1)+t+1}),e.cells.map(e=>(0,v.jsx)(p.A,(0,n.A)((0,n.A)({},e.getCellProps()),{},{sx:{fontSize:12,fontWeight:500,paddingY:1.2,color:"text.black","&:last-of-type div.css-o3rlxk":{display:"flex",justifyContent:"center"}},children:null===e||void 0===e?void 0:e.render("Cell")})))]}))}):(0,v.jsx)(u.A,{sx:{borderBottomWidth:0,borderColor:"white"},children:(0,v.jsx)(p.A,{colSpan:P.length+1,sx:{textAlign:"center"},children:(0,v.jsx)(f,{message:"No Data Available"})})})}))]}))}),!k&&(0,v.jsx)(h.A,{alignItems:"flex-end",marginY:1,children:(0,v.jsx)(S,{count:Math.ceil(B/V),shape:"rounded",page:W,onChange:(e,t)=>{M(t)}})}),i&&(0,v.jsxs)(b.A,{alignItems:"center",justifyContent:"space-between",children:[(0,v.jsx)(y.H5,{color:"text.disabled",children:"Showing 1-12 of 24 result"}),(0,v.jsxs)(x.A,{disableRipple:!0,sx:{fontSize:14,fontWeight:600},children:["See All",(0,v.jsx)(r.A,{sx:{marginLeft:.5}})]})]})]})}},63471:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(40039)),i=a(70579);t.A=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},64093:(e,t,a)=>{a.d(t,{A:()=>d});var n=a(89379),r=a(62559),i=a(34535),o=a(49250),s=a(70579);const l=(0,i.Ay)(r.Ay)(e=>{let{theme:t}=e;return{height:35,fontSize:13,width:"100%",maxWidth:270,fontWeight:500,padding:"0 1rem",borderRadius:"8px",border:"1px solid ",borderColor:"light"===t.palette.mode?t.palette.secondary[300]:t.palette.divider,color:t.palette.text.primary,backgroundColor:t.palette.background.paper,[t.breakpoints.down(500)]:{maxWidth:"100%"}}}),d=e=>(0,s.jsx)(l,(0,n.A)((0,n.A)({},e),{},{sx:(0,n.A)({justifyContent:"initial"},e.sx),startAdornment:(0,s.jsx)(o.A,{sx:{fontSize:13,marginRight:1,color:"#bbb"}})}))},74523:(e,t,a)=>{a.d(t,{A:()=>y});a(65043);var n=a(8302),r=a(34535),i=a(90035),o=a(4219),s=a(35316),l=a(29347),d=a(17392),c=a(74802),u=a(8433),p=a(42438),g=a(96446),h=a(10611),x=a(70579);const m=(0,r.Ay)(i.A)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}),A=e=>{const{title:t,onClose:a,id:n}=e;return(0,x.jsxs)(o.A,{sx:{m:0,p:2},id:n,children:[(0,x.jsx)(p.L9,{sx:{fontSize:"1.2rem",fontWeight:"bold",padding:10,paddingLeft:0},children:t}),a?(0,x.jsx)(d.A,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,x.jsx)(c.A,{})}):null]})},b={loadingModalContentBackground:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#fff",opacity:.6,zIndex:1e3,pointerEvents:"none"}},y=e=>{let{children:t,onClose:a,title:r,maxWidth:i,minWidth:o,ActionButtons:d,selectedModalId:c,open:p}=e;const{showModal:y,loadingModalContent:v,modalId:f}=(0,u.k3)();if(!y&&!p)return null;if(void 0!==f&&f!==c)return null;return(0,x.jsx)(g.A,{children:(0,x.jsxs)(m,{onClose:e=>{a()},"aria-labelledby":"customized-dialog-title",open:void 0!==p?p:y,maxWidth:i,sx:{"& .MuiPaper-root":{minWidth:o||0}},style:{borderRadius:"10px"},children:[v&&(0,x.jsx)(g.A,{sx:{width:"100%",zIndex:1200},children:(0,x.jsx)(h.A,{})}),(0,x.jsx)(g.A,{sx:v?b.loadingModalContentBackground:{}}),(0,x.jsx)(A,{id:"customized-dialog-title",title:r,onClose:a}),(0,x.jsx)(s.A,{dividers:!0,children:t}),(0,x.jsx)(l.A,{children:d?(0,x.jsx)(d,{}):(0,x.jsx)(n.A,{autoFocus:!0,onClick:a,children:"Cancel"})})]})})}},74802:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(40039)),i=a(70579);t.A=(0,r.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},76415:(e,t,a)=>{a.d(t,{b:()=>r});var n=a(56629);const r={getHubs:async e=>n.A.get("hubs/",{params:e}).then(e=>e.data),getHubDetails:async e=>n.A.get("hubs/".concat(e,"/")).then(e=>e.data),assignHubAdmin:async(e,t)=>n.A.post("hubs/".concat(e,"/assign-admin/"),t).then(e=>e.data),unassignHubAdmin:async(e,t)=>n.A.post("hubs/".concat(e,"/unassign-admin/"),t).then(e=>e.data),async createHubs(e){const t=new FormData;for(const a in e)t.append(a,e[a]);return n.A.post("hubs/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},updateHubs:async(e,t)=>(console.log(e),n.A.patch("hubs/".concat(t,"/"),e).then(e=>e.data)),deleteHubs:async e=>(console.log(e),n.A.delete("hubs/".concat(e,"/")).then(e=>e.data)),searchHubs:async e=>n.A.get("supported-Hubs/",{params:{query:e}}).then(e=>e.data)}},95540:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(40039)),i=a(70579);t.A=(0,r.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},96581:(e,t,a)=>{a.d(t,{N:()=>r});var n=a(56629);const r={getBudgets:async e=>n.A.get("accounting/budgets/",{params:e}).then(e=>e.data),getBudgetDetails:async e=>n.A.get("accounting/budgets/".concat(e,"/")).then(e=>e.data),createBudget:async e=>n.A.post("accounting/budgets/",e).then(e=>e.data),updateBudget:async(e,t)=>n.A.patch("accounting/budgets/".concat(t,"/"),e).then(e=>e.data),deleteBudget:async e=>n.A.delete("accounting/budgets/".concat(e,"/")).then(e=>e.data),getPerformance:async e=>n.A.get("accounting/budgets/performance/",{params:e}).then(e=>e.data)}},98082:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(40039)),i=a(70579);t.A=(0,r.default)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")}}]);
//# sourceMappingURL=2575.c6feb3fd.chunk.js.map