"use strict";(self.webpackChunkgrain_voucher_system=self.webpackChunkgrain_voucher_system||[]).push([[8046],{5243:(e,t,r)=>{r.d(t,{G:()=>n});var s=r(56629);const n={getVouchers:async e=>s.A.get("vouchers/vouchers/",{params:e}).then((e=>e.data)),getMyVouchers:async e=>s.A.get("vouchers/vouchers/my_vouchers/",{params:e}).then((e=>e.data)),getVouchersForPurchase:async e=>s.A.get("vouchers/vouchers/available_for_purchase/",{params:e}).then((e=>e.data)),getVoucherDetails:async e=>s.A.get("vouchers/vouchers/".concat(e,"/")).then((e=>e.data)),createVoucher:async e=>(console.log("Creating voucher:",e),s.A.post("vouchers/vouchers/",e).then((e=>e.data))),updateVoucher:async(e,t)=>(console.log("Updating voucher:",e),s.A.patch("vouchers/vouchers/".concat(t,"/"),e).then((e=>e.data))),deleteVoucher:async e=>(console.log("Deleting voucher:",e),s.A.delete("vouchers/vouchers/".concat(e,"/")).then((e=>e.data))),getRedemptions:async e=>s.A.get("vouchers/redemptions/",{params:e}).then((e=>e.data)),createRedemption:async e=>(console.log("Creating redemption:",e),s.A.post("vouchers/redemptions/",e).then((e=>e.data))),getRedemptionDetails:async e=>s.A.get("vouchers/redemptions/".concat(e,"/")).then((e=>e.data)),updateRedemption:async(e,t)=>s.A.patch("vouchers/redemptions/".concat(t,"/"),e).then((e=>e.data)),approveRedemption:async e=>s.A.post("vouchers/redemptions/".concat(e,"/approve/")).then((e=>e.data)),payRedemption:async e=>s.A.post("vouchers/redemptions/".concat(e,"/pay/")).then((e=>e.data)),deleteRedemption:async e=>s.A.delete("vouchers/redemptions/".concat(e,"/")).then((e=>e.data))}},13194:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(65043),n=r(95926);const o=e=>{const{title:t,setTitle:r}=(0,s.useContext)(n.C);return(0,s.useEffect)((()=>r(e)),[e,r]),t}},46055:(e,t,r)=>{r.d(t,{pU:()=>s});const s=e=>{if(!e)return"N/A";const t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";const r=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear();return"".concat(r,"/").concat(s,"/").concat(n)}},98046:(e,t,r)=>{r.r(t),r.d(t,{default:()=>se});var s=r(89379),n=r(65043),o=r(73216),i=r(96446),a=r(81637),l=r(85865),c=r(68903),d=r(12110),x=r(67784),h=r(67254),m=r(40794),p=r(79484),u=r(26240),A=r(43845),y=r(26494),j=r(81045),b=r(67024),g=r(8302),f=r(98440),v=r(59893),_=r(35953),W=r(91082),S=r(19758),w=r(3632),C=r(42796),z=r(46055),F=r(70579);const k=e=>{let{Voucher:t,onViewDetails:r,onTrade:s}=e;const n=(0,u.A)().palette.primary.main;return(0,F.jsxs)(d.A,{sx:{height:"100%",position:"relative",background:"#fff",border:"2px solid ".concat(n),borderRadius:3,overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-6px)",boxShadow:"0 8px 24px ".concat(n,"40")},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:n}},children:[(0,F.jsx)(i.A,{sx:{position:"absolute",top:16,right:16,zIndex:2},children:(0,F.jsx)(A.A,{label:t.status.toUpperCase(),color:(e=>{switch(e){case"issued":return"success";case"traded":return"warning";case"redeemed":return"info";default:return"default"}})(t.status),size:"small",icon:(0,F.jsx)(f.A,{}),sx:{fontWeight:"bold","& .MuiChip-icon":{color:"inherit"}}})}),(0,F.jsxs)(y.A,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column"},children:[(0,F.jsxs)(i.A,{sx:{mb:2},children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:700,mb:1,color:n},children:[t.deposit.grain_type_details.name," Voucher"]}),(0,F.jsxs)(l.A,{variant:"body2",sx:{fontFamily:"monospace",color:n,fontWeight:600},children:["ID: ",t.id.substring(0,8),"..."]})]}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,F.jsx)(j.A,{sx:{bgcolor:n,mr:2,width:40,height:40},children:(0,F.jsx)(v.A,{})}),(0,F.jsxs)(i.A,{children:[(0,F.jsxs)(l.A,{variant:"subtitle2",sx:{fontWeight:600,color:"text.primary"},children:[t.deposit.farmer.first_name," ",t.deposit.farmer.last_name]}),(0,F.jsx)(l.A,{variant:"caption",sx:{color:"text.primary"},children:t.deposit.farmer.phone_number})]})]}),(0,F.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mb:2},children:[(0,F.jsx)(c.Ay,{item:!0,xs:6,children:(0,F.jsxs)(i.A,{sx:{textAlign:"center",p:1,bgcolor:"grey.100",borderRadius:2,border:"1px solid ".concat(n,"40")},children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{color:n,fontWeight:700},children:[parseFloat(t.deposit.quantity_kg).toFixed(0),"kg"]}),(0,F.jsx)(l.A,{variant:"caption",sx:{color:"text.primary"},children:"Quantity"})]})}),(0,F.jsx)(c.Ay,{item:!0,xs:6,children:(0,F.jsxs)(i.A,{sx:{textAlign:"center",p:1,bgcolor:"grey.100",borderRadius:2,border:"1px solid ".concat(n,"40")},children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{color:"success.dark",fontWeight:700},children:["UGX ",parseFloat(t.current_value).toLocaleString()]}),(0,F.jsx)(l.A,{variant:"caption",sx:{color:"text.primary"},children:"Value"})]})})]}),(0,F.jsxs)(i.A,{sx:{mb:2,p:2,bgcolor:"grey.100",borderRadius:2,border:"1px solid ".concat(n,"30")},children:[(0,F.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"text.primary"},children:t.deposit.quality_grade_details.name}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(_.A,{sx:{fontSize:16,color:n}}),(0,F.jsxs)(l.A,{variant:"body2",sx:{color:"text.primary"},children:["Moisture: ",t.deposit.moisture_level,"%"]})]})]}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,F.jsx)(W.A,{sx:{fontSize:16,color:n,mr:1}}),(0,F.jsxs)(l.A,{variant:"body2",sx:{fontSize:"0.875rem",color:"text.primary",fontWeight:500},children:[t.deposit.hub.name," - ",t.deposit.hub.location]})]}),(0,F.jsx)(i.A,{sx:{mb:3},children:(0,F.jsxs)(l.A,{variant:"body2",sx:{color:n,fontWeight:600},children:["Issued: ",(0,z.pU)(t.issue_date)]})}),(0,F.jsxs)(i.A,{sx:{textAlign:"center",mb:3,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,F.jsx)(i.A,{sx:{display:"inline-block",p:2,bgcolor:"white",borderRadius:2,border:"2px solid",borderColor:n,mx:"auto"},children:(0,F.jsx)(S.A,{sx:{fontSize:80,color:n}})}),(0,F.jsx)(l.A,{variant:"caption",sx:{mt:1,color:"text.primary"},children:"Scan to verify"})]}),(0,F.jsxs)(b.A,{direction:"row",spacing:1,children:[(0,F.jsx)(g.A,{variant:"outlined",size:"small",onClick:()=>r(t),sx:{flex:1,borderColor:n,color:n,fontWeight:600},startIcon:(0,F.jsx)(w.A,{}),children:"Details"}),(0,F.jsx)(g.A,{variant:"contained",size:"small",onClick:()=>s(t),sx:{flex:1,bgcolor:n,"&:hover":{bgcolor:n+"CC"},color:"#fff",fontWeight:600},startIcon:(0,F.jsx)(C.A,{}),children:"Trade"})]})]})]})};var R=r(90035),V=r(4219),I=r(35316),D=r(63336),P=r(29347),T=r(71806),q=r(73460),M=r(28076),G=r(10039),N=r(84770),U=r(69974),E=r(47968),L=r(27012),H=r(23768);const O=e=>{let{voucher:t,open:r,onClose:s,onRedeem:o}=e;const a=(0,u.A)(),d=(0,n.useRef)(null);if(!t)return null;const x=e=>new Date(e).toLocaleString("en-UG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=e=>new Date(e).toLocaleDateString("en-UG",{year:"numeric",month:"short",day:"numeric"}),m=e=>"UGX ".concat(parseFloat(e.toString()).toLocaleString()),p=e=>{switch(e){case"issued":return"success";case"traded":return"warning";case"redeemed":return"info";default:return"default"}};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(R.A,{open:r,onClose:s,maxWidth:"md",fullWidth:!0,children:[(0,F.jsx)(V.A,{sx:{pb:1},children:(0,F.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsx)(l.A,{variant:"h5",sx:{fontWeight:700,color:a.palette.primary.main},children:"Voucher Details"}),(0,F.jsx)(A.A,{label:t.status.toUpperCase(),color:p(t.status),icon:(0,F.jsx)(f.A,{})})]})}),(0,F.jsx)(I.A,{children:(0,F.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,F.jsxs)(c.Ay,{item:!0,xs:12,md:8,children:[(0,F.jsxs)(D.A,{sx:{p:3,mb:3},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:a.palette.primary.main},children:"Voucher Information"}),(0,F.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"ID"}),(0,F.jsx)(l.A,{variant:"body1",sx:{fontFamily:"monospace",color:"text.primary"},children:t.id})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Issue Date"}),(0,F.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:x(t.issue_date)})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Entry Price"}),(0,F.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:m(t.entry_price)})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Current Value"}),(0,F.jsx)(l.A,{variant:"h6",sx:{fontWeight:700,color:"success.main"},children:m(t.current_value)})]})]})]}),(0,F.jsxs)(D.A,{sx:{p:3,mb:3},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:a.palette.primary.main},children:"Grain Details"}),(0,F.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Grain Type"}),(0,F.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:t.deposit.grain_type_details.name})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Quality Grade"}),(0,F.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:t.deposit.quality_grade_details.name})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Quantity"}),(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:[parseFloat(t.deposit.quantity_kg).toFixed(2)," kg"]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Moisture Level"}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(_.A,{sx:{fontSize:16,color:a.palette.primary.main}}),(0,F.jsxs)(l.A,{variant:"body1",sx:{color:"text.primary"},children:[t.deposit.moisture_level,"%"]})]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Quality Range"}),(0,F.jsxs)(l.A,{variant:"body2",sx:{color:"text.primary"},children:[t.deposit.quality_grade_details.min_moisture,"% -"," ",t.deposit.quality_grade_details.max_moisture,"% moisture"]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Notes"}),(0,F.jsx)(l.A,{variant:"body1",sx:{color:"text.primary"},children:t.deposit.notes||"No additional notes"})]})]})]}),(0,F.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,F.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(D.A,{sx:{p:3},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:a.palette.primary.main},children:"Farmer Details"}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,F.jsx)(j.A,{sx:{mr:2,bgcolor:a.palette.primary.main},children:(0,F.jsx)(v.A,{})}),(0,F.jsxs)(i.A,{children:[(0,F.jsxs)(l.A,{variant:"subtitle1",sx:{fontWeight:600,color:"text.primary"},children:[t.deposit.farmer.first_name," ",t.deposit.farmer.last_name]}),(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.primary"},children:t.deposit.farmer.phone_number}),(0,F.jsxs)(l.A,{variant:"body2",sx:{color:"text.primary"},children:["Role: ",t.deposit.farmer.role]})]})]})]})}),(0,F.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(D.A,{sx:{p:3},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:a.palette.primary.main},children:"Storage Hub"}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,F.jsx)(N.A,{sx:{mr:1,color:a.palette.primary.main}}),(0,F.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:600,color:"text.primary"},children:t.deposit.hub.name})]}),(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,F.jsx)(W.A,{sx:{mr:1,color:a.palette.primary.main}}),(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.primary"},children:t.deposit.hub.location})]}),t.deposit.hub.hub_admin&&(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,F.jsx)(U.A,{sx:{mr:1,color:a.palette.primary.main}}),(0,F.jsxs)(l.A,{variant:"body2",sx:{color:"text.primary"},children:[t.deposit.hub.hub_admin.first_name," ",t.deposit.hub.hub_admin.last_name," -"," ",t.deposit.hub.hub_admin.phone_number]})]})]})})]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:12,md:4,children:[(0,F.jsxs)(D.A,{sx:{p:3,textAlign:"center",height:"fit-content"},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:a.palette.primary.main},children:"Verification QR Code"}),(0,F.jsx)(i.A,{sx:{display:"inline-block",p:2,bgcolor:"white",borderRadius:2,border:"2px solid ".concat(a.palette.primary.main)},children:(0,F.jsx)(S.A,{sx:{fontSize:120,color:a.palette.primary.main}})}),(0,F.jsx)(l.A,{variant:"body2",sx:{mt:1,color:"text.primary"},children:"Scan to verify authenticity"}),(0,F.jsxs)(l.A,{variant:"caption",sx:{display:"block",mt:1,fontFamily:"monospace",color:"text.primary"},children:["ID: ",t.id.substring(0,8),"..."]})]}),(0,F.jsxs)(D.A,{sx:{p:3,mt:2,textAlign:"center"},children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",fontWeight:600},children:"Deposit Date"}),(0,F.jsx)(l.A,{variant:"body1",sx:{fontWeight:600,color:"text.primary"},children:x(t.deposit.deposit_date)})]}),(0,F.jsxs)(D.A,{sx:{p:3,mt:2,textAlign:"center"},children:[(0,F.jsx)(l.A,{variant:"body2",sx:{mb:1,color:"text.secondary",fontWeight:600},children:"Validation Status"}),(0,F.jsx)(A.A,{label:t.deposit.validated?"VALIDATED":"PENDING",color:t.deposit.validated?"success":"warning",icon:(0,F.jsx)(f.A,{})})]})]})]})}),(0,F.jsxs)(P.A,{sx:{p:3,gap:1},children:[(0,F.jsx)(g.A,{onClick:s,variant:"outlined",color:"primary",children:"Close"}),(0,F.jsx)(g.A,{onClick:async()=>{try{H.oR.loading("Generating voucher PDF...");const e=await new Promise(((e,t)=>{if(window.html2pdf)return void e(window.html2pdf);const r=document.createElement("script");r.src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",r.onload=()=>e(window.html2pdf),r.onerror=()=>t(new Error("Failed to load PDF library")),document.head.appendChild(r)})),r=d.current,s={margin:10,filename:"Voucher-".concat(t.id.substring(0,8),".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await e().set(s).from(r).save(),H.oR.dismiss(),H.oR.success("Voucher downloaded successfully")}catch(e){console.error("Error generating PDF:",e),H.oR.dismiss(),H.oR.error("Failed to generate PDF")}},variant:"outlined",color:"primary",startIcon:(0,F.jsx)(E.A,{}),children:"Download PDF"}),(0,F.jsx)(g.A,{onClick:()=>o(t),variant:"contained",color:"primary",startIcon:(0,F.jsx)(L.A,{}),disabled:"redeemed"===t.status,children:"redeemed"===t.status?"Already Redeemed":"Redeem Voucher"})]})]}),(0,F.jsx)(i.A,{sx:{position:"absolute",left:"-9999px",top:0},children:(0,F.jsxs)(i.A,{ref:d,sx:{width:"190mm",bgcolor:"white",p:0},children:[(0,F.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,F.jsx)(i.A,{sx:{bgcolor:"#76c045",px:2,py:1,borderRadius:1},children:(0,F.jsx)(l.A,{sx:{color:"white",fontWeight:"bold",fontSize:"1.5rem"},children:"BENNU"})}),(0,F.jsxs)(i.A,{sx:{textAlign:"right"},children:[(0,F.jsx)(l.A,{sx:{fontWeight:"bold",fontSize:"1.5rem",mb:.5},children:"GRAIN VOUCHER"}),(0,F.jsx)(A.A,{label:t.status.toUpperCase(),size:"small",sx:{bgcolor:"success"===p(t.status)?"#4caf50":"#ff9800",color:"white",fontWeight:"bold",fontSize:"0.7rem"}})]})]}),(0,F.jsxs)(i.A,{sx:{bgcolor:"#e8f5e9",border:"2px solid #4caf50",p:2,mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{sx:{fontSize:"0.75rem",color:"#666",mb:.5},children:"Voucher ID"}),(0,F.jsx)(l.A,{sx:{fontFamily:"monospace",fontSize:"0.8rem",fontWeight:600},children:t.id})]}),(0,F.jsxs)(i.A,{sx:{textAlign:"right"},children:[(0,F.jsx)(l.A,{sx:{fontSize:"0.75rem",color:"#2e7d32",mb:.5},children:"Current Value"}),(0,F.jsx)(l.A,{sx:{fontWeight:"bold",color:"#1b5e20",fontSize:"1.5rem"},children:m(t.current_value)})]})]}),(0,F.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mb:2},children:[(0,F.jsxs)(c.Ay,{item:!0,xs:7,children:[(0,F.jsxs)(i.A,{sx:{border:"1px solid #ddd",p:1.5,mb:2,height:"140px"},children:[(0,F.jsx)(l.A,{sx:{mb:1,fontWeight:"bold",color:"#76c045",fontSize:"0.9rem"},children:"Grain Information"}),(0,F.jsx)(T.A,{size:"small",children:(0,F.jsxs)(q.A,{children:[(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem",width:"35%"},children:"Type:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.grain_type_details.name})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Grade:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.quality_grade_details.name})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Quantity:"}),(0,F.jsxs)(G.A,{sx:{border:"none",py:.3,fontWeight:"bold",fontSize:"0.75rem"},children:[parseFloat(t.deposit.quantity_kg).toFixed(2)," kg"]})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Moisture:"}),(0,F.jsxs)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:[t.deposit.moisture_level,"%"]})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Deposit:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:h(t.deposit.deposit_date)})]})]})})]}),(0,F.jsxs)(i.A,{sx:{border:"1px solid #ddd",p:1.5,mb:2,height:"100px"},children:[(0,F.jsx)(l.A,{sx:{mb:1,fontWeight:"bold",color:"#76c045",fontSize:"0.9rem"},children:"Farmer Details"}),(0,F.jsx)(T.A,{size:"small",children:(0,F.jsxs)(q.A,{children:[(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem",width:"35%"},children:"Name:"}),(0,F.jsxs)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:[t.deposit.farmer.first_name," ",t.deposit.farmer.last_name]})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Phone:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.farmer.phone_number})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Role:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.farmer.role})]})]})})]}),(0,F.jsxs)(i.A,{sx:{border:"1px solid #ddd",p:1.5,height:"110px"},children:[(0,F.jsx)(l.A,{sx:{mb:1,fontWeight:"bold",color:"#76c045",fontSize:"0.9rem"},children:"Storage Hub"}),(0,F.jsx)(T.A,{size:"small",children:(0,F.jsxs)(q.A,{children:[(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem",width:"35%"},children:"Hub:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.hub.name})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Location:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.hub.location})]}),t.deposit.hub.hub_admin&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Admin:"}),(0,F.jsxs)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:[t.deposit.hub.hub_admin.first_name," ",t.deposit.hub.hub_admin.last_name]})]}),(0,F.jsxs)(M.A,{children:[(0,F.jsx)(G.A,{sx:{border:"none",py:.3,pl:0,fontWeight:600,fontSize:"0.75rem"},children:"Contact:"}),(0,F.jsx)(G.A,{sx:{border:"none",py:.3,fontSize:"0.75rem"},children:t.deposit.hub.hub_admin.phone_number})]})]})]})})]})]}),(0,F.jsx)(c.Ay,{item:!0,xs:5,children:(0,F.jsxs)(i.A,{sx:{border:"2px solid #76c045",p:2,textAlign:"center",bgcolor:"#f9f9f9",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{sx:{mb:1,fontWeight:"bold",fontSize:"0.9rem"},children:"Verification Code"}),(0,F.jsx)(i.A,{sx:{display:"inline-block",p:1.5,bgcolor:"white",border:"1px solid #ddd"},children:(0,F.jsx)(S.A,{sx:{fontSize:120,color:"#76c045"}})}),(0,F.jsx)(l.A,{sx:{mt:1,fontSize:"0.7rem",fontFamily:"monospace"},children:"Scan to verify authenticity"})]}),(0,F.jsxs)(i.A,{sx:{mt:2,pt:2,borderTop:"1px solid #ddd"},children:[(0,F.jsx)(l.A,{sx:{fontSize:"0.7rem",color:"#666",mb:.5},children:"Entry Price"}),(0,F.jsx)(l.A,{sx:{fontWeight:600,fontSize:"0.85rem"},children:m(t.entry_price)}),(0,F.jsx)(l.A,{sx:{fontSize:"0.7rem",color:"#666",mt:1,mb:.5},children:"Issue Date"}),(0,F.jsx)(l.A,{sx:{fontWeight:600,fontSize:"0.85rem"},children:h(t.issue_date)}),(0,F.jsx)(l.A,{sx:{fontSize:"0.7rem",color:"#666",mt:1,mb:.5},children:"Validated"}),(0,F.jsx)(l.A,{sx:{fontWeight:600,fontSize:"0.85rem"},children:t.deposit.validated?"\u2713 Yes":"\u2717 Pending"})]})]})})]}),t.deposit.notes&&(0,F.jsxs)(i.A,{sx:{border:"1px solid #ddd",p:1.5,mb:2,bgcolor:"#fafafa"},children:[(0,F.jsx)(l.A,{sx:{fontWeight:"bold",mb:.5,fontSize:"0.8rem"},children:"Additional Notes"}),(0,F.jsx)(l.A,{sx:{fontSize:"0.75rem"},children:t.deposit.notes})]}),(0,F.jsxs)(i.A,{sx:{mt:2,pt:1.5,borderTop:"2px solid #ddd",textAlign:"center"},children:[(0,F.jsx)(l.A,{sx:{fontSize:"0.7rem",color:"#666"},children:"This is an official BENNU grain voucher. For verification or inquiries, contact BENNU support."}),(0,F.jsxs)(l.A,{sx:{fontSize:"0.65rem",mt:.5,fontFamily:"monospace",color:"#999"},children:["Generated on ",h((new Date).toISOString())]})]})]})})]})};var Q=r(51787),B=r(53193),X=r(18356),Y=r(72221),$=r(32143);const Z=e=>{let{voucher:t,open:r,onClose:o,onTrade:a}=e;const[d,m]=(0,n.useState)({amount:"",payment_method:"mobile_money",notes:""}),[p,u]=(0,n.useState)({}),y=()=>{o(),u({})};return t?(0,F.jsxs)(R.A,{open:r,onClose:y,maxWidth:"sm",fullWidth:!0,children:[(0,F.jsx)(V.A,{sx:{pb:2},children:(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(C.A,{color:"primary"}),(0,F.jsx)(l.A,{variant:"h5",sx:{fontWeight:700},children:"Trade Voucher"})]})}),(0,F.jsxs)(I.A,{children:[(0,F.jsx)(i.A,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:2,border:e=>"1px solid ".concat(e.palette.primary.main,"40")},children:(0,F.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,F.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:700,mb:1},children:[t.deposit.grain_type_details.name," Voucher"]}),(0,F.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,F.jsx)(A.A,{label:"".concat(parseFloat(t.deposit.quantity_kg).toFixed(0),"kg"),size:"small",variant:"outlined",color:"primary"}),(0,F.jsx)(A.A,{label:t.deposit.quality_grade_details.name,size:"small",variant:"outlined"}),(0,F.jsx)(A.A,{label:t.status.toUpperCase(),size:"small",color:"success"})]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.primary",fontWeight:600},children:"Current Value"}),(0,F.jsxs)(l.A,{variant:"h6",sx:{color:"success.main",fontWeight:700},children:["UGX ",parseFloat(t.current_value).toLocaleString()]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",sx:{color:"text.primary",fontWeight:600},children:"Storage Hub"}),(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:t.deposit.hub.name})]})]})}),(0,F.jsx)(h.A,{severity:"info",sx:{mb:3},children:"Enter the amount you want to sell this voucher for. The buyer will pay you directly using your selected payment method."}),(0,F.jsxs)(i.A,{sx:{mt:2},children:[(0,F.jsx)(x.A,{fullWidth:!0,label:"Trade Amount (UGX)",type:"number",value:d.amount,onChange:e=>m((t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value}))),error:!!p.amount,helperText:p.amount||"Maximum: UGX ".concat(parseFloat(t.current_value).toLocaleString()),sx:{mb:2},InputProps:{startAdornment:(0,F.jsx)(Q.A,{position:"start",children:(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:700},children:"UGX"})})},inputProps:{min:0,max:parseFloat(t.current_value),step:1}}),(0,F.jsxs)(B.A,{fullWidth:!0,sx:{mb:2},error:!!p.payment_method,children:[(0,F.jsx)(X.A,{children:"Payment Method"}),(0,F.jsxs)(Y.A,{value:d.payment_method,onChange:e=>m((t=>(0,s.A)((0,s.A)({},t),{},{payment_method:e.target.value}))),label:"Payment Method",children:[(0,F.jsx)($.A,{value:"mobile_money",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Mobile Money"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"MTN, Airtel, etc."})]})}),(0,F.jsx)($.A,{value:"bank_transfer",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Bank Transfer"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Direct bank transfer"})]})}),(0,F.jsx)($.A,{value:"cash",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Cash"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Physical cash payment"})]})})]}),p.payment_method&&(0,F.jsx)(l.A,{variant:"caption",color:"error",sx:{mt:.5,ml:1.5},children:p.payment_method})]}),(0,F.jsx)(x.A,{fullWidth:!0,label:"Additional Notes (Optional)",multiline:!0,rows:3,value:d.notes,onChange:e=>m((t=>(0,s.A)((0,s.A)({},t),{},{notes:e.target.value}))),placeholder:"Add any specific requirements or details for the trade...",helperText:"Include any special instructions for the buyer"})]})]}),(0,F.jsxs)(P.A,{sx:{p:3,gap:1},children:[(0,F.jsx)(g.A,{onClick:y,variant:"outlined",children:"Cancel"}),(0,F.jsx)(g.A,{onClick:()=>{if(t&&(()=>{const e={};return d.amount?parseFloat(d.amount)<=0?e.amount="Amount must be greater than 0":t&&parseFloat(d.amount)>parseFloat(t.current_value)&&(e.amount="Amount cannot exceed voucher value"):e.amount="Trade amount is required",d.payment_method||(e.payment_method="Payment method is required"),u(e),0===Object.keys(e).length})()){const e={voucher:t.id,amount:d.amount,payment_method:d.payment_method,notes:d.notes};a(t,e),o(),m({amount:"",payment_method:"mobile_money",notes:""}),u({})}},variant:"contained",startIcon:(0,F.jsx)(C.A,{}),disabled:!d.amount||parseFloat(d.amount)<=0,children:"Create Trade Listing"})]})]}):null};var J=r(67957),K=r(34642);const ee=e=>{var t;let{voucher:r,open:o,onClose:a,onRedeem:d}=e;const[m,p]=(0,n.useState)({amount:"",payment_method:"mobile_money",notes:""}),[u,y]=(0,n.useState)({});n.useEffect((()=>{r&&o&&p((e=>(0,s.A)((0,s.A)({},e),{},{amount:r.current_value})))}),[r,o]);const j=()=>{a(),y({})};if(!r)return null;const b=parseFloat(m.amount)<parseFloat(r.current_value);return(0,F.jsxs)(R.A,{open:o,onClose:j,maxWidth:"sm",fullWidth:!0,children:[(0,F.jsx)(V.A,{sx:{pb:2},children:(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(L.A,{color:"success"}),(0,F.jsx)(l.A,{variant:"h5",sx:{fontWeight:600},children:"Redeem Voucher"})]})}),(0,F.jsxs)(I.A,{children:[(0,F.jsx)(i.A,{sx:{mb:3,p:2,bgcolor:"grey.50",borderRadius:2},children:(0,F.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,F.jsxs)(c.Ay,{item:!0,xs:12,children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:600,mb:1},children:[r.deposit.grain_type_details.name," Voucher"]}),(0,F.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,F.jsx)(A.A,{label:"".concat(parseFloat(r.deposit.quantity_kg).toFixed(0),"kg"),size:"small",variant:"outlined"}),(0,F.jsx)(A.A,{label:r.deposit.quality_grade_details.name,size:"small",variant:"outlined"}),(0,F.jsx)(A.A,{label:"Moisture: ".concat(r.deposit.moisture_level,"%"),size:"small",variant:"outlined"})]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Total Value"}),(0,F.jsxs)(l.A,{variant:"h6",color:"success.main",sx:{fontWeight:700},children:["$",parseFloat(r.current_value).toFixed(2)]})]}),(0,F.jsxs)(c.Ay,{item:!0,xs:6,children:[(0,F.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Storage Hub"}),(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:r.deposit.hub.name}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:r.deposit.hub.location})]})]})}),(0,F.jsx)(h.A,{severity:"info",sx:{mb:3},children:"Redemption will convert your grain voucher to cash. This action cannot be undone once approved."}),(0,F.jsxs)(i.A,{sx:{mt:2},children:[(0,F.jsx)(x.A,{fullWidth:!0,label:"Redemption Amount",type:"number",value:m.amount,onChange:e=>p((t=>(0,s.A)((0,s.A)({},t),{},{amount:e.target.value}))),error:!!u.amount,helperText:u.amount||"Maximum redemption value: $".concat(r.current_value),sx:{mb:2},InputProps:{startAdornment:(0,F.jsx)(Q.A,{position:"start",children:(0,F.jsx)(J.A,{})})},inputProps:{min:0,max:parseFloat(r.current_value),step:.01}}),b&&m.amount&&(0,F.jsx)(h.A,{severity:"warning",sx:{mb:2},children:(0,F.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,F.jsx)(K.A,{fontSize:"small"}),(0,F.jsxs)(l.A,{variant:"body2",children:["Partial redemption: $",(parseFloat(r.current_value)-parseFloat(m.amount)).toFixed(2)," will remain in your voucher"]})]})}),(0,F.jsxs)(B.A,{fullWidth:!0,sx:{mb:2},error:!!u.payment_method,children:[(0,F.jsx)(X.A,{children:"Payment Method"}),(0,F.jsxs)(Y.A,{value:m.payment_method,onChange:e=>p((t=>(0,s.A)((0,s.A)({},t),{},{payment_method:e.target.value}))),label:"Payment Method",children:[(0,F.jsx)($.A,{value:"mobile_money",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Mobile Money"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"MTN Mobile Money, Airtel Money, etc."})]})}),(0,F.jsx)($.A,{value:"bank_transfer",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Bank Transfer"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Direct transfer to your bank account"})]})}),(0,F.jsx)($.A,{value:"cash",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Cash Pickup"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Collect cash at the storage hub"})]})}),(0,F.jsx)($.A,{value:"check",children:(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:"Bank Check"}),(0,F.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Receive a bank check"})]})})]}),u.payment_method&&(0,F.jsx)(l.A,{variant:"caption",color:"error",sx:{mt:.5,ml:1.5},children:u.payment_method})]}),(0,F.jsx)(x.A,{fullWidth:!0,label:"Additional Notes (Optional)",multiline:!0,rows:3,value:m.notes,onChange:e=>p((t=>(0,s.A)((0,s.A)({},t),{},{notes:e.target.value}))),placeholder:"Add any special instructions for redemption...",helperText:"Include payment details like mobile money number or bank account information"})]}),(0,F.jsxs)(i.A,{sx:{mt:3,p:2,bgcolor:"info.main",color:"white",borderRadius:2},children:[(0,F.jsx)(l.A,{variant:"body2",sx:{fontWeight:600,mb:1},children:"Processing Information:"}),(0,F.jsxs)(l.A,{variant:"caption",children:["\u2022 Redemption requests are processed within 1-3 business days",(0,F.jsx)("br",{}),"\u2022 You will receive a confirmation once approved",(0,F.jsx)("br",{}),"\u2022 Payment will be sent via your selected method",(0,F.jsx)("br",{}),"\u2022 Contact the hub admin if you have questions: ",null===(t=r.deposit.hub.hub_admin)||void 0===t?void 0:t.phone_number]})]})]}),(0,F.jsxs)(P.A,{sx:{p:3,gap:1},children:[(0,F.jsx)(g.A,{onClick:j,variant:"outlined",children:"Cancel"}),(0,F.jsx)(g.A,{onClick:()=>{if(r&&(()=>{const e={};return m.amount?parseFloat(m.amount)<=0?e.amount="Amount must be greater than 0":r&&parseFloat(m.amount)>parseFloat(r.current_value)&&(e.amount="Amount cannot exceed voucher value"):e.amount="Redemption amount is required",m.payment_method||(e.payment_method="Payment method is required"),y(e),0===Object.keys(e).length})()){const e={voucher:r.id,amount:m.amount,payment_method:m.payment_method,notes:m.notes};d(r,e),a(),p({amount:"",payment_method:"mobile_money",notes:""}),y({})}},variant:"contained",color:"success",startIcon:(0,F.jsx)(L.A,{}),disabled:!m.amount||parseFloat(m.amount)<=0,children:"Submit Redemption Request"})]})]})};var te=r(5243);var re=r(13194);const se=()=>{(0,re.A)("My Vouchers");(0,o.Zp)();const[e,t]=(0,n.useState)([]),[r,u]=(0,n.useState)(!0),[A,y]=(0,n.useState)(""),[j,b]=(0,n.useState)(null),[g,f]=(0,n.useState)(""),[v,_]=(0,n.useState)(!1),[W,S]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1),[z,R]=(0,n.useState)({open:!1,message:"",severity:"success"});(0,n.useEffect)((()=>{V()}),[]);const V=async()=>{try{u(!0),f("");const e={page_size:50};console.log("Fetching vouchers with filters:",e);const r=await te.G.getMyVouchers(e);console.log("API Response:",r),r&&r.results?(console.log("Vouchers found:",r.results.length),t(r.results)):(console.warn("No results in response:",r),t([]))}catch(g){console.error("Error fetching vouchers:",g),f("Failed to load vouchers. Please try again."),t([])}finally{u(!1)}},I=e.filter((e=>{const t=A.toLowerCase();return e.deposit.grain_type_details.name.toLowerCase().includes(t)||e.deposit.farmer.first_name.toLowerCase().includes(t)||e.deposit.farmer.last_name.toLowerCase().includes(t)||e.deposit.hub.name.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)})),D={totalVouchers:e.length,totalValue:e.reduce(((e,t)=>e+parseFloat(t.current_value)),0),totalQuantity:e.reduce(((e,t)=>e+parseFloat(t.deposit.quantity_kg)),0),activeVouchers:e.filter((e=>"issued"===e.status)).length},P=e=>{b(e),_(!0)},T=e=>{b(e),S(!0)},q=()=>{R((e=>(0,s.A)((0,s.A)({},e),{},{open:!1})))};return r?(0,F.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:(0,F.jsx)(a.A,{size:60})}):(0,F.jsxs)(i.A,{sx:{p:3,bgcolor:"grey.50",minHeight:"100vh"},children:[(0,F.jsxs)(i.A,{sx:{mb:4},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{fontWeight:500,mb:2,color:"text.primary"},children:"My Grain Vouchers"}),(0,F.jsxs)(c.Ay,{container:!0,spacing:1,sx:{mb:3},children:[(0,F.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,F.jsxs)(d.A,{sx:{p:1,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{fontWeight:700},children:D.totalVouchers}),(0,F.jsx)(l.A,{variant:"caption",children:"Total Vouchers"})]})}),(0,F.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,F.jsxs)(d.A,{sx:{p:1,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:700},children:[D.totalQuantity.toFixed(0),"kg"]}),(0,F.jsx)(l.A,{variant:"caption",children:"Total Grain"})]})}),(0,F.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,F.jsxs)(d.A,{sx:{p:1,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,F.jsxs)(l.A,{variant:"h6",sx:{fontWeight:700},children:["UGX ",D.totalValue.toFixed(2)]}),(0,F.jsx)(l.A,{variant:"caption",children:"Total Value"})]})}),(0,F.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,F.jsxs)(d.A,{sx:{p:1,textAlign:"center",bgcolor:"primary.main",color:"white"},children:[(0,F.jsx)(l.A,{variant:"h6",sx:{fontWeight:700},children:D.activeVouchers}),(0,F.jsx)(l.A,{variant:"caption",children:"Active Vouchers"})]})})]}),(0,F.jsx)(x.A,{fullWidth:!0,placeholder:"Search vouchers...",value:A,onChange:e=>y(e.target.value),sx:{maxWidth:600,bgcolor:"white",borderRadius:2},InputProps:{startAdornment:(0,F.jsx)(p.A,{sx:{mr:1,color:"text.secondary"}})}})]}),g&&(0,F.jsx)(h.A,{severity:"error",sx:{mb:3},children:g}),(0,F.jsx)(c.Ay,{container:!0,spacing:3,children:I.map((e=>(0,F.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,F.jsx)(k,{Voucher:e,onViewDetails:P,onTrade:T})},e.id)))}),0===I.length&&!r&&(0,F.jsx)(i.A,{sx:{textAlign:"center",py:8},children:0===e.length?(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No vouchers found"}),(0,F.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"You don't have any grain vouchers yet. Create a deposit at a storage hub to get started."})]}):(0,F.jsxs)(i.A,{children:[(0,F.jsx)(l.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No vouchers match your search"}),(0,F.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Try adjusting your search terms or clear the search to see all vouchers."})]})}),(0,F.jsx)(O,{voucher:j,open:v,onClose:()=>_(!1),onRedeem:e=>{b(e),C(!0)}}),(0,F.jsx)(Z,{voucher:j,open:W,onClose:()=>S(!1),onTrade:async(e,t)=>{try{R({open:!0,message:"Trade listing created successfully! Buyers will be able to see your offer.",severity:"success"}),V()}catch(g){console.error("Error creating trade:",g),R({open:!0,message:"Failed to create trade listing. Please try again.",severity:"error"})}}}),(0,F.jsx)(ee,{voucher:j,open:w,onClose:()=>C(!1),onRedeem:async(e,t)=>{try{await te.G.createRedemption(t),R({open:!0,message:"Redemption request submitted successfully! You will be notified once it's processed.",severity:"success"}),V()}catch(g){console.error("Error creating redemption:",g),R({open:!0,message:"Failed to submit redemption request. Please try again.",severity:"error"})}}}),(0,F.jsx)(m.A,{open:z.open,autoHideDuration:6e3,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,F.jsx)(h.A,{onClose:q,severity:z.severity,sx:{width:"100%"},children:z.message})})]})}}}]);
//# sourceMappingURL=8046.f7167c93.chunk.js.map