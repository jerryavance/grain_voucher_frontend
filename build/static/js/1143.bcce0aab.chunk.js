"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[1143],{11143:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var o=t(65043),a=t(96446),r=t(85865),s=t(8302),i=t(63336),c=t(67024),d=t(39336),l=t(12110),v=t(26494),u=t(68903),h=t(73216),x=t(69120),A=t(37912),y=t(13194),m=t(90531),g=t(23722),p=t(23768),j=t(70579);const f=()=>{(0,y.A)("Invoice Aging Report");const e=(0,h.Zp)(),[n,t]=(0,o.useState)(null),[f,_]=(0,o.useState)(!0);(0,o.useEffect)(()=>{b()},[]);const b=async()=>{try{_(!0);const e=await m.p.getAging();t(e)}catch(e){p.oR.error("Failed to fetch aging report"),console.error(e)}finally{_(!1)}},C=()=>{e("/admin/accounting/invoices")},I=e=>"UGX ".concat(e.toFixed(2)),R=(e,n)=>0===n?0:e/n*100;if(f)return(0,j.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,j.jsx)(g.A,{size:40})});if(!n)return(0,j.jsxs)(a.A,{sx:{p:4},children:[(0,j.jsx)(r.A,{variant:"h6",color:"error",children:"Failed to load aging report"}),(0,j.jsx)(s.A,{variant:"contained",onClick:C,sx:{mt:2},children:"Back to Invoices"})]});const w=[{label:"Current (Not Yet Due)",amount:n.current,color:"#4caf50",description:"Invoices not yet overdue"},{label:"1-30 Days Overdue",amount:n.days_1_30,color:"#ff9800",description:"Invoices 1-30 days past due"},{label:"31-60 Days Overdue",amount:n.days_31_60,color:"#ff5722",description:"Invoices 31-60 days past due"},{label:"61-90 Days Overdue",amount:n.days_61_90,color:"#f44336",description:"Invoices 61-90 days past due"},{label:"Over 90 Days",amount:n.over_90_days,color:"#d32f2f",description:"Invoices more than 90 days past due"}];return(0,j.jsxs)(a.A,{sx:{p:{xs:2,sm:3,md:4},maxWidth:1200,mx:"auto"},children:[(0,j.jsx)(s.A,{variant:"outlined",startIcon:(0,j.jsx)(x.A,{}),onClick:C,sx:{mb:3},children:"Back to Invoices"}),(0,j.jsxs)(i.A,{sx:{p:3},children:[(0,j.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:1,sx:{mb:2},children:[(0,j.jsx)(A.A,{color:"primary",fontSize:"large"}),(0,j.jsx)(r.A,{variant:"h4",children:"Accounts Receivable Aging Report"})]}),(0,j.jsx)(r.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Analysis of outstanding invoices by age. This report helps identify collection priorities and potential bad debts."}),(0,j.jsx)(d.A,{sx:{mb:3}}),(0,j.jsx)(l.A,{sx:{mb:3,bgcolor:"primary.main",color:"primary.contrastText"},children:(0,j.jsxs)(v.A,{children:[(0,j.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Total Outstanding"}),(0,j.jsx)(r.A,{variant:"h3",fontWeight:"bold",children:I(n.total)})]})}),(0,j.jsx)(u.Ay,{container:!0,spacing:2,children:w.map((e,t)=>{const o=R(e.amount,n.total);return(0,j.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,j.jsx)(l.A,{sx:{height:"100%",borderLeft:4,borderColor:e.color,transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:3}},children:(0,j.jsxs)(v.A,{children:[(0,j.jsx)(r.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,sx:{minHeight:40},children:e.label}),(0,j.jsx)(r.A,{variant:"h5",fontWeight:"bold",sx:{mb:1},children:I(e.amount)}),(0,j.jsxs)(r.A,{variant:"body2",sx:{color:e.color,fontWeight:"medium",mb:1},children:[o.toFixed(1),"% of total"]}),(0,j.jsx)(r.A,{variant:"caption",color:"text.secondary",children:e.description})]})})},t)})}),(0,j.jsxs)(a.A,{sx:{mt:4,p:3,bgcolor:"background.default",borderRadius:1},children:[(0,j.jsx)(r.A,{variant:"h6",gutterBottom:!0,children:"Analysis Summary"}),(0,j.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,j.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(r.A,{variant:"body2",color:"text.secondary",children:(0,j.jsx)("strong",{children:"Current & On-Time:"})}),(0,j.jsxs)(r.A,{variant:"h6",color:"success.main",children:[I(n.current)," (",R(n.current,n.total).toFixed(1),"%)"]})]}),(0,j.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(r.A,{variant:"body2",color:"text.secondary",children:(0,j.jsx)("strong",{children:"Total Overdue:"})}),(0,j.jsxs)(r.A,{variant:"h6",color:"error.main",children:[I(n.days_1_30+n.days_31_60+n.days_61_90+n.over_90_days)," ","(",R(n.days_1_30+n.days_31_60+n.days_61_90+n.over_90_days,n.total).toFixed(1),"%)"]})]}),(0,j.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(r.A,{variant:"body2",color:"text.secondary",children:(0,j.jsx)("strong",{children:"Critically Overdue (60+ days):"})}),(0,j.jsxs)(r.A,{variant:"h6",color:"error.dark",children:[I(n.days_61_90+n.over_90_days)," (",R(n.days_61_90+n.over_90_days,n.total).toFixed(1),"%)"]})]}),(0,j.jsxs)(u.Ay,{item:!0,xs:12,sm:6,children:[(0,j.jsx)(r.A,{variant:"body2",color:"text.secondary",children:(0,j.jsx)("strong",{children:"High Risk (90+ days):"})}),(0,j.jsxs)(r.A,{variant:"h6",sx:{color:"#d32f2f"},children:[I(n.over_90_days)," (",R(n.over_90_days,n.total).toFixed(1),"%)"]})]})]})]}),n.over_90_days>0&&(0,j.jsxs)(a.A,{sx:{mt:3,p:2,bgcolor:"error.light",borderRadius:1},children:[(0,j.jsx)(r.A,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"\u26a0\ufe0f Action Required"}),(0,j.jsxs)(r.A,{variant:"body2",children:["You have ",I(n.over_90_days)," in invoices overdue by more than 90 days. Consider escalating collection efforts or reviewing write-off procedures."]})]})]})]})}},12110:(e,n,t)=>{t.d(n,{A:()=>m});var o=t(58168),a=t(98587),r=t(65043),s=t(58387),i=t(65049),c=t(34535),d=t(98206),l=t(63336),v=t(14987),u=t(60239);function h(e){return(0,u.Ay)("MuiCard",e)}(0,v.A)("MuiCard",["root"]);var x=t(70579);const A=["className","raised"],y=(0,c.Ay)(l.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({overflow:"hidden"})),m=r.forwardRef(function(e,n){const t=(0,d.b)({props:e,name:"MuiCard"}),{className:r,raised:c=!1}=t,l=(0,a.A)(t,A),v=(0,o.A)({},t,{raised:c}),u=(e=>{const{classes:n}=e;return(0,i.A)({root:["root"]},h,n)})(v);return(0,x.jsx)(y,(0,o.A)({className:(0,s.A)(u.root,r),elevation:c?8:void 0,ref:n,ownerState:v},l))})},13194:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(65043),a=t(95926);const r=e=>{const{title:n,setTitle:t}=(0,o.useContext)(a.C);return(0,o.useEffect)(()=>t(e),[e,t]),n}},23722:(e,n,t)=>{t.d(n,{A:()=>i});var o=t(89379),a=(t(65043),t(67024)),r=t(81637),s=t(70579);const i=e=>{let{size:n,color:t="primary",sx:i}=e;return(0,s.jsx)(a.A,{sx:(0,o.A)({color:"grey.500"},i),spacing:2,direction:"row",children:(0,s.jsx)(r.A,{size:n,color:t})})}},26494:(e,n,t)=>{t.d(n,{A:()=>y});var o=t(58168),a=t(98587),r=t(65043),s=t(58387),i=t(65049),c=t(34535),d=t(98206),l=t(14987),v=t(60239);function u(e){return(0,v.Ay)("MuiCardContent",e)}(0,l.A)("MuiCardContent",["root"]);var h=t(70579);const x=["className","component"],A=(0,c.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,n)=>n.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),y=r.forwardRef(function(e,n){const t=(0,d.b)({props:e,name:"MuiCardContent"}),{className:r,component:c="div"}=t,l=(0,a.A)(t,x),v=(0,o.A)({},t,{component:c}),y=(e=>{const{classes:n}=e;return(0,i.A)({root:["root"]},u,n)})(v);return(0,h.jsx)(A,(0,o.A)({as:c,className:(0,s.A)(y.root,r),ownerState:v,ref:n},l))})},69120:(e,n,t)=>{var o=t(24994);n.A=void 0;var a=o(t(40039)),r=t(70579);n.A=(0,a.default)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},90531:(e,n,t)=>{t.d(n,{p:()=>a});var o=t(56629);const a={getInvoices:async e=>o.A.get("accounting/invoices/",{params:e}).then(e=>e.data),getInvoiceDetails:async e=>o.A.get("accounting/invoices/".concat(e,"/")).then(e=>e.data),createInvoice:async e=>o.A.post("accounting/invoices/",e).then(e=>e.data),updateInvoice:async(e,n)=>o.A.patch("accounting/invoices/".concat(n,"/"),e).then(e=>e.data),deleteInvoice:async e=>o.A.delete("accounting/invoices/".concat(e,"/")).then(e=>e.data),createManualInvoice:async e=>o.A.post("accounting/invoices/create_manual_invoice/",e).then(e=>e.data),addGRNToInvoice:async(e,n)=>o.A.post("accounting/invoices/".concat(e,"/add_grn/"),{grn_id:n}).then(e=>e.data),removeGRNFromInvoice:async(e,n)=>o.A.delete("accounting/invoices/".concat(e,"/remove_grn/"),{params:{grn_id:n}}).then(e=>e.data),async getUninvoicedGRNs(e){const n=e?{account_id:e}:{};return o.A.get("accounting/invoices/uninvoiced_grns/",{params:n}).then(e=>e.data)},finalizeInvoice:async e=>o.A.post("accounting/invoices/".concat(e,"/finalize/")).then(e=>e.data),sendInvoice:async e=>o.A.post("accounting/invoices/".concat(e,"/send_invoice/")).then(e=>e.data),sendReminder:async e=>o.A.post("accounting/invoices/".concat(e,"/send_reminder/")).then(e=>e.data),cancelInvoice:async(e,n)=>o.A.post("accounting/invoices/".concat(e,"/cancel_invoice/"),{reason:n}).then(e=>e.data),getSummary:async()=>o.A.get("accounting/invoices/summary/").then(e=>e.data),getAging:async()=>o.A.get("accounting/invoices/aging/").then(e=>e.data),generateScheduledNow:async()=>o.A.post("accounting/invoices/generate_scheduled_now/").then(e=>e.data)}}}]);
//# sourceMappingURL=1143.bcce0aab.chunk.js.map