"use strict";(self.webpackChunkgrain_voucher_system=self.webpackChunkgrain_voucher_system||[]).push([[9317],{9038:(e,r,t)=>{t.d(r,{A:()=>y});var n=t(65043),s=t(8302),i=t(96446),a=t(63516),o=t(74523),l=t(23722),d=t(42438),c=t(80644),x=t(23768),h=t(25933),m=t(75992),u=t(45396),A=t(37938),j=t(29761),v=t(70579);const y=e=>{let{handleClose:r,callBack:t}=e;const y=(0,n.useRef)(null),[p,b]=(0,n.useState)(!1),[g,_]=(0,n.useState)(!0),[f,S]=(0,n.useState)([]),[I,w]=(0,n.useState)((0,u.fH)()),R=(0,a.Wx)({initialValues:(0,h.f6)(I),validationSchema:j.ly,validateOnChange:!1,validateOnMount:!1,validateOnBlur:!1,enableReinitialize:!0,onSubmit:e=>T(e)});(0,n.useEffect)((()=>{B()}),[]);const B=async()=>{_(!0);try{const e=await A.s.getInvestorAccounts({page:1,page_size:100});if(!e||!e.results)throw new Error("Invalid response from server");const r=e.results.map((e=>({label:"".concat(e.investor.first_name," ").concat(e.investor.last_name," (Phone: ").concat(e.investor.phone_number,")"),value:e.id})));S(r),w((0,u.fH)(r)),_(!1)}catch(e){console.error("Error fetching investor accounts:",e),x.oR.error("Failed to load investor accounts"),_(!1),r()}},T=async e=>{if(e.investor_account_id){b(!0);try{await A.s.createInvestorWithdrawal(e),x.oR.success("Withdrawal request created successfully"),R.resetForm(),t&&t(),r()}catch(s){var n;null!==(n=s.response)&&void 0!==n&&n.data&&R.setErrors(s.response.data),x.oR.error(s.message||"An error occurred")}finally{b(!1)}}else x.oR.error("Please select an investor account")},k=()=>{R.resetForm(),r()},C=()=>{R.handleSubmit()};return(0,v.jsx)(o.A,{title:"New Withdrawal Request",onClose:k,id:(0,m.A)(),ActionButtons:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.A,{onClick:k,disabled:p||g,children:"Close"}),(0,v.jsx)(s.A,{onClick:C,type:"button",variant:"contained",disabled:p||g,children:p?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{color:"inherit",size:20})," ",(0,v.jsx)(d.L9,{style:{marginLeft:"0.5rem"},color:"primary",children:"Loading..."})]}):"Request Withdrawal"})]}),children:g?(0,v.jsx)(i.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:(0,v.jsx)(l.A,{size:40})}):(0,v.jsx)("form",{ref:y,onSubmit:e=>{e.preventDefault(),T(R.values)},children:(0,v.jsx)(i.A,{sx:{width:"100%"},children:(0,v.jsx)(c.A,{others:{sx:{marginBottom:"0rem"}},formikInstance:R,formFields:I,validationSchema:j.ly})})})})}},9317:(e,r,t)=>{t.r(r),t.d(r,{default:()=>k});var n=t(89379),s=t(80045),i=t(96446),a=t(85865),o=t(8302),l=t(68903),d=t(12110),c=t(26494),x=t(14912),h=t(24056),m=t(65043),u=t(23768),A=t(13194),j=t(37938),v=t(23722),y=t(9038),p=t(8433),b=t(54050),g=t(85645),_=t(17961),f=t(17869),S=t(80379),I=t(70095),w=t(70579);const R=["children","value","index"];function B(e){const{children:r,value:t,index:a}=e,o=(0,s.A)(e,R);return(0,w.jsx)("div",(0,n.A)((0,n.A)({role:"tabpanel",hidden:t!==a,id:"dashboard-tabpanel-".concat(a),"aria-labelledby":"dashboard-tab-".concat(a)},o),{},{children:t===a&&(0,w.jsx)(i.A,{sx:{py:3},children:r})}))}const T=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],k=()=>{(0,A.A)("Investor Dashboard");const{showModal:e,setShowModal:r}=(0,p.k3)(),[t,n]=(0,m.useState)(0),[s,R]=(0,m.useState)(!1),[k,C]=(0,m.useState)(null),[q,F]=(0,m.useState)(null);(0,m.useEffect)((()=>{N()}),[]);const N=async()=>{R(!0);try{const[e,r]=await Promise.all([j.s.getInvestorDashboard(),j.s.getInvestorAccounts({page:1,page_size:1})]);C(e),r.results&&r.results.length>0&&F(r.results[0].id)}catch(t){var e,r;u.oR.error((null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.detail)||"Failed to load dashboard data")}finally{R(!1)}},E=e=>"UGX ".concat(parseFloat(e.toString()).toLocaleString());if(s)return(0,w.jsx)(i.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,w.jsx)(v.A,{size:60})});if(!k)return(0,w.jsx)(i.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,w.jsx)(a.A,{variant:"h6",children:"No dashboard data available"})});Object.entries(k.monthly_returns||{}).map((e=>{let[r,t]=e;return{month:r,return:t}}));const D=[{name:"0-3 days",value:k.receivables_aging["0-3_days"]},{name:"4-7 days",value:k.receivables_aging["4-7_days"]},{name:"8-14 days",value:k.receivables_aging["8-14_days"]},{name:"15-30 days",value:k.receivables_aging["15-30_days"]},{name:"Above 30 days",value:k.receivables_aging.above_30_days}].filter((e=>e.value>0));return(0,w.jsxs)(i.A,{pt:2,pb:4,px:3,children:[(0,w.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,w.jsx)(a.A,{variant:"h4",children:"Investor Dashboard"}),(0,w.jsx)(o.A,{variant:"contained",color:"primary",onClick:()=>r(!0),disabled:!q,children:"Request Withdrawal"})]}),(0,w.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Total Deposited"}),(0,w.jsx)(a.A,{variant:"h5",component:"div",children:E(k.total_deposited)})]})})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Available Balance"}),(0,w.jsx)(a.A,{variant:"h5",component:"div",color:"success.main",children:E(k.available_balance)})]})})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Total Utilized"}),(0,w.jsx)(a.A,{variant:"h5",component:"div",color:"warning.main",children:E(k.total_utilized)})]})})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{color:"textSecondary",gutterBottom:!0,variant:"body2",children:"Total Margin Earned"}),(0,w.jsx)(a.A,{variant:"h5",component:"div",color:"success.main",children:E(k.total_margin_earned)})]})})})]}),(0,w.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,w.jsxs)(x.A,{value:t,onChange:(e,r)=>{n(r)},"aria-label":"dashboard tabs",children:[(0,w.jsx)(h.A,{label:"Overview"}),(0,w.jsx)(h.A,{label:"Balance Sheet"}),(0,w.jsx)(h.A,{label:"Receivables Aging"}),(0,w.jsx)(h.A,{label:"Profit & Loss"}),(0,w.jsx)(h.A,{label:"Trade Summary"})]})}),(0,w.jsx)(B,{value:t,index:0,children:(0,w.jsx)(l.Ay,{container:!0,spacing:3,children:(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Financial Overview"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:E(k.total_deposited)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Deposited"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.available_balance)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Available Balance"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"warning.main",children:E(k.total_utilized)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Utilized"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.total_margin_earned)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Margin Earned"})]})})]})]})})})})}),(0,w.jsx)(B,{value:t,index:1,children:(0,w.jsx)(l.Ay,{container:!0,spacing:3,children:(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Balance Sheet"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:E(k.balance_sheet.cash_available)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Cash Available"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"warning.main",children:E(k.balance_sheet.funds_in_trades)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Funds in Trades"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"warning.main",children:E(k.balance_sheet.loans_outstanding)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Loans Outstanding"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.balance_sheet.total_assets)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Assets"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Earnings"}),(0,w.jsx)(a.A,{variant:"h6",children:E(k.balance_sheet.total_earnings)})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Net Earnings"}),(0,w.jsx)(a.A,{variant:"h6",color:"success.main",children:E(k.balance_sheet.net_earnings)})]})})]})]})})})})}),(0,w.jsx)(B,{value:t,index:2,children:(0,w.jsx)(l.Ay,{container:!0,spacing:3,children:(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Receivables Aging"}),D.length>0?(0,w.jsx)(b.u,{width:"100%",height:300,children:(0,w.jsxs)(g.r,{children:[(0,w.jsx)(_.F,{data:D,cx:"50%",cy:"50%",labelLine:!1,label:e=>{const r=Number(e.percent)||0;return"".concat(e.name,": ").concat((100*r).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:D.map(((e,r)=>(0,w.jsx)(f.f,{fill:T[r%T.length]},"cell-".concat(r))))}),(0,w.jsx)(S.m,{formatter:e=>E(e)}),(0,w.jsx)(I.s,{})]})}):(0,w.jsx)(i.A,{sx:{textAlign:"center",py:4},children:(0,w.jsx)(a.A,{variant:"body1",color:"textSecondary",children:"No receivables aging data available"})}),(0,w.jsx)(l.Ay,{container:!0,spacing:2,sx:{mt:2},children:(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Receivables"}),(0,w.jsx)(a.A,{variant:"h6",children:E(k.receivables_aging.total)})]})})})]})})})})}),(0,w.jsx)(B,{value:t,index:3,children:(0,w.jsx)(l.Ay,{container:!0,spacing:3,children:(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Profit & Loss"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:E(k.profit_and_loss.total_invested)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Invested"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.profit_and_loss.trade_profits)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Trade Profits"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.profit_and_loss.loan_interest)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Loan Interest"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:E(k.profit_and_loss.total_revenue)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Revenue"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Net Profit"}),(0,w.jsx)(a.A,{variant:"h6",color:"success.main",children:E(k.profit_and_loss.net_profit)})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Overall ROI"}),(0,w.jsx)(a.A,{variant:"h6",children:(P=k.profit_and_loss.overall_roi,"".concat(parseFloat(P.toString()).toFixed(2),"%"))})]})})]})]})})})})}),(0,w.jsx)(B,{value:t,index:4,children:(0,w.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Trade Summary"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:k.trade_summary.number_of_trades}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Number of Trades"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"info.main",children:k.trade_summary.active_trades}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Active Trades"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",children:E(k.trade_summary.total_value_invested)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Value Invested"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",children:E(k.trade_summary.average_investment)}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Average Investment"})]})})]})]})})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Financing Summary"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:4,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:k.financing_summary.total_financings}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Financings"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:4,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"info.main",children:k.financing_summary.active_financings}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Active"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:4,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"success.main",children:k.financing_summary.completed_financings}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Completed"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Allocated"}),(0,w.jsx)(a.A,{variant:"h6",children:E(k.financing_summary.total_allocated)})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Earnings from Financing"}),(0,w.jsx)(a.A,{variant:"h6",color:"success.main",children:E(k.financing_summary.total_earnings)})]})})]})]})})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,children:(0,w.jsx)(d.A,{children:(0,w.jsxs)(c.A,{children:[(0,w.jsx)(a.A,{variant:"h6",gutterBottom:!0,color:"primary",children:"Loan Portfolio Summary"}),(0,w.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"primary",children:k.loan_summary.total_loans}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Loans"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"info.main",children:k.loan_summary.active_loans}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Active Loans"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,textAlign:"center"},children:[(0,w.jsx)(a.A,{variant:"h4",color:"warning.main",children:k.loan_summary.overdue_loans}),(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Overdue Loans"})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",sx:{textAlign:"center"},children:"Interest Earned"}),(0,w.jsx)(a.A,{variant:"h5",color:"success.main",sx:{textAlign:"center"},children:E(k.loan_summary.total_interest_earned)})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Loaned Amount"}),(0,w.jsx)(a.A,{variant:"h6",children:E(k.loan_summary.total_loaned)})]})}),(0,w.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,w.jsxs)(i.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[(0,w.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Total Outstanding"}),(0,w.jsx)(a.A,{variant:"h6",color:"warning.main",children:E(k.loan_summary.total_outstanding)})]})})]})]})})})]})}),e&&q&&(0,w.jsx)(y.A,{accountId:q,callBack:N,handleClose:()=>r(!1)})]});var P}},13194:(e,r,t)=>{t.d(r,{A:()=>i});var n=t(65043),s=t(95926);const i=e=>{const{title:r,setTitle:t}=(0,n.useContext)(s.C);return(0,n.useEffect)((()=>t(e)),[e,t]),r}},23722:(e,r,t)=>{t.d(r,{A:()=>o});var n=t(89379),s=(t(65043),t(67024)),i=t(81637),a=t(70579);const o=e=>{let{size:r,color:t="primary",sx:o}=e;return(0,a.jsx)(s.A,{sx:(0,n.A)({color:"grey.500"},o),spacing:2,direction:"row",children:(0,a.jsx)(i.A,{size:r,color:t})})}},29761:(e,r,t)=>{t.d(r,{IY:()=>i,_n:()=>o,ly:()=>a,nG:()=>s});var n=t(73033);const s=n.Ik().shape({investor_id:n.Yj().required("Investor is required")}),i=n.Ik().shape({investor_account_id:n.Yj().required("Investor account is required"),amount:n.ai().positive("Amount must be positive").required("Amount is required"),notes:n.Yj()}),a=n.Ik().shape({investor_account_id:n.Yj().required("Investor account is required"),amount:n.ai().positive("Amount must be positive").required("Amount is required"),notes:n.Yj()}),o=n.Ik().shape({investor_account_id:n.Yj().required("Investor account is required"),profit_threshold:n.ai().min(0,"Profit threshold must be at least 0").max(100,"Profit threshold cannot exceed 100%").required("Profit threshold is required"),investor_share:n.ai().min(0,"Investor share must be at least 0").max(100,"Investor share cannot exceed 100%").required("Investor share is required"),bennu_share:n.ai().min(0,"BENNU share must be at least 0").max(100,"BENNU share cannot exceed 100%").required("BENNU share is required"),notes:n.Yj()}).test("shares-sum","Investor and BENNU shares must sum to 100%",(function(e){const{investor_share:r,bennu_share:t}=e;return"number"!==typeof r||"number"!==typeof t||r+t===100}))},37938:(e,r,t)=>{t.d(r,{s:()=>s});var n=t(56629);const s={getInvestorAccounts:async e=>n.A.get("investors/accounts/",{params:e}).then((e=>e.data)),createInvestorAccount:async e=>n.A.post("investors/accounts/",e).then((e=>e.data)),getInvestorAccountDetails:async e=>n.A.get("investors/accounts/".concat(e,"/")).then((e=>e.data)),updateInvestorAccount:async(e,r)=>n.A.patch("investors/accounts/".concat(r,"/"),e).then((e=>e.data)),deleteInvestorAccount:async e=>n.A.delete("investors/accounts/".concat(e,"/")).then((e=>e.data)),getInvestorDashboard:async()=>n.A.get("investors/accounts/dashboard/").then((e=>e.data)),getInvestorDeposits:async e=>n.A.get("investors/deposits/",{params:e}).then((e=>e.data)),createInvestorDeposit:async e=>n.A.post("investors/deposits/",e).then((e=>e.data)),getInvestorDepositDetails:async e=>n.A.get("investors/deposits/".concat(e,"/")).then((e=>e.data)),deleteInvestorDeposit:async e=>n.A.delete("investors/deposits/".concat(e,"/")).then((e=>e.data)),getInvestorWithdrawals:async e=>n.A.get("investors/withdrawals/",{params:e}).then((e=>e.data)),createInvestorWithdrawal:async e=>n.A.post("investors/withdrawals/",e).then((e=>e.data)),getInvestorWithdrawalDetails:async e=>n.A.get("investors/withdrawals/".concat(e,"/")).then((e=>e.data)),approveWithdrawal:async e=>n.A.post("investors/withdrawals/".concat(e,"/approve/")).then((e=>e.data)),rejectWithdrawal:async(e,r)=>n.A.post("investors/withdrawals/".concat(e,"/reject/"),{notes:r}).then((e=>e.data)),getProfitAgreements:async e=>n.A.get("investors/profit-agreements/",{params:e}).then((e=>e.data)),createProfitAgreement:async e=>n.A.post("investors/profit-agreements/",e).then((e=>e.data)),getProfitAgreementDetails:async e=>n.A.get("investors/profit-agreements/".concat(e,"/")).then((e=>e.data)),updateProfitAgreement:async(e,r)=>n.A.patch("investors/profit-agreements/".concat(r,"/"),e).then((e=>e.data)),deleteProfitAgreement:async e=>n.A.delete("investors/profit-agreements/".concat(e,"/")).then((e=>e.data))}},45396:(e,r,t)=>{t.d(r,{G5:()=>a,Gx:()=>s,Zd:()=>n,fH:()=>i});const n=function(){return[{name:"investor_id",initailValue:"",label:"Investor",type:"select",uiType:"select",options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0}]},s=function(){return[{name:"investor_account_id",initailValue:"",label:"Investor Account",type:"select",uiType:"select",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},{name:"amount",initailValue:"",label:"Deposit Amount (UGX)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0},{name:"notes",initailValue:"",label:"Notes",type:"text",uiType:"textarea",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},rows:3}]},i=function(){return[{name:"investor_account_id",initailValue:"",label:"Investor Account",type:"select",uiType:"select",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},{name:"amount",initailValue:"",label:"Withdrawal Amount (UGX)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0},{name:"notes",initailValue:"",label:"Notes",type:"text",uiType:"textarea",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},rows:3}]},a=function(){return[{name:"investor_account_id",initailValue:"",label:"Investor Account",type:"select",uiType:"select",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},required:!0,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},{name:"profit_threshold",initailValue:"2.00",label:"Profit Threshold (%)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!0},{name:"investor_share",initailValue:"75.00",label:"Investor Share (%)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!0},{name:"bennu_share",initailValue:"25.00",label:"BENNU Share (%)",type:"number",uiType:"number",uiBreakpoints:{xs:12,sm:12,md:6,lg:6,xl:6},required:!0},{name:"notes",initailValue:"",label:"Notes",type:"text",uiType:"textarea",uiBreakpoints:{xs:12,sm:12,md:12,lg:12,xl:12},rows:3}]}},74523:(e,r,t)=>{t.d(r,{A:()=>p});t(65043);var n=t(8302),s=t(34535),i=t(90035),a=t(4219),o=t(35316),l=t(29347),d=t(17392),c=t(74802),x=t(8433),h=t(42438),m=t(96446),u=t(10611),A=t(70579);const j=(0,s.Ay)(i.A)((e=>{let{theme:r}=e;return{"& .MuiDialogContent-root":{padding:r.spacing(2)},"& .MuiDialogActions-root":{padding:r.spacing(1)}}})),v=e=>{const{title:r,onClose:t,id:n}=e;return(0,A.jsxs)(a.A,{sx:{m:0,p:2},id:n,children:[(0,A.jsx)(h.L9,{sx:{fontSize:"1.2rem",fontWeight:"bold",padding:10,paddingLeft:0},children:r}),t?(0,A.jsx)(d.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,A.jsx)(c.A,{})}):null]})},y={loadingModalContentBackground:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#fff",opacity:.6,zIndex:1e3,pointerEvents:"none"}},p=e=>{let{children:r,onClose:t,title:s,maxWidth:i,minWidth:a,ActionButtons:d,selectedModalId:c,open:h}=e;const{showModal:p,loadingModalContent:b,modalId:g}=(0,x.k3)();if(!p&&!h)return null;if(void 0!==g&&g!==c)return null;return(0,A.jsx)(m.A,{children:(0,A.jsxs)(j,{onClose:e=>{t()},"aria-labelledby":"customized-dialog-title",open:void 0!==h?h:p,maxWidth:i,sx:{"& .MuiPaper-root":{minWidth:a||0}},style:{borderRadius:"10px"},children:[b&&(0,A.jsx)(m.A,{sx:{width:"100%",zIndex:1200},children:(0,A.jsx)(u.A,{})}),(0,A.jsx)(m.A,{sx:b?y.loadingModalContentBackground:{}}),(0,A.jsx)(v,{id:"customized-dialog-title",title:s,onClose:t}),(0,A.jsx)(o.A,{dividers:!0,children:r}),(0,A.jsx)(l.A,{children:d?(0,A.jsx)(d,{}):(0,A.jsx)(n.A,{autoFocus:!0,onClick:t,children:"Cancel"})})]})})}}}]);
//# sourceMappingURL=9317.65de22f5.chunk.js.map