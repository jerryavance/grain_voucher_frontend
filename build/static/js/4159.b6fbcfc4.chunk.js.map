{"version":3,"file":"static/js/4159.b6fbcfc4.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/PersonRemove.js","pages/Membership/HubMembershipColumnShape.tsx","pages/Membership/HubMembership.tsx","pages/Membership/HubMembership.service.ts"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4\"\n}), 'PersonRemove');","import React from \"react\";\nimport { CheckCircle, Cancel, PersonRemove, Visibility, Phone } from \"@mui/icons-material\";\nimport FlexBox from \"../../components/FlexBox\";\nimport { H6, Tiny } from \"../../components/Typography\";\nimport DropdownActionBtn, { IDropdownAction } from \"../../components/UI/DropdownActionBtn\";\nimport UkoAvatar from \"../../components/UkoAvatar\";\nimport { capitalizeFirstLetter } from \"../../utils/helpers\";\nimport { IMembership } from \"./HubMembership.interface\";\n\ninterface MembershipColumnShapeProps {\n  handleMembershipStatus: (applicant: IMembership, status: \"approved\" | \"rejected\" | \"remove\" | \"assign_agent\" | \"unassign_agent\") => void;\n  isHubAdmin?: boolean;\n  isMobile?: boolean;\n}\n\nconst MembershipColumnShape = (options: MembershipColumnShapeProps) => {\n  const { handleMembershipStatus, isHubAdmin, isMobile } = options;\n\n  const tableActions = (membership: IMembership): IDropdownAction[] => {\n    if (!isHubAdmin) return [];\n\n    const actions: IDropdownAction[] = [];\n\n    if (membership.status === \"pending\") {\n      actions.push(\n        {\n          label: \"Approve Application\",\n          icon: <CheckCircle color=\"success\" />,\n          onClick: (app: IMembership) => handleMembershipStatus(app, \"approved\"),\n        },\n        {\n          label: \"Reject Application\",\n          icon: <Cancel color=\"error\" />,\n          onClick: (app: IMembership) => handleMembershipStatus(app, \"rejected\"),\n        }\n      );\n    }\n\n    if (membership.status === \"active\") {\n      if (membership.role === \"member\" || membership.role === \"farmer\") {\n        actions.push({\n          label: \"Assign as Agent\",\n          icon: <CheckCircle color=\"success\" />,\n          onClick: (app: IMembership) => handleMembershipStatus(app, \"assign_agent\"),\n        });\n      }\n      if (membership.role === \"agent\") {\n        actions.push({\n          label: \"Unassign Agent\",\n          icon: <PersonRemove color=\"error\" />,\n          onClick: (app: IMembership) => handleMembershipStatus(app, \"unassign_agent\"),\n        });\n      }\n      actions.push({\n        label: \"Remove from Hub\",\n        icon: <PersonRemove color=\"error\" />,\n        onClick: (app: IMembership) => handleMembershipStatus(app, \"remove\"),\n      });\n    }\n\n    actions.push({\n      label: \"View Details\",\n      icon: <Visibility />,\n      onClick: (app: IMembership) => {\n        console.log(\"View user details:\", app.user);\n      },\n    });\n\n    return actions;\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'approved':\n      case 'accepted':\n      case 'active':\n        return '#4caf50';\n      case 'pending':\n        return '#ff9800';\n      case 'rejected':\n        return '#f44336';\n      default:\n        return '#666';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    if (isMobile) {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: '2-digit'\n      });\n    }\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  const columns: any[] = [\n    {\n      Header: \"Member\",\n      accessor: (row: IMembership) => row.user.name,\n      minWidth: isMobile ? 200 : 250,\n      Cell: ({ row }: any) => {\n        const membership = row.original as IMembership;\n        const { user } = membership;\n\n        return (\n          <FlexBox alignItems=\"center\">\n            <UkoAvatar \n              src=\"/static/avatar/001-man.svg\" \n              sx={{ width: isMobile ? 32 : 35, height: isMobile ? 32 : 35 }} \n            />\n            <FlexBox flexDirection=\"column\" ml={isMobile ? 1.5 : 2}>\n              <H6 className=\"mainColor semiBold\" sx={{ fontSize: isMobile ? '0.85rem' : '1rem', lineHeight: 1.2 }}>\n                {user.name}\n              </H6>\n              <Tiny color=\"text.disabled\" sx={{ fontSize: isMobile ? '0.7rem' : '0.75rem' }}>\n                {capitalizeFirstLetter(membership.role || \"farmer\")}\n              </Tiny>\n            </FlexBox>\n          </FlexBox>\n        );\n      },\n    },\n    {\n      Header: \"Contact\",\n      accessor: (row: IMembership) => row.user.phone_number,\n      minWidth: isMobile ? 140 : 150,\n      Cell: ({ row }: any) => {\n        const user = row.original.user;\n        return (\n          <FlexBox flexDirection=\"column\">\n            {user.phone_number && (\n              <FlexBox alignItems=\"center\" mb={0.5}>\n                <Phone sx={{ fontSize: isMobile ? 12 : 14, mr: 0.5, color: '#666' }} />\n                <Tiny sx={{ fontSize: isMobile ? '0.7rem' : '0.75rem' }}>\n                  {isMobile ? user.phone_number.replace('+256', '0') : user.phone_number}\n                </Tiny>\n              </FlexBox>\n            )}\n          </FlexBox>\n        );\n      },\n    },\n    {\n      Header: \"Hub\",\n      accessor: (row: IMembership) => row.hub.name,\n      minWidth: 150,\n      Cell: ({ row }: any) => {\n        const hub = row.original.hub;\n        return (\n          <FlexBox flexDirection=\"column\">\n            <H6 className=\"semiBold\" sx={{ fontSize: '0.9rem' }}>\n              {hub.name}\n            </H6>\n            <Tiny color=\"text.disabled\" sx={{ fontSize: '0.7rem' }}>\n              {hub.location.length > 20 ? `${hub.location.substring(0, 20)}...` : hub.location}\n            </Tiny>\n          </FlexBox>\n        );\n      },\n    },\n    {\n      Header: \"Status\",\n      accessor: (row: IMembership) => row.status,\n      minWidth: isMobile ? 100 : 120,\n      Cell: ({ value, row }: any) => {\n        const membership = row.original as IMembership;\n        return (\n          <FlexBox flexDirection=\"column\" alignItems={isMobile ? \"flex-start\" : \"flex-start\"}>\n            <span\n              style={{\n                padding: isMobile ? \"3px 6px\" : \"4px 10px\",\n                borderRadius: \"4px\",\n                fontSize: isMobile ? \"0.65rem\" : \"0.75rem\",\n                fontWeight: 600,\n                color: 'white',\n                backgroundColor: getStatusColor(value),\n                textAlign: 'center',\n                display: 'inline-block',\n                minWidth: isMobile ? '60px' : '70px'\n              }}\n            >\n              {capitalizeFirstLetter(value)}\n            </span>\n            {membership.requested_at && !isMobile && (\n              <Tiny color=\"text.disabled\" mt={0.5}>\n                Applied: {formatDate(membership.requested_at)}\n              </Tiny>\n            )}\n          </FlexBox>\n        );\n      },\n    },\n    ...(isHubAdmin && !isMobile ? [{\n      Header: \"Application Reason\",\n      accessor: (row: IMembership) => row.reason,\n      minWidth: 180,\n      Cell: ({ value }: any) => (\n        <Tiny \n          sx={{ maxWidth: 160, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap', fontSize: '0.75rem' }}\n          title={value}\n        >\n          {value || \"No reason provided\"}\n        </Tiny>\n      ),\n    }] : []),\n    ...(isHubAdmin ? [{\n      Header: \"Actions\",\n      accessor: \"id\",\n      minWidth: isMobile ? 80 : 100,\n      maxWidth: isMobile ? 80 : 120,\n      Cell: ({ row }: any) => {\n        const membership = row.original as IMembership;\n        const actions = tableActions(membership);\n        if (actions.length === 0) return <Tiny>-</Tiny>;\n        return (\n          <DropdownActionBtn\n            key={membership.id}\n            actions={actions}\n            metaData={membership}\n          />\n        );\n      },\n    }] : []),\n  ];\n\n  return columns;\n};\n\nexport default MembershipColumnShape;\n\n\n// import React from \"react\";\n// import { \n//   CheckCircle, \n//   Cancel, \n//   PersonRemove,\n//   Visibility,\n//   Phone,\n//   Email \n// } from \"@mui/icons-material\";\n// import FlexBox from \"../../components/FlexBox\";\n// import { H6, Tiny } from \"../../components/Typography\";\n// import DropdownActionBtn, { IDropdownAction } from \"../../components/UI/DropdownActionBtn\";\n// import UkoAvatar from \"../../components/UkoAvatar\";\n// import { \n//   capitalizeFirstLetter \n// } from \"../../utils/helpers\";\n// import { IMembership } from \"./HubMembership.interface\";\n// import { MEDIA_BASE_URL } from \"../../api/constants\";\n\n// interface MembershipColumnShapeProps {\n//   handleMembershipStatus: (applicant: IMembership, status: string) => void;\n//   isHubAdmin?: boolean;\n//   isMobile?: boolean;\n// }\n\n// const MembershipColumnShape = (options: MembershipColumnShapeProps) => {\n//   const { handleMembershipStatus, isHubAdmin, isMobile } = options;\n\n//   const tableActions = (membership: IMembership): IDropdownAction[] => {\n//     if (!isHubAdmin) return [];\n\n//     const actions: IDropdownAction[] = [];\n\n//     // Actions based on membership status\n//     if (membership.status === \"pending\") {\n//       actions.push(\n//         {\n//           label: \"Approve Application\",\n//           icon: <CheckCircle color=\"success\" />,\n//           onClick: (app: IMembership) => handleMembershipStatus(app, \"approved\"),\n//         },\n//         {\n//           label: \"Reject Application\",\n//           icon: <Cancel color=\"error\" />,\n//           onClick: (app: IMembership) => handleMembershipStatus(app, \"rejected\"),\n//         }\n//       );\n//     }\n\n//     if ( membership.status === \"active\") {\n//       actions.push({\n//         label: \"Remove from Hub\",\n//         icon: <PersonRemove color=\"error\" />,\n//         onClick: (app: IMembership) => handleMembershipStatus(app, \"remove\"),\n//       });\n//     }\n\n//     // Always show view details\n//     actions.push({\n//       label: \"View Details\",\n//       icon: <Visibility />,\n//       onClick: (app: IMembership) => {\n//         // You can implement navigation to member details page\n//         console.log(\"View user details:\", app.user);\n//       },\n//     });\n\n//     return actions;\n//   };\n\n//   const getStatusColor = (status: string) => {\n//     switch (status?.toLowerCase()) {\n//       case 'approved':\n//       case 'accepted':\n//       case 'active':\n//         return '#4caf50';\n//       case 'pending':\n//         return '#ff9800';\n//       case 'rejected':\n//         return '#f44336';\n//       default:\n//         return '#666';\n//     }\n//   };\n\n//   const formatDate = (dateString: string) => {\n//     if (isMobile) {\n//       // Shorter format for mobile\n//       return new Date(dateString).toLocaleDateString('en-US', {\n//         month: 'short',\n//         day: 'numeric',\n//         year: '2-digit'\n//       });\n//     }\n//     return new Date(dateString).toLocaleDateString('en-US', {\n//       year: 'numeric',\n//       month: 'short',\n//       day: 'numeric'\n//     });\n//   };\n\n//   const columns: any[] = [\n//     {\n//       Header: \"Member\",\n//       accessor: (row: IMembership) => row.user.name,\n//       minWidth: isMobile ? 200 : 250,\n//       Cell: ({ row }: any) => {\n//         const membership = row.original as IMembership;\n//         const { user } = membership;\n\n//         return (\n//           <FlexBox alignItems=\"center\">\n//             <UkoAvatar \n//               src=\"/static/avatar/001-man.svg\" \n//               sx={{ \n//                 width: isMobile ? 32 : 35, \n//                 height: isMobile ? 32 : 35 \n//               }} \n//             />\n//             <FlexBox flexDirection=\"column\" ml={isMobile ? 1.5 : 2}>\n//               <H6 \n//                 className=\"mainColor semiBold\"\n//                 sx={{ \n//                   fontSize: isMobile ? '0.85rem' : '1rem',\n//                   lineHeight: 1.2 \n//                 }}\n//               >\n//                 {user.name}\n//               </H6>\n//               <Tiny \n//                 color=\"text.disabled\"\n//                 sx={{ fontSize: isMobile ? '0.7rem' : '0.75rem' }}\n//               >\n//                 {capitalizeFirstLetter(membership.role || \"farmer\")}\n//               </Tiny>\n//             </FlexBox>\n//           </FlexBox>\n//         );\n//       },\n//     },\n//     {\n//       Header: \"Contact\",\n//       accessor: (row: IMembership) => row.user.phone_number,\n//       minWidth: isMobile ? 140 : 150,\n//       Cell: ({ row }: any) => {\n//         const user = row.original.user;\n//         return (\n//           <FlexBox flexDirection=\"column\">\n//             {user.phone_number && (\n//               <FlexBox alignItems=\"center\" mb={0.5}>\n//                 <Phone sx={{ \n//                   fontSize: isMobile ? 12 : 14, \n//                   mr: 0.5, \n//                   color: '#666' \n//                 }} />\n//                 <Tiny sx={{ fontSize: isMobile ? '0.7rem' : '0.75rem' }}>\n//                   {isMobile ? \n//                     user.phone_number.replace('+256', '0') : \n//                     user.phone_number\n//                   }\n//                 </Tiny>\n//               </FlexBox>\n//             )}\n//           </FlexBox>\n//         );\n//       },\n//     }\n//   ];\n\n//   // Add Hub column only if not showing specific hub members\n//   if (!isMobile) {\n//     columns.push({\n//       Header: \"Hub\",\n//       accessor: (row: IMembership) => row.hub.name,\n//       minWidth: 150,\n//       Cell: ({ row }: any) => {\n//         const hub = row.original.hub;\n//         return (\n//           <FlexBox flexDirection=\"column\">\n//             <H6 className=\"semiBold\" sx={{ fontSize: '0.9rem' }}>\n//               {hub.name}\n//             </H6>\n//             <Tiny color=\"text.disabled\" sx={{ fontSize: '0.7rem' }}>\n//               {hub.location.length > 20 ? \n//                 `${hub.location.substring(0, 20)}...` : \n//                 hub.location\n//               }\n//             </Tiny>\n//           </FlexBox>\n//         );\n//       },\n//     });\n//   }\n\n//   columns.push({\n//     Header: \"Status\",\n//     accessor: (row: IMembership) => row.status,\n//     minWidth: isMobile ? 100 : 120,\n//     Cell: ({ value, row }: any) => {\n//       const membership = row.original as IMembership;\n//       return (\n//         <FlexBox flexDirection=\"column\" alignItems={isMobile ? \"flex-start\" : \"flex-start\"}>\n//           <span\n//             style={{\n//               padding: isMobile ? \"3px 6px\" : \"4px 10px\",\n//               borderRadius: \"4px\",\n//               fontSize: isMobile ? \"0.65rem\" : \"0.75rem\",\n//               fontWeight: 600,\n//               color: 'white',\n//               backgroundColor: getStatusColor(value),\n//               textAlign: 'center',\n//               display: 'inline-block',\n//               minWidth: isMobile ? '60px' : '70px'\n//             }}\n//           >\n//             {capitalizeFirstLetter(value)}\n//           </span>\n//           {membership.requested_at && !isMobile && (\n//             <Tiny color=\"text.disabled\" mt={0.5}>\n//               Applied: {formatDate(membership.requested_at)}\n//             </Tiny>\n//           )}\n//         </FlexBox>\n//       );\n//     },\n//   });\n\n//   // Show reason only for admin and on larger screens\n//   if (isHubAdmin && !isMobile) {\n//     columns.push({\n//       Header: \"Application Reason\",\n//       accessor: (row: IMembership) => row.reason,\n//       minWidth: 180,\n//       Cell: ({ value }: any) => (\n//         <Tiny \n//           sx={{ \n//             maxWidth: 160, \n//             overflow: 'hidden', \n//             textOverflow: 'ellipsis',\n//             whiteSpace: 'nowrap',\n//             fontSize: '0.75rem'\n//           }}\n//           title={value} // Show full text on hover\n//         >\n//           {value || \"No reason provided\"}\n//         </Tiny>\n//       ),\n//     });\n//   }\n\n//   // Only Hub admin sees Action column\n//   if (isHubAdmin) {\n//     columns.push({\n//       Header: \"Actions\",\n//       accessor: \"id\",\n//       minWidth: isMobile ? 80 : 100,\n//       maxWidth: isMobile ? 80 : 120,\n//       Cell: ({ row }: any) => {\n//         const membership = row.original as IMembership;\n//         const actions = tableActions(membership);\n\n//         if (actions.length === 0) return <Tiny>-</Tiny>;\n\n//         return (\n//           <DropdownActionBtn\n//             key={membership.id}\n//             actions={actions}\n//             metaData={membership}\n//           />\n//         );\n//       },\n//     });\n//   }\n\n//   return columns;\n// };\n\n// export default MembershipColumnShape;","import { Box, useMediaQuery, useTheme } from \"@mui/material\";\nimport { useEffect, useState } from \"react\";\nimport CustomTable from \"../../components/UI/CustomTable\";\nimport SearchInput from \"../../components/SearchInput\";\nimport useTitle from \"../../hooks/useTitle\";\nimport { toast } from \"react-hot-toast\";\nimport { INITIAL_PAGE_SIZE } from \"../../api/constants\";\nimport MembershipColumnShape from \"./HubMembershipColumnShape\";\nimport ConfirmPrompt from \"../../components/UI/Modal/ConfirmPrompt\";\nimport { membershipService } from \"./HubMembership.service\";\nimport { IMembership } from \"./HubMembership.interface\";\nimport useAuth from \"../../hooks/useAuth\";\n\ninterface HubMembershipProps {\n  hubId?: string;\n}\n\nconst HubMembership = ({ hubId }: HubMembershipProps) => {\n  useTitle(\"Hub Membership\");\n\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const { user: currentUser } = useAuth();\n  const [memberships, setMemberships] = useState<IMembership[]>([]);\n  const [filters, setFilters] = useState<any>({\n    search: '',\n    page: 1,\n    page_size: INITIAL_PAGE_SIZE,\n    hub_id: hubId,\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [showRejectModal, setShowRejectModal] = useState<{\n    open: boolean;\n    applicant: IMembership | null;\n  }>({\n    open: false,\n    applicant: null,\n  });\n\n  const isHubAdmin = currentUser?.role === 'hub_admin';\n  const isSuperAdmin = currentUser?.role === 'super_admin';\n\n  useEffect(() => {\n    fetchMemberships();\n  }, [filters?.page, filters?.page_size, filters?.hub_id]);\n\n  const fetchMemberships = async () => {\n    try {\n      setLoading(true);\n      const response = await membershipService.getHubMemberships(filters);\n      let data: IMembership[] = [];\n      if (Array.isArray(response)) {\n        data = response;\n      } else if (response && Array.isArray((response as any).results)) {\n        data = (response as any).results;\n      }\n      setMemberships(data);\n    } catch (error: any) {\n      console.error(\"Error fetching memberships:\", error);\n      if (error?.response?.status === 404) {\n        toast.error(\"No memberships found or you don't have access to view them\");\n      } else if (error?.response?.status === 403) {\n        toast.error(\"You don't have permission to view these memberships\");\n      } else {\n        toast.error(\"Failed to load memberships\");\n      }\n      setMemberships([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRefreshData = () => {\n    fetchMemberships();\n  };\n\n  const handleMembershipStatus = async (\n    applicant: IMembership,\n    status: \"approved\" | \"rejected\" | \"remove\" | \"assign_agent\" | \"unassign_agent\"\n  ) => {\n    try {\n      if (status === \"approved\") {\n        await membershipService.approveMembership(applicant.id, {\n          status: \"active\",\n          notes: \"Approved by hub admin\",\n        });\n        toast.success(`${applicant.user.name}'s application approved`);\n      } else if (status === \"rejected\") {\n        await membershipService.rejectMembership(applicant.id, \"Rejected by hub admin\");\n        toast.success(`${applicant.user.name}'s application rejected`);\n      } else if (status === \"remove\") {\n        await membershipService.deleteMembership(applicant.id);\n        toast.success(`${applicant.user.name} removed from hub`);\n      } else if (status === \"assign_agent\") {\n        await membershipService.updateMembershipRole(applicant.id, \"agent\");\n        toast.success(`${applicant.user.name} assigned as agent`);\n      } else if (status === \"unassign_agent\") {\n        await membershipService.updateMembershipRole(applicant.id, \"farmer\");\n        toast.success(`${applicant.user.name} unassigned as agent`);\n      }\n      handleRefreshData();\n    } catch (error: any) {\n      const errorMessage =\n        error?.response?.data?.detail ||\n        error?.response?.data?.message ||\n        \"Something went wrong\";\n      toast.error(errorMessage);\n    }\n  };\n\n  const filteredMemberships = memberships.filter((membership) => {\n    if (!filters?.search) return true;\n    const term = String(filters.search).toLowerCase();\n    const name = membership.user?.name || \"\";\n    const phone = membership.user?.phone_number || \"\";\n    return name.toLowerCase().includes(term) || phone.includes(term);\n  });\n\n  const handleSearch = (searchTerm: string) => {\n    setFilters({ ...filters, search: searchTerm, page: 1 });\n    setTimeout(() => {\n      fetchMemberships();\n    }, 300);\n  };\n\n  if (!isHubAdmin && !isSuperAdmin) {\n    return (\n      <Box p={3} textAlign=\"center\">\n        <h3>Access Denied</h3>\n        <p>Only hub administrators can view membership details.</p>\n      </Box>\n    );\n  }\n\n  return (\n    <Box pb={2}>\n      <Box sx={{\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: isMobile ? \"stretch\" : \"center\",\n        flexDirection: isMobile ? \"column\" : \"row\",\n        gap: isMobile ? 2 : 0,\n        marginBottom: 2,\n      }}>\n        <SearchInput\n          onBlur={(event: any) => handleSearch(event.target.value)}\n          onChange={(event: any) => handleSearch(event.target.value)}\n          type=\"text\"\n          placeholder=\"Search members by name or phone...\"\n          sx={{ width: isMobile ? '100%' : 'auto' }}\n        />\n      </Box>\n      <Box sx={{\n        width: '100%',\n        overflowX: 'auto',\n        WebkitOverflowScrolling: 'touch',\n        '& .MuiTableContainer-root': { maxWidth: '100%' },\n        '& table': { minWidth: isMobile ? '800px' : '100%' },\n        '&::-webkit-scrollbar': { height: '6px' },\n        '&::-webkit-scrollbar-track': { backgroundColor: '#f1f1f1', borderRadius: '3px' },\n        '&::-webkit-scrollbar-thumb': { backgroundColor: '#c1c1c1', borderRadius: '3px', '&:hover': { backgroundColor: '#a8a8a8' } },\n      }}>\n        <CustomTable\n          columnShape={MembershipColumnShape({\n            handleMembershipStatus,\n            isHubAdmin: isHubAdmin || isSuperAdmin,\n            isMobile,\n          })}\n          data={filteredMemberships}\n          dataCount={filteredMemberships.length}\n          pageInitialState={{\n            pageSize: filters.page_size,\n            pageIndex: filters.page - 1,\n          }}\n          setPageIndex={(page: number) => setFilters({ ...filters, page: page + 1 })}\n          pageIndex={filters.page - 1}\n          setPageSize={(size: number) => setFilters({ ...filters, page_size: size, page: 1 })}\n          loading={loading}\n        />\n      </Box>\n      <ConfirmPrompt\n        open={showRejectModal.open}\n        handleClose={() => setShowRejectModal({ open: false, applicant: null })}\n        title=\"Reject Application\"\n        text={`Are you sure you want to reject ${showRejectModal.applicant?.user?.name || 'this'} application?`}\n        handleOk={() => {\n          if (showRejectModal.applicant) {\n            handleMembershipStatus(showRejectModal.applicant, \"rejected\");\n            setShowRejectModal({ open: false, applicant: null });\n          }\n        }}\n      />\n    </Box>\n  );\n};\n\nexport default HubMembership;\n\n\n\n// import { Box, useMediaQuery, useTheme } from \"@mui/material\";\n// import { useEffect, useState } from \"react\";\n// import CustomTable from \"../../components/UI/CustomTable\";\n// import SearchInput from \"../../components/SearchInput\";\n// import useTitle from \"../../hooks/useTitle\";\n// import { toast } from \"react-hot-toast\";\n// import { INITIAL_PAGE_SIZE } from \"../../api/constants\";\n// import MembershipColumnShape from \"./HubMembershipColumnShape\";\n// import ConfirmPrompt from \"../../components/UI/Modal/ConfirmPrompt\";\n// import { membershipService } from \"./HubMembership.service\"; // Import the singleton instance\n// import { IMembership } from \"./HubMembership.interface\";\n// import useAuth from \"../../hooks/useAuth\";\n\n// interface HubMembershipProps {\n//   hubId?: string; // Optional prop to specify which hub's memberships to show\n// }\n\n// const HubMembership = ({ hubId }: HubMembershipProps) => {\n//   useTitle(\"Hub Membership\");\n\n//   const theme = useTheme();\n//   const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n//   const { user: currentUser } = useAuth();\n//   const [memberships, setMemberships] = useState<IMembership[]>([]);\n//   const [filters, setFilters] = useState<any>({\n//     search: '',\n//     page: 1,\n//     page_size: INITIAL_PAGE_SIZE,\n//     hub_id: hubId, // Include hub_id if provided\n//   });\n//   const [loading, setLoading] = useState<boolean>(false);\n//   const [showRejectModal, setShowRejectModal] = useState<{\n//     open: boolean;\n//     applicant: IMembership | null;\n//   }>({\n//     open: false,\n//     applicant: null,\n//   });\n\n//   // Check if current user is hub admin by role\n//   const isHubAdmin = currentUser?.role === 'hub_admin';\n//   const isSuperAdmin = currentUser?.role === 'super_admin';\n\n//   useEffect(() => {\n//     fetchMemberships();\n//   }, [filters?.page, filters?.page_size, filters?.hub_id]);\n\n//   const fetchMemberships = async () => {\n//     try {\n//       setLoading(true);\n//       const response = await membershipService.getHubMemberships(filters);\n      \n//       // Ensure response is an array of IMembership\n//       let data: IMembership[] = [];\n//       if (Array.isArray(response)) {\n//         data = response;\n//       } else if (response && Array.isArray((response as any).results)) {\n//         data = (response as any).results;\n//       }\n//       setMemberships(data);\n//     } catch (error: any) {\n//       console.error(\"Error fetching memberships:\", error);\n//       if (error?.response?.status === 404) {\n//         toast.error(\"No memberships found or you don't have access to view them\");\n//       } else if (error?.response?.status === 403) {\n//         toast.error(\"You don't have permission to view these memberships\");\n//       } else {\n//         toast.error(\"Failed to load memberships\");\n//       }\n//       setMemberships([]);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleRefreshData = () => {\n//     fetchMemberships();\n//   };\n\n//   const handleMembershipStatus = async (\n//     applicant: IMembership,\n//     status: \"approved\" | \"rejected\"\n//   ) => {\n//     try {\n//       if (status === \"approved\") {\n//         // FIXED: Send 'active' instead of 'approved' and don't override the user's role\n//         await membershipService.approveMembership(applicant.id, {\n//           status: \"active\", // Changed from \"approved\" to \"active\"\n//           // Remove the hardcoded role - let the backend handle the role logic\n//           // or use the user's existing role\n//           notes: \"Approved by hub admin\",\n//         });\n//         toast.success(`${applicant.user.name}'s application approved`);\n//       } else {\n//         await membershipService.rejectMembership(applicant.id, \"Rejected by hub admin\");\n//         toast.success(`${applicant.user.name}'s application rejected`);\n//       }\n//       handleRefreshData();\n//     } catch (error: any) {\n//       const errorMessage =\n//         error?.response?.data?.detail ||\n//         error?.response?.data?.message ||\n//         \"Something went wrong\";\n//       toast.error(errorMessage);\n//     }\n//   };\n\n//   const handleRemoveMember = async (member: IMembership) => {\n//     try {\n//       await membershipService.deleteMembership(member.id);\n//       toast.success(`${member.user.name} removed from hub`);\n//       handleRefreshData();\n//     } catch (error: any) {\n//       const errorMessage =\n//         error?.response?.data?.detail ||\n//         error?.response?.data?.message ||\n//         \"Failed to remove member\";\n//       toast.error(errorMessage);\n//     }\n//   };\n\n//   const filteredMemberships = memberships.filter((membership) => {\n//     if (!filters?.search) return true;\n//     const term = String(filters.search).toLowerCase();\n//     const name = membership.user?.name || \"\";\n//     const phone = membership.user?.phone_number || \"\";\n//     return name.toLowerCase().includes(term) || phone.includes(term);\n//   });\n\n//   const handleSearch = (searchTerm: string) => {\n//     setFilters({ ...filters, search: searchTerm, page: 1 });\n//     // Debounce search if needed\n//     setTimeout(() => {\n//       fetchMemberships();\n//     }, 300);\n//   };\n\n//   if (!isHubAdmin && !isSuperAdmin) {\n//     return (\n//       <Box p={3} textAlign=\"center\">\n//         <h3>Access Denied</h3>\n//         <p>Only hub administrators can view membership details.</p>\n//       </Box>\n//     );\n//   }\n\n//   return (\n//     <Box pb={2}>\n//       <Box sx={{\n//         ...styles.tablePreHeader,\n//         flexDirection: isMobile ? 'column' : 'row',\n//         gap: isMobile ? 2 : 0,\n//         alignItems: isMobile ? 'stretch' : 'center',\n//       }}>\n//         <SearchInput\n//           onBlur={(event: any) => {\n//             handleSearch(event.target.value);\n//           }}\n//           onChange={(event: any) => {\n//             handleSearch(event.target.value);\n//           }}\n//           type=\"text\"\n//           placeholder=\"Search members by name or phone...\"\n//           sx={{ width: isMobile ? '100%' : 'auto' }}\n//         />\n//       </Box>\n\n//       {/* Mobile-friendly table container */}\n//       <Box sx={{\n//         width: '100%',\n//         overflowX: 'auto',\n//         WebkitOverflowScrolling: 'touch',\n//         '& .MuiTableContainer-root': {\n//           maxWidth: '100%',\n//         },\n//         '& table': {\n//           minWidth: isMobile ? '800px' : '100%',\n//         },\n//         // Better scrollbar styling for mobile\n//         '&::-webkit-scrollbar': {\n//           height: '6px',\n//         },\n//         '&::-webkit-scrollbar-track': {\n//           backgroundColor: '#f1f1f1',\n//           borderRadius: '3px',\n//         },\n//         '&::-webkit-scrollbar-thumb': {\n//           backgroundColor: '#c1c1c1',\n//           borderRadius: '3px',\n//           '&:hover': {\n//             backgroundColor: '#a8a8a8',\n//           },\n//         },\n//       }}>\n//         <CustomTable\n//           columnShape={MembershipColumnShape({\n//             handleMembershipStatus: (app: IMembership, status: string) => {\n//               if (status === \"rejected\") {\n//                 setShowRejectModal({ applicant: app, open: true });\n//                 return;\n//               }\n//               if (status === \"approved\") {\n//                 handleMembershipStatus(app, \"approved\");\n//                 return;\n//               }\n//               if (status === \"remove\") {\n//                 handleRemoveMember(app);\n//                 return;\n//               }\n//             },\n//             isHubAdmin: isHubAdmin || isSuperAdmin,\n//           })}\n//           data={filteredMemberships}\n//           dataCount={filteredMemberships.length}\n//           pageInitialState={{\n//             pageSize: filters.page_size,\n//             pageIndex: filters.page - 1,\n//           }}\n//           setPageIndex={(page: number) =>\n//             setFilters({ ...filters, page: page + 1 })\n//           }\n//           pageIndex={filters?.page - 1}\n//           setPageSize={(size: number) =>\n//             setFilters({ ...filters, page_size: size, page: 1 })\n//           }\n//           loading={loading}\n//         />\n//       </Box>\n\n//       <ConfirmPrompt\n//         open={showRejectModal.open}\n//         handleClose={() => setShowRejectModal({ open: false, applicant: null })}\n//         title=\"Reject Application\"\n//         text={`Are you sure you want to reject ${showRejectModal.applicant?.user?.name || 'this'} application?`}\n//         handleOk={() => {\n//           if (showRejectModal.applicant) {\n//             handleMembershipStatus(showRejectModal.applicant, \"rejected\");\n//             setShowRejectModal({ open: false, applicant: null });\n//           }\n//         }}\n//       />\n//     </Box>\n//   );\n// };\n\n// const styles = {\n//   tablePreHeader: {\n//     display: \"flex\",\n//     justifyContent: \"space-between\",\n//     alignItems: \"center\",\n//     marginBottom: 2,\n//   },\n// };\n\n// export default HubMembership;","import instance from \"../../api\";\nimport { IMembership, HubMembershipApproval, HubMembershipRequest } from \"./HubMembership.interface\";\n\nexport class MembershipService {\n  async getHubMemberships(filters: any): Promise<IMembership[]> {\n    const response = await instance.get('/hubs/hubs/memberships/', {\n      params: filters\n    });\n    return response.data;\n  }\n\n  async approveMembership(membershipId: string, data: HubMembershipApproval): Promise<IMembership> {\n    const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/approve/`, data);\n    return response.data;\n  }\n\n  async rejectMembership(membershipId: string, notes?: string): Promise<IMembership> {\n    const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/reject/`, {\n      status: 'rejected' as const,\n      notes\n    });\n    return response.data;\n  }\n\n  async deleteMembership(membershipId: string): Promise<void> {\n    await instance.delete(`/hubs/hubs/memberships/${membershipId}/`);\n  }\n\n  async requestMembership(data: HubMembershipRequest): Promise<IMembership> {\n    const response = await instance.post('/hubs/hubs/memberships/request_membership/', data);\n    return response.data;\n  }\n\n  async leaveMembership(membershipId: string): Promise<void> {\n    const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/leave/`);\n    return response.data;\n  }\n\n  async checkHubMembership(hubId: string): Promise<IMembership | null> {\n    try {\n      const memberships = await this.getHubMemberships({ hub_id: hubId });\n      return memberships.find(m => {\n        if (typeof m.hub === 'string') {\n          return m.hub === hubId;\n        } else if (typeof m.hub === 'object' && m.hub !== null && 'id' in m.hub) {\n          return m.hub.id === hubId;\n        }\n        return false;\n      }) || null;\n    } catch (error) {\n      console.error(\"Error checking hub membership:\", error);\n      return null;\n    }\n  }\n\n  async updateMembershipRole(membershipId: string, role: string): Promise<IMembership> {\n    const response = await instance.patch(`/hubs/hubs/memberships/${membershipId}/`, { role });\n    return response.data;\n  }\n\n  // New method to assign an agent\n  async assignAgent(userId: string, hubId: string): Promise<void> {\n    await instance.post('/authentication/users/assign_agent/', { user_id: userId, hub_id: hubId });\n  }\n\n  // New method to unassign an agent\n  async unassignAgent(userId: string, hubId: string): Promise<void> {\n    await instance.post('/authentication/users/unassign_agent/', { user_id: userId, hub_id: hubId });\n  }\n}\n\nexport const membershipService = new MembershipService();\n\n\n// // HubMembership.service.ts\n// import instance from \"../../api\";\n// import { IMembership, HubMembershipApproval, HubMembershipRequest } from \"./HubMembership.interface\";\n\n// export class MembershipService {\n//   async getHubMemberships(filters: any): Promise<IMembership[]> {\n//     const response = await instance.get('/hubs/hubs/memberships/', {\n//       params: filters\n//     });\n//     return response.data;\n//   }\n\n//   async approveMembership(membershipId: string, data: HubMembershipApproval): Promise<IMembership> {\n//     const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/approve/`, data);\n//     return response.data;\n//   }\n\n//   async rejectMembership(membershipId: string, notes?: string): Promise<IMembership> {\n//     const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/reject/`, {\n//       status: 'rejected' as const,\n//       notes\n//     });\n//     return response.data;\n//   }\n\n//   async deleteMembership(membershipId: string): Promise<void> {\n//     await instance.delete(`/hubs/hubs/memberships/${membershipId}/`);\n//   }\n\n//   async requestMembership(data: HubMembershipRequest): Promise<IMembership> {\n//     const response = await instance.post('/hubs/hubs/memberships/request_membership/', data);\n//     return response.data;\n//   }\n\n//   async leaveMembership(membershipId: string): Promise<void> {\n//     const response = await instance.post(`/hubs/hubs/memberships/${membershipId}/leave/`);\n//     return response.data;\n//   }\n\n//   // Helper method for checking single hub membership\n//   async checkHubMembership(hubId: string): Promise<IMembership | null> {\n//     try {\n//       const memberships = await this.getHubMemberships({ hub_id: hubId });\n//       // Find the current user's membership in this hub\n//       return memberships.find(m => {\n//         if (typeof m.hub === 'string') {\n//           return m.hub === hubId;\n//         } else if (typeof m.hub === 'object' && m.hub !== null && 'id' in m.hub) {\n//           return m.hub.id === hubId;\n//         }\n//         return false;\n//       }) || null;\n//     } catch (error) {\n//       console.error(\"Error checking hub membership:\", error);\n//       return null;\n//     }\n//   }\n// }\n\n// // Export a singleton instance\n// export const membershipService = new MembershipService();"],"names":["createSvgIcon","_jsx","d","options","handleMembershipStatus","isHubAdmin","isMobile","getStatusColor","status","toLowerCase","Header","accessor","row","user","name","minWidth","Cell","_ref","membership","original","_jsxs","FlexBox","alignItems","children","UkoAvatar","src","sx","width","height","flexDirection","ml","H6","className","fontSize","lineHeight","Tiny","color","capitalizeFirstLetter","role","phone_number","_ref2","mb","Phone","mr","replace","hub","_ref3","location","length","concat","substring","_ref4","value","style","padding","borderRadius","fontWeight","backgroundColor","textAlign","display","requested_at","mt","dateString","Date","toLocaleDateString","month","day","year","reason","_ref5","maxWidth","overflow","textOverflow","whiteSpace","title","_ref6","actions","push","label","icon","CheckCircle","onClick","app","Cancel","PersonRemove","Visibility","console","log","tableActions","DropdownActionBtn","metaData","id","_showRejectModal$appl","_showRejectModal$appl2","hubId","useTitle","theme","useTheme","useMediaQuery","breakpoints","down","currentUser","useAuth","memberships","setMemberships","useState","filters","setFilters","search","page","page_size","INITIAL_PAGE_SIZE","hub_id","loading","setLoading","showRejectModal","setShowRejectModal","open","applicant","isSuperAdmin","useEffect","fetchMemberships","async","response","membershipService","getHubMemberships","data","Array","isArray","results","error","_error$response","_error$response2","toast","approveMembership","notes","success","rejectMembership","deleteMembership","updateMembershipRole","_error$response3","_error$response3$data","_error$response4","_error$response4$data","errorMessage","detail","message","filteredMemberships","filter","_membership$user","_membership$user2","term","String","phone","includes","handleSearch","searchTerm","_objectSpread","setTimeout","Box","pb","justifyContent","gap","marginBottom","SearchInput","onBlur","event","target","onChange","type","placeholder","overflowX","WebkitOverflowScrolling","CustomTable","columnShape","MembershipColumnShape","dataCount","pageInitialState","pageSize","pageIndex","setPageIndex","setPageSize","size","ConfirmPrompt","handleClose","text","handleOk","p","instance","get","params","membershipId","post","delete","requestMembership","leaveMembership","checkHubMembership","this","find","m","patch","assignAgent","userId","user_id","unassignAgent"],"ignoreList":[],"sourceRoot":""}