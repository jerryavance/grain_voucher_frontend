"use strict";(self.webpackChunkinvest=self.webpackChunkinvest||[]).push([[9095],{13194:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(65043),i=t(95926);const s=e=>{const{title:n,setTitle:t}=(0,a.useContext)(i.C);return(0,a.useEffect)(()=>t(e),[e,t]),n}},33396:(e,n,t)=>{t.d(n,{A:()=>x});var a=t(65043),i=t(8302),s=t(67784),r=t(81637),o=t(63516),l=t(73033),d=t(23768),c=t(33438),h=t(95874),p=t(55935),u=t(64220),m=t(70579);const x=e=>{let{handleRefreshHubData:n,hubId:t,hubName:x,handleCancel:b}=e;const[g,f]=(0,a.useState)(!1),v=l.Ik().shape({reason:l.Yj().min(10,"Please provide at least 10 characters").max(500,"Reason should not exceed 500 characters").required("Please provide a reason for joining")}),y=(0,o.Wx)({initialValues:{reason:""},validationSchema:v,onSubmit:async e=>{f(!0);try{const a={hub:t,reason:e.reason};await u.S.requestMembership(a),d.oR.success("Application submitted successfully! You'll be notified once reviewed."),n&&n()}catch(o){var a,i,s,r;const e=(null===o||void 0===o||null===(a=o.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||(null===o||void 0===o||null===(s=o.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.detail)||"Failed to submit application. Please try again.";d.oR.error(e)}finally{f(!1)}}});return(0,m.jsx)("form",{onSubmit:y.handleSubmit,style:{width:"100%"},children:(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",height:"100%",padding:"8px"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Apply to Join"}),(0,m.jsx)("div",{style:{fontSize:"0.75rem",color:"#666"},children:x})]}),b&&(0,m.jsx)(i.A,{onClick:b,size:"small",sx:{minWidth:"auto",padding:"4px",color:"#666"},children:(0,m.jsx)(c.A,{sx:{fontSize:16}})})]}),(0,m.jsx)(s.A,{fullWidth:!0,id:"reason",name:"reason",label:"Why do you want to join?",multiline:!0,rows:3,placeholder:"Tell us why you'd like to join this hub...",value:y.values.reason,onChange:y.handleChange,onBlur:y.handleBlur,error:y.touched.reason&&Boolean(y.errors.reason),helperText:y.touched.reason&&y.errors.reason,size:"small",sx:{"& .MuiOutlinedInput-root":{fontSize:"0.75rem"},"& .MuiInputLabel-root":{fontSize:"0.75rem"},"& .MuiFormHelperText-root":{fontSize:"0.65rem"}}}),(0,m.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"auto"},children:[(0,m.jsx)(i.A,{variant:"contained",size:"small",fullWidth:!0,type:"submit",disabled:g,startIcon:g?(0,m.jsx)(r.A,{size:12,color:"inherit"}):(0,m.jsx)(h.A,{}),sx:{fontSize:"0.7rem",padding:"6px 12px",backgroundColor:p.eq,"&:hover":{backgroundColor:p.eq,opacity:.9}},children:g?"Submitting...":"Submit Application"}),b&&(0,m.jsx)(i.A,{variant:"outlined",size:"small",onClick:b,disabled:g,sx:{fontSize:"0.7rem",padding:"6px 12px"},children:"Cancel"})]})]})})}},49095:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var a,i,s,r=t(57528),o=t(85367),l=t(47460),d=t(68110),c=t(8302),h=t(65043),p=t(73216),u=t(33396),m=t(12586),x=t(70579);const b=e=>{let{type:n,height:t=70}=e;return(0,x.jsxs)(g,{style:{height:t},children:[(0,x.jsx)("img",{src:"/static/background/user-cover-pic.png",alt:"Hub Cover",height:"100%",width:"100%",style:{objectFit:"cover"}}),(0,x.jsx)(y,{}),(0,x.jsx)(m.A,{color:"institutional"===(null===n||void 0===n?void 0:n.toLowerCase())?"gold-inverse":"green-inverse",className:"semiBold",style:{position:"absolute",top:6,right:6,fontSize:"0.65rem",padding:"2px 6px",lineHeight:1.2,height:"auto",border:"none"},children:n})]})},g=d.Ay.div(a||(a=(0,r.A)(["\n  position: relative;\n  flex-shrink: 0;\n  overflow: hidden;\n"]))),f=()=>(0,x.jsx)("div",{className:"divider"}),v=d.Ay.div(i||(i=(0,r.A)(["\n  position: relative;\n  border: 1px solid #e0e0e0;\n  border-radius: 12px;\n  background: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  transition: all 0.2s ease;\n  overflow: hidden;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);\n  }\n\n  &.compact-card {\n    min-height: 240px;\n    height: auto;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .card-body {\n    padding: 14px;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    gap: 10px;\n    min-height: 0; /* Prevents flex shrinking issues */\n  }\n\n  .hub-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    min-height: 0;\n  }\n\n  .hub-name {\n    font-size: 0.95rem;\n    font-weight: 600;\n    color: #333;\n    line-height: 1.3;\n    word-wrap: break-word;\n  }\n\n  .hub-location {\n    font-size: 0.8rem;\n    color: #666;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    line-height: 1.2;\n  }\n\n  .location-icon {\n    font-size: 0.75rem;\n    flex-shrink: 0;\n  }\n\n  .hub-admin {\n    font-size: 0.75rem;\n    color: #888;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    line-height: 1.2;\n  }\n\n  .divider {\n    height: 1px;\n    background-color: #f0f0f0;\n    margin: 8px 0;\n    flex-shrink: 0;\n  }\n\n  .card-actions {\n    display: flex;\n    gap: 8px;\n    flex-direction: column;\n    flex-shrink: 0;\n    margin-top: auto;\n  }\n\n  .join-form-container {\n    min-height: 240px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 14px;\n  }\n\n  @media (max-width: 768px) {\n    &.compact-card {\n      min-height: 220px;\n    }\n    \n    .card-body {\n      padding: 12px;\n      gap: 8px;\n    }\n    \n    .hub-name {\n      font-size: 0.9rem;\n    }\n    \n    .hub-location {\n      font-size: 0.75rem;\n    }\n\n    .hub-admin {\n      font-size: 0.7rem;\n    }\n\n    .card-actions {\n      gap: 6px;\n    }\n  }\n\n  @media (max-width: 480px) {\n    &.compact-card {\n      min-height: 200px;\n    }\n    \n    .card-body {\n      padding: 10px;\n    }\n  }\n"]))),y=d.Ay.div(s||(s=(0,r.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.1) 100%);\n  pointer-events: none;\n"])));var j=t(32672),A=t(59893),w=t(98606);const C=e=>{let{hub:n,userMemberships:t=[],onMembershipUpdate:a}=e;const[i,s]=(0,h.useState)(!1),{user:r}=(0,j.A)(),o=(0,p.Zp)(),l=t.includes(n.id),d=()=>{s(!1),a&&a()};return i?(0,x.jsx)(v,{className:"compact-card",children:(0,x.jsx)("div",{className:"join-form-container",children:(0,x.jsx)(u.A,{hubId:n.id,hubName:n.name,handleCancel:()=>s(!1),handleRefreshHubData:d})})}):(0,x.jsxs)(v,{className:"compact-card",children:[(0,x.jsx)(b,{type:n.slug,height:70}),(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"hub-info",children:[(0,x.jsx)("div",{className:"hub-name",children:n.name}),(0,x.jsxs)("div",{className:"hub-location",children:[(0,x.jsx)("span",{className:"location-icon",children:"\ud83d\udccd"}),(0,x.jsx)("span",{children:n.location})]}),n.hub_admin&&(0,x.jsxs)("div",{className:"hub-admin",children:[(0,x.jsx)(A.A,{sx:{fontSize:12,flexShrink:0}}),(0,x.jsxs)("span",{children:[n.hub_admin.first_name," ",n.hub_admin.last_name]})]})]}),(0,x.jsx)(f,{}),(0,x.jsxs)("div",{className:"card-actions",children:[(0,x.jsx)(c.A,{variant:"outlined",size:"small",fullWidth:!0,onClick:()=>{o("/hub-list/details/".concat(n.id))},sx:{fontSize:"0.75rem",padding:"6px 12px",minHeight:"32px",textTransform:"none"},children:"View Details"}),l?(0,x.jsx)(c.A,{variant:"contained",size:"small",fullWidth:!0,disabled:!0,startIcon:(0,x.jsx)(w.A,{sx:{fontSize:14}}),sx:{fontSize:"0.75rem",padding:"6px 12px",minHeight:"32px",backgroundColor:"#4caf50",textTransform:"none","&.Mui-disabled":{backgroundColor:"#4caf50",color:"white",opacity:.9}},children:"Member"}):(0,x.jsx)(c.A,{variant:"contained",size:"small",fullWidth:!0,onClick:()=>{s(!0)},sx:{fontSize:"0.75rem",padding:"6px 12px",minHeight:"32px",textTransform:"none"},children:"Apply to Join"})]})]})]})};var S,k=t(77170),z=t(7690),N=t(37490),H=t(78784);const M=(e,n)=>{console.log(e.format("YYYY-MM-DD"),n)},_=()=>{const{token:e}=k.A.useToken(),n={border:"1px solid ".concat(e.colorBorderSecondary),borderRadius:e.borderRadiusLG};return(0,x.jsx)(B,{style:n,className:"smallCalendar",children:(0,x.jsx)(H.A,{fullscreen:!1,onPanelChange:M,dateCellRender:e=>{const n=(e=>{const n=e.format("YYYY-MM-DD"),t={"2024-12-10":[{type:"success",content:"Special Event"}],"2024-12-15":[{type:"warning",content:"Holiday"}],"2024-12-25":[{type:"error",content:"Christmas"}]};return(null===t||void 0===t?void 0:t[n])||[]})(e);return(0,x.jsx)(x.Fragment,{children:n.map((e,n)=>(0,x.jsx)(z.A,{placement:"topLeft",title:e.content,content:e.content,children:(0,x.jsx)("div",{className:"flexCenter mainBg1",style:{height:5,padding:10,position:"absolute",top:17},children:(0,x.jsx)(N.A,{status:e.type,style:{}},n)})}))})}})})},B=d.Ay.div(S||(S=(0,r.A)(["\n  width: 285px;\n  @media (max-width: 1280px) {\n    width: 250px;\n  }\n  @media (max-width: 960px) {\n    width: 100%;\n  }\n"])));t(66925);const D=e=>{let{title:n,subtitle:t,tags:a}=e;return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flexNullCenter gap10",children:[(0,x.jsx)("div",{className:"font16 bold",children:n}),null===a||void 0===a?void 0:a.map(e=>{let{label:n,color:t}=e;return(0,x.jsx)(m.A,{className:"semiBold",color:t,children:n})})]}),(0,x.jsx)("div",{className:"font11 greyColor",children:t})]})};var T,R,Y,E,W,F,I,q,L=t(13194),P=t(55935),Z=t(49250),G=t(76415),U=t(32513),J=t(23768);const O=()=>{const[e,n]=(0,h.useState)(!1),[t,a]=(0,h.useState)([]),[i,s]=(0,h.useState)([]),[r,d]=(0,h.useState)(""),[c,p]=(0,h.useState)(1),[u,m]=(0,h.useState)(0);(0,L.A)("Grain Hubs");const b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n(!0);try{const n={active:!0,page:e,page_size:12};t.trim()&&(n.search=t.trim());const i=await G.b.getHubs(n);a(i.results),m(i.count)}catch(i){console.error("Error fetching Hubs:",i),J.oR.error("Failed to fetch hubs")}n(!1)},g=async()=>{try{s([])}catch(e){console.error("Error fetching user memberships:",e)}};(0,h.useEffect)(()=>{b(c,r)},[c]),(0,h.useEffect)(()=>{g()},[]);const f=()=>{g(),b(c,r)};return e&&0===t.length?(0,x.jsx)(U.A,{}):(0,x.jsxs)(V,{className:"flexColumn gap20",children:[(0,x.jsxs)($,{className:"flexSpaceCenter gap20",children:[(0,x.jsx)(D,{title:"Grain Hubs",subtitle:"Find and join grain hubs in your area",tags:[{label:"".concat(u," Hubs"),color:P.oD}]}),(0,x.jsx)(K,{children:(0,x.jsx)(o.A,{placeholder:"Search hubs...",className:"font13",value:r,onChange:e=>{return n=e.target.value,d(n),p(1),void b(1,n);var n},prefix:(0,x.jsx)(Z.A,{sx:{fontSize:14,marginRight:1,color:"grey"}})})})]}),(0,x.jsxs)(Q,{className:"flex gap20",children:[(0,x.jsxs)(X,{className:"flexGrow",children:[(0,x.jsx)(ne,{children:t.map(e=>(0,x.jsx)(C,{hub:e,userMemberships:i,onMembershipUpdate:f},e.id))}),e&&(0,x.jsx)("div",{className:"flexCenter p20",children:(0,x.jsx)("div",{children:"Loading more hubs..."})}),u>12&&(0,x.jsx)(te,{className:"flexCenter",children:(0,x.jsx)(l.A,{current:c,total:u,pageSize:12,onChange:e=>{p(e),window.scrollTo({top:0,behavior:"smooth"})},showSizeChanger:!1,showQuickJumper:!0,showTotal:(e,n)=>"".concat(n[0],"-").concat(n[1]," of ").concat(e," hubs")})})]}),(0,x.jsxs)(ee,{className:"flexColumn gap15",children:[(0,x.jsx)("div",{className:"radius10 whiteBg",style:{padding:"10px 15px"},children:(0,x.jsx)(D,{title:"Hub Calendar",subtitle:"Upcoming hub activities"})}),(0,x.jsx)(_,{}),(0,x.jsx)("div",{className:"whiteBg radius10 p20",children:(0,x.jsx)("div",{className:"greyColor font12 text-center",children:"Select a hub to view activities"})})]})]})]})},V=d.Ay.div(T||(T=(0,r.A)(["\n  padding: 20px;\n  max-width: 1400px;\n  margin: 0 auto;\n"]))),Q=d.Ay.div(R||(R=(0,r.A)(["\n  @media (max-width: 1024px) {\n    flex-direction: column;\n  }\n"]))),$=d.Ay.div(Y||(Y=(0,r.A)(["\n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 15px;\n  }\n"]))),K=d.Ay.div(E||(E=(0,r.A)(["\n  min-width: 250px;\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    min-width: auto;\n  }\n"]))),X=d.Ay.div(W||(W=(0,r.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),ee=d.Ay.div(F||(F=(0,r.A)(["\n  width: 300px;\n  flex-shrink: 0;\n  \n  @media (max-width: 1024px) {\n    width: 100%;\n    display: none; /* Hide sidebar completely on mobile/tablet */\n  }\n"]))),ne=d.Ay.div(I||(I=(0,r.A)(["\n  display: grid;\n  gap: 20px;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  margin-bottom: 20px;\n  align-items: start; /* Prevents stretching */\n\n  /* Ensure minimum 3 columns on desktop */\n  @media (min-width: 1200px) {\n    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  }\n\n  @media (min-width: 1400px) {\n    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n  }\n\n  @media (max-width: 1199px) and (min-width: 900px) {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  @media (max-width: 899px) and (min-width: 600px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    gap: 15px;\n  }\n\n  @media (max-width: 480px) {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 12px;\n  }\n\n  @media (max-width: 360px) {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n"]))),te=d.Ay.div(q||(q=(0,r.A)(["\n  padding: 20px 0;\n  border-top: 1px solid #f0f0f0;\n"])))},49250:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(89379),i=t(8122),s=t(70579);const r=e=>(0,s.jsxs)(i.A,(0,a.A)((0,a.A)({viewBox:"0 0 20 20"},e),{},{children:[(0,s.jsx)("path",{d:"M8.80758 0C3.95121 0 0 3.95121 0 8.80758C0 13.6642 3.95121 17.6152 8.80758 17.6152C13.6642 17.6152 17.6152 13.6642 17.6152 8.80758C17.6152 3.95121 13.6642 0 8.80758 0ZM8.80758 15.9892C4.84769 15.9892 1.62602 12.7675 1.62602 8.80762C1.62602 4.84773 4.84769 1.62602 8.80758 1.62602C12.7675 1.62602 15.9891 4.84769 15.9891 8.80758C15.9891 12.7675 12.7675 15.9892 8.80758 15.9892Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M19.7617 18.6124L15.1005 13.9511C14.7829 13.6335 14.2685 13.6335 13.9509 13.9511C13.6332 14.2684 13.6332 14.7834 13.9509 15.1007L18.6121 19.762C18.7709 19.9208 18.9788 20.0002 19.1869 20.0002C19.3948 20.0002 19.6029 19.9208 19.7617 19.762C20.0794 19.4446 20.0794 18.9297 19.7617 18.6124Z",fill:"currentColor"})]}))},64220:(e,n,t)=>{t.d(n,{S:()=>i});var a=t(56629);const i=new class{async getHubMemberships(e){return(await a.A.get("/hubs/hubs/memberships/",{params:e})).data}async approveMembership(e,n){return(await a.A.post("/hubs/hubs/memberships/".concat(e,"/approve/"),n)).data}async rejectMembership(e,n){return(await a.A.post("/hubs/hubs/memberships/".concat(e,"/reject/"),{status:"rejected",notes:n})).data}async deleteMembership(e){await a.A.delete("/hubs/hubs/memberships/".concat(e,"/"))}async requestMembership(e){return(await a.A.post("/hubs/hubs/memberships/request_membership/",e)).data}async leaveMembership(e){return(await a.A.post("/hubs/hubs/memberships/".concat(e,"/leave/"))).data}async checkHubMembership(e){try{return(await this.getHubMemberships({hub_id:e})).find(n=>"string"===typeof n.hub?n.hub===e:"object"===typeof n.hub&&null!==n.hub&&"id"in n.hub&&n.hub.id===e)||null}catch(n){return console.error("Error checking hub membership:",n),null}}async updateMembershipRole(e,n){return(await a.A.patch("/hubs/hubs/memberships/".concat(e,"/"),{role:n})).data}async assignAgent(e,n){await a.A.post("/authentication/users/assign_agent/",{user_id:e,hub_id:n})}async unassignAgent(e,n){await a.A.post("/authentication/users/unassign_agent/",{user_id:e,hub_id:n})}}},66925:(e,n,t)=>{t.d(n,{$W:()=>o,As:()=>s,VB:()=>r,Zr:()=>i});var a=t(89379);t(36644);const i=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";function s(e){var n,t;return null===e||void 0===e||null===(n=e.replaceAll)||void 0===n||null===(t=n.call(e,"_"," "))||void 0===t?void 0:t.replaceAll("-"," ")}const r=(e,n)=>{let t={};return Object.keys(e).forEach(i=>{t=(0,a.A)((0,a.A)({},t),{},{["".concat(n,".").concat(i)]:e[i]})}),t},o=e=>{const n=new FormData;return Object.keys(e).forEach(t=>{n.append(t,e[t])}),n}},76415:(e,n,t)=>{t.d(n,{b:()=>i});var a=t(56629);const i={getHubs:async e=>a.A.get("hubs/",{params:e}).then(e=>e.data),getHubDetails:async e=>a.A.get("hubs/".concat(e,"/")).then(e=>e.data),assignHubAdmin:async(e,n)=>a.A.post("hubs/".concat(e,"/assign-admin/"),n).then(e=>e.data),unassignHubAdmin:async(e,n)=>a.A.post("hubs/".concat(e,"/unassign-admin/"),n).then(e=>e.data),async createHubs(e){const n=new FormData;for(const t in e)n.append(t,e[t]);return a.A.post("hubs/",n,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)},updateHubs:async(e,n)=>(console.log(e),a.A.patch("hubs/".concat(n,"/"),e).then(e=>e.data)),deleteHubs:async e=>(console.log(e),a.A.delete("hubs/".concat(e,"/")).then(e=>e.data)),searchHubs:async e=>a.A.get("supported-Hubs/",{params:{query:e}}).then(e=>e.data)}}}]);
//# sourceMappingURL=9095.d1c5c3ab.chunk.js.map