"use strict";(self.webpackChunkgrain_voucher_system=self.webpackChunkgrain_voucher_system||[]).push([[4670],{10183:(e,t,a)=>{a.d(t,{O:()=>n});var s=a(56629);const n={getTrades:async e=>s.A.get("trade/trades/",{params:e}).then((e=>e.data)),getTradeDetails:async e=>s.A.get("trade/trades/".concat(e,"/")).then((e=>e.data)),createTrade:async e=>s.A.post("trade/trades/",e).then((e=>e.data)),updateTrade:async(e,t)=>s.A.patch("trade/trades/".concat(t,"/"),e).then((e=>e.data)),deleteTrade:async e=>s.A.delete("trade/trades/".concat(e,"/")).then((e=>e.data)),progressStatus:async(e,t)=>s.A.post("trade/trades/".concat(e,"/progress_status/"),t).then((e=>e.data)),quickApprove:async(e,t)=>s.A.post("trade/trades/".concat(e,"/quick_approve/"),t).then((e=>e.data)),quickReject:async(e,t)=>s.A.post("trade/trades/".concat(e,"/quick_reject/"),t).then((e=>e.data)),allocateVouchers:async(e,t)=>s.A.post("trade/trades/".concat(e,"/allocate_vouchers/"),t).then((e=>e.data)),createDeliveryBatch:async(e,t)=>s.A.post("trade/trades/".concat(e,"/create_delivery_batch/"),t).then((e=>e.data)),getDeliveryProgress:async e=>s.A.get("trade/trades/".concat(e,"/delivery_progress/")).then((e=>e.data)),markCompleted:async e=>s.A.post("trade/trades/".concat(e,"/mark_completed/")).then((e=>e.data)),getInvoicesAndPayments:async e=>s.A.get("trade/trades/".concat(e,"/invoices_and_payments/")).then((e=>e.data)),getPaymentInfo:async e=>s.A.get("trade/trades/".concat(e,"/payment_info/")).then((e=>e.data)),getCostBreakdown:async e=>s.A.get("trade/trades/".concat(e,"/cost_breakdown/")).then((e=>e.data)),getDeliveryStatusCheck:async e=>s.A.get("trade/trades/".concat(e,"/delivery_status_check/")).then((e=>e.data)),getDashboardStats:async e=>s.A.get("trade/trades/dashboard_stats/",{params:e}).then((e=>e.data)),getFinancingAllocations:async e=>s.A.get("trade/financing/",{params:e}).then((e=>e.data)),createFinancingAllocation:async e=>s.A.post("trade/financing/",e).then((e=>e.data)),updateFinancingAllocation:async(e,t)=>s.A.patch("trade/financing/".concat(t,"/"),e).then((e=>e.data)),deleteFinancingAllocation:async e=>s.A.delete("trade/financing/".concat(e,"/")).then((e=>e.data)),getLoans:async e=>s.A.get("trade/loans/",{params:e}).then((e=>e.data)),createLoan:async e=>s.A.post("trade/loans/",e).then((e=>e.data)),updateLoan:async(e,t)=>s.A.patch("trade/loans/".concat(t,"/"),e).then((e=>e.data)),repayLoan:async(e,t)=>s.A.post("trade/loans/".concat(e,"/repay/"),t).then((e=>e.data)),getTradeCosts:async e=>s.A.get("trade/costs/",{params:e}).then((e=>e.data)),createTradeCost:async e=>s.A.post("trade/costs/",e).then((e=>e.data)),updateTradeCost:async(e,t)=>s.A.patch("trade/costs/".concat(t,"/"),e).then((e=>e.data)),deleteTradeCost:async e=>s.A.delete("trade/costs/".concat(e,"/")).then((e=>e.data)),getBrokerages:async e=>s.A.get("trade/brokerages/",{params:e}).then((e=>e.data)),createBrokerage:async e=>s.A.post("trade/brokerages/",e).then((e=>e.data)),updateBrokerage:async(e,t)=>s.A.patch("trade/brokerages/".concat(t,"/"),e).then((e=>e.data)),deleteBrokerage:async e=>s.A.delete("trade/brokerages/".concat(e,"/")).then((e=>e.data)),getMyCommissions:async()=>s.A.get("trade/brokerages/my_commissions/").then((e=>e.data)),getGRNs:async e=>s.A.get("trade/grns/",{params:e}).then((e=>e.data)),getGRNDetails:async e=>s.A.get("trade/grns/".concat(e,"/")).then((e=>e.data)),createGRN:async e=>s.A.post("trade/grns/",e).then((e=>e.data)),updateGRN:async(e,t)=>s.A.patch("trade/grns/".concat(t,"/"),e).then((e=>e.data)),getGRNInvoiceStatus:async e=>s.A.get("trade/grns/".concat(e,"/invoice_status/")).then((e=>e.data)),getGRNsByTrade:async e=>s.A.get("trade/grns/by_trade/",{params:{trade_id:e}}).then((e=>e.data)),getBuyers:async e=>s.A.get("crm/accounts/",{params:{type:"customer",search:e,page_size:50}}).then((e=>e.data)),getSuppliers:async e=>s.A.get("auth/users/",{params:{role:"farmer",search:e,page_size:50}}).then((e=>e.data)),getGrainTypes:async e=>s.A.get("vouchers/grain-types/",{params:{search:e,page_size:50}}).then((e=>e.data)),getQualityGrades:async e=>s.A.get("vouchers/quality-grades/",{params:{search:e,page_size:50}}).then((e=>e.data)),getHubs:async e=>s.A.get("hubs/",{params:{search:e,page_size:50}}).then((e=>e.data)),getAgents:async e=>s.A.get("auth/users/",{params:{role__in:"bdm,agent",search:e,page_size:50}}).then((e=>e.data)),getInvestorAccounts:async e=>s.A.get("investors/accounts/",{params:{search:e,page_size:50}}).then((e=>e.data))}},12110:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(58168),n=a(98587),r=a(65043),c=a(58387),o=a(65049),i=a(34535),d=a(98206),l=a(63336),h=a(14987),m=a(60239);function g(e){return(0,m.Ay)("MuiCard",e)}(0,h.A)("MuiCard",["root"]);var u=a(70579);const A=["className","raised"],p=(0,i.Ay)(l.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),x=r.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiCard"}),{className:r,raised:i=!1}=a,l=(0,n.A)(a,A),h=(0,s.A)({},a,{raised:i}),m=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},g,t)})(h);return(0,u.jsx)(p,(0,s.A)({className:(0,c.A)(m.root,r),elevation:i?8:void 0,ref:t,ownerState:h},l))}))},13194:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(65043),n=a(95926);const r=e=>{const{title:t,setTitle:a}=(0,s.useContext)(n.C);return(0,s.useEffect)((()=>a(e)),[e,a]),t}},23722:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(89379),n=(a(65043),a(67024)),r=a(81637),c=a(70579);const o=e=>{let{size:t,color:a="primary",sx:o}=e;return(0,c.jsx)(n.A,{sx:(0,s.A)({color:"grey.500"},o),spacing:2,direction:"row",children:(0,c.jsx)(r.A,{size:t,color:a})})}},26494:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(58168),n=a(98587),r=a(65043),c=a(58387),o=a(65049),i=a(34535),d=a(98206),l=a(14987),h=a(60239);function m(e){return(0,h.Ay)("MuiCardContent",e)}(0,l.A)("MuiCardContent",["root"]);var g=a(70579);const u=["className","component"],A=(0,i.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),p=r.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiCardContent"}),{className:r,component:i="div"}=a,l=(0,n.A)(a,u),h=(0,s.A)({},a,{component:i}),p=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},m,t)})(h);return(0,g.jsx)(A,(0,s.A)({as:i,className:(0,c.A)(p.root,r),ownerState:h,ref:t},l))}))},42796:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(66734),n=a(70579);const r=(0,s.A)((0,n.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},54670:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var s=a(65043),n=a(26240),r=a(12110),c=a(90310),o=a(26494),i=a(67024),d=a(96446),l=a(85865),h=a(43845),m=a(53193),g=a(18356),u=a(72221),A=a(32143),p=a(68903),x=a(66734),y=a(70579);const v=(0,x.A)((0,y.jsx)("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-5 12H9v-2h6zm5-7H4V4l16-.02z"}),"Inventory");var j=a(67957),f=a(42796);const b=(0,x.A)((0,y.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment"),_=(0,x.A)((0,y.jsx)("path",{d:"M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m1.65 7.35L16.5 17.2V14h1v2.79l1.85 1.85zM18 3h-3.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H6c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h6.11c-.59-.57-1.07-1.25-1.42-2H6V5h2v3h8V5h2v5.08c.71.1 1.38.31 2 .6V5c0-1.1-.9-2-2-2m-6 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"PendingActions");var C=a(98606),k=a(71403);const w=(0,x.A)((0,y.jsx)("path",{d:"M14 11V8c4.56-.58 8-3.1 8-6H2c0 2.9 3.44 5.42 8 6v3c-3.68.73-8 3.61-8 11h6v-2H4.13c.93-6.83 6.65-7.2 7.87-7.2s6.94.37 7.87 7.2H16v2h6c0-7.39-4.32-10.27-8-11m-2 11c-1.1 0-2-.9-2-2 0-.55.22-1.05.59-1.41C11.39 17.79 16 16 16 16s-1.79 4.61-2.59 5.41c-.36.37-.86.59-1.41.59"}),"Scale"),z=(0,x.A)((0,y.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll");var T=a(10183),D=a(13194),R=a(23722);const S=e=>{let{title:t,value:a,icon:m,color:g,subtitle:u,trend:A}=e;(0,n.A)();return(0,y.jsx)(r.A,{elevation:0,sx:{background:"linear-gradient(135deg, ".concat((0,c.X4)(g,.05)," 0%, ").concat((0,c.X4)(g,.01)," 100%)"),border:"1px solid ".concat((0,c.X4)(g,.2)),borderRadius:3,overflow:"hidden",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px ".concat((0,c.X4)(g,.15))}},children:(0,y.jsx)(o.A,{sx:{p:3},children:(0,y.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,y.jsxs)(d.A,{children:[(0,y.jsx)(l.A,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:t}),(0,y.jsx)(l.A,{variant:"h3",fontWeight:800,sx:{color:g,mb:.5},children:a}),u&&(0,y.jsx)(l.A,{variant:"body2",color:"text.secondary",children:u}),void 0!==A&&(0,y.jsx)(h.A,{size:"small",label:"".concat(A>0?"+":"").concat(A,"%"),color:A>0?"success":"error",sx:{mt:1,height:24,fontWeight:600}})]}),(0,y.jsx)(d.A,{sx:{p:2,borderRadius:3,backgroundColor:(0,c.X4)(g,.12),color:g,display:"flex",alignItems:"center",justifyContent:"center"},children:s.cloneElement(m,{fontSize:"large"})})]})})})},M=()=>{var e,t,a,h,x,M,I,V,L,H;(0,D.A)("Trade Dashboard");const N=(0,n.A)(),[W,B]=(0,s.useState)(null),[F,G]=(0,s.useState)(!0),[X,O]=(0,s.useState)("30");(0,s.useEffect)((()=>{q()}),[X]);const q=async()=>{try{G(!0);const e=new Date;e.setDate(e.getDate()-parseInt(X));const t=await T.O.getDashboardStats({start_date:e.toISOString().split("T")[0]});B(t)}catch(e){console.error("Failed to load dashboard stats:",e)}finally{G(!1)}},P=e=>new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),U=e=>new Intl.NumberFormat("en-UG").format(e||0);if(F)return(0,y.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"70vh",children:(0,y.jsx)(R.A,{})});const E=(null===W||void 0===W||null===(e=W.summary)||void 0===e?void 0:e.total_quantity_kg)||0,Q=(E/1e3).toFixed(1);return(0,y.jsxs)(d.A,{sx:{p:{xs:2,md:4}},children:[(0,y.jsxs)(i.A,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:2,mb:5,children:[(0,y.jsxs)(d.A,{children:[(0,y.jsx)(l.A,{variant:"h4",fontWeight:800,color:"text.primary",children:"Trade Dashboard"}),(0,y.jsx)(l.A,{variant:"body2",color:"text.secondary",mt:1,children:"Overview of your trading performance"})]}),(0,y.jsxs)(m.A,{sx:{minWidth:{xs:"100%",sm:220}},children:[(0,y.jsx)(g.A,{id:"date-range-label",children:"Date Range"}),(0,y.jsxs)(u.A,{labelId:"date-range-label",value:X,label:"Date Range",onChange:e=>O(e.target.value),size:"medium",children:[(0,y.jsx)(A.A,{value:"7",children:"Last 7 Days"}),(0,y.jsx)(A.A,{value:"30",children:"Last 30 Days"}),(0,y.jsx)(A.A,{value:"90",children:"Last 90 Days"}),(0,y.jsx)(A.A,{value:"365",children:"Last Year"})]})]})]}),(0,y.jsxs)(p.Ay,{container:!0,spacing:3,mb:5,children:[(0,y.jsx)(p.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,y.jsx)(S,{title:"Total Trades",value:U(null===W||void 0===W||null===(t=W.summary)||void 0===t?void 0:t.total_trades),icon:(0,y.jsx)(v,{}),color:N.palette.primary.main})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,y.jsx)(S,{title:"Total Revenue",value:P(null===W||void 0===W||null===(a=W.summary)||void 0===a?void 0:a.total_revenue),icon:(0,y.jsx)(j.A,{}),color:N.palette.success.main})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,y.jsx)(S,{title:"Total Profit",value:P(null===W||void 0===W||null===(h=W.summary)||void 0===h?void 0:h.total_profit),icon:(0,y.jsx)(f.A,{}),color:N.palette.info.main})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,sm:6,lg:3,children:(0,y.jsx)(S,{title:"Average ROI",value:"".concat(((null===W||void 0===W||null===(x=W.summary)||void 0===x?void 0:x.avg_roi)||0).toFixed(1),"%"),icon:(0,y.jsx)(b,{}),color:N.palette.warning.main,trend:12.5})})]}),(0,y.jsx)(l.A,{variant:"h5",fontWeight:700,mb:3,children:"Trade Status Overview"}),(0,y.jsxs)(p.Ay,{container:!0,spacing:3,mb:5,children:[(0,y.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(S,{title:"Pending Approval",value:U(null===W||void 0===W||null===(M=W.summary)||void 0===M?void 0:M.pending_approval),subtitle:"Awaiting review",icon:(0,y.jsx)(_,{}),color:N.palette.success.main})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(S,{title:"Ready for Delivery",value:U(null===W||void 0===W||null===(I=W.summary)||void 0===I?void 0:I.ready_for_delivery),subtitle:"Approved & packed",icon:(0,y.jsx)(C.A,{}),color:N.palette.success.main})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(S,{title:"In Transit",value:U(null===W||void 0===W||null===(V=W.summary)||void 0===V?void 0:V.in_transit),subtitle:"On the way",icon:(0,y.jsx)(k.A,{}),color:N.palette.info.main})})]}),(0,y.jsxs)(p.Ay,{container:!0,spacing:4,children:[(0,y.jsx)(p.Ay,{item:!0,xs:12,lg:7,children:(0,y.jsx)(r.A,{sx:{borderRadius:3,height:"100%"},elevation:2,children:(0,y.jsxs)(o.A,{sx:{p:4},children:[(0,y.jsx)(l.A,{variant:"h6",fontWeight:700,gutterBottom:!0,children:"Status Distribution by Value"}),(0,y.jsx)(p.Ay,{container:!0,spacing:2,mt:1,children:null===W||void 0===W||null===(L=W.status_breakdown)||void 0===L?void 0:L.map(((e,t)=>{const a=[N.palette.primary.main,N.palette.success.main,N.palette.warning.main,N.palette.info.main,N.palette.error.main],s=a[t%a.length];return(0,y.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,y.jsxs)(d.A,{sx:{p:2.5,borderRadius:2,backgroundColor:(0,c.X4)(s,.08),border:"1px solid ".concat((0,c.X4)(s,.2)),transition:"0.2s","&:hover":{backgroundColor:(0,c.X4)(s,.15)}},children:[(0,y.jsx)(l.A,{variant:"body2",color:"text.secondary",fontWeight:500,children:e.status.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),(0,y.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"center",mt:1,children:[(0,y.jsx)(l.A,{variant:"h5",fontWeight:700,children:e.count}),(0,y.jsx)(l.A,{variant:"body1",fontWeight:600,color:s,children:P(e.total_value)})]})]})},e.status)}))})]})})}),(0,y.jsx)(p.Ay,{item:!0,xs:12,lg:5,children:(0,y.jsxs)(i.A,{spacing:4,height:"100%",children:[(0,y.jsx)(r.A,{sx:{borderRadius:3,flex:1},elevation:2,children:(0,y.jsxs)(o.A,{sx:{p:4,height:"100%",display:"flex",flexDirection:"column"},children:[(0,y.jsxs)(d.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,y.jsx)(w,{sx:{fontSize:32,color:N.palette.primary.main}}),(0,y.jsx)(l.A,{variant:"h6",fontWeight:700,children:"Total Quantity Traded"})]}),(0,y.jsxs)(l.A,{variant:"h2",fontWeight:800,color:"primary",lineHeight:1,children:[U(E)," ",(0,y.jsx)("small",{style:{fontSize:"1rem"},children:"kg"})]}),(0,y.jsxs)(l.A,{variant:"h4",color:"text.secondary",fontWeight:600,children:[Q," Metric Tons"]})]})}),(0,y.jsx)(r.A,{sx:{borderRadius:3,flex:1},elevation:2,children:(0,y.jsxs)(o.A,{sx:{p:4,height:"100%",display:"flex",flexDirection:"column"},children:[(0,y.jsxs)(d.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,y.jsx)(z,{sx:{fontSize:32,color:N.palette.success.main}}),(0,y.jsx)(l.A,{variant:"h6",fontWeight:700,children:"Completed Trades"})]}),(0,y.jsx)(l.A,{variant:"h2",fontWeight:800,color:"success.main",lineHeight:1,children:U(null===W||void 0===W||null===(H=W.summary)||void 0===H?void 0:H.completed)}),(0,y.jsx)(l.A,{variant:"body1",color:"text.secondary",mt:1,children:"Successfully closed & delivered"})]})})]})})]})]})}},67957:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(66734),n=a(70579);const r=(0,s.A)((0,n.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},71403:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(66734),n=a(70579);const r=(0,s.A)((0,n.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping")},98606:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(66734),n=a(70579);const r=(0,s.A)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=4670.b3b51c03.chunk.js.map